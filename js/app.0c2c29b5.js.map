{"version":3,"file":"js/app.0c2c29b5.js","mappings":"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","sources":["webpack://h5-app/./src/App.vue","webpack://h5-app/src/App.vue","webpack://h5-app/./src/App.vue?c036","webpack://h5-app/./src/App.vue?0e40","webpack://h5-app/./src/store/error.js","webpack://h5-app/./src/store/index.js","webpack://h5-app/./src/view/home.vue","webpack://h5-app/./src/view/UserList.vue","webpack://h5-app/./src/components/UserListHeader.vue","webpack://h5-app/./src/assets/svg/svg.js","webpack://h5-app/src/components/UserListHeader.vue","webpack://h5-app/./src/components/UserListHeader.vue?d2e3","webpack://h5-app/./src/components/UserListHeader.vue?151f","webpack://h5-app/src/view/UserList.vue","webpack://h5-app/./src/view/UserList.vue?5d27","webpack://h5-app/./src/view/UserList.vue?fbc0","webpack://h5-app/./src/view/ChatArea.vue","webpack://h5-app/src/view/ChatArea.vue","webpack://h5-app/./src/view/ChatArea.vue?2612","webpack://h5-app/./src/view/ChatArea.vue?5bcc","webpack://h5-app/src/view/home.vue","webpack://h5-app/./src/view/home.vue?e2fc","webpack://h5-app/./src/view/home.vue?414f","webpack://h5-app/./src/view/setting.vue","webpack://h5-app/src/view/setting.vue","webpack://h5-app/./src/view/setting.vue?460f","webpack://h5-app/./src/view/setting.vue?4756","webpack://h5-app/./src/loginPage/index.vue","webpack://h5-app/src/loginPage/index.vue","webpack://h5-app/./src/loginPage/index.vue?98ea","webpack://h5-app/./src/loginPage/index.vue?0d0b","webpack://h5-app/./src/loginPage/login.vue","webpack://h5-app/src/loginPage/login.vue","webpack://h5-app/./src/loginPage/login.vue?b926","webpack://h5-app/./src/loginPage/login.vue?5273","webpack://h5-app/./src/loginPage/register.vue","webpack://h5-app/src/loginPage/register.vue","webpack://h5-app/./src/loginPage/register.vue?356c","webpack://h5-app/./src/loginPage/register.vue?94a1","webpack://h5-app/./src/loginPage/ForgetPassword.vue","webpack://h5-app/src/loginPage/ForgetPassword.vue","webpack://h5-app/./src/loginPage/ForgetPassword.vue?9de5","webpack://h5-app/./src/loginPage/ForgetPassword.vue?8dd1","webpack://h5-app/./src/settingPages/PersonalInformation.vue","webpack://h5-app/src/settingPages/PersonalInformation.vue","webpack://h5-app/./src/settingPages/PersonalInformation.vue?3856","webpack://h5-app/./src/settingPages/PersonalInformation.vue?fc74","webpack://h5-app/./src/settingPages/ChangePassword.vue","webpack://h5-app/src/settingPages/ChangePassword.vue","webpack://h5-app/./src/settingPages/ChangePassword.vue?041f","webpack://h5-app/./src/settingPages/ChangePassword.vue?6a9a","webpack://h5-app/./src/settingPages/SetNewPassword.vue","webpack://h5-app/src/settingPages/SetNewPassword.vue","webpack://h5-app/./src/settingPages/SetNewPassword.vue?fc93","webpack://h5-app/./src/settingPages/SetNewPassword.vue?9d8c","webpack://h5-app/./src/view/Friends.vue","webpack://h5-app/src/view/Friends.vue","webpack://h5-app/./src/view/Friends.vue?7c57","webpack://h5-app/./src/view/Friends.vue?be18","webpack://h5-app/./src/settingPages/p_i_pages/UserName.vue","webpack://h5-app/src/settingPages/p_i_pages/UserName.vue","webpack://h5-app/./src/settingPages/p_i_pages/UserName.vue?2dea","webpack://h5-app/./src/settingPages/p_i_pages/UserName.vue?8496","webpack://h5-app/./src/settingPages/p_i_pages/UserGender.vue","webpack://h5-app/src/settingPages/p_i_pages/UserGender.vue","webpack://h5-app/./src/settingPages/p_i_pages/UserGender.vue?c42a","webpack://h5-app/./src/settingPages/p_i_pages/UserGender.vue?23ae","webpack://h5-app/./src/settingPages/p_i_pages/UserArea.vue","webpack://h5-app/src/settingPages/p_i_pages/UserArea.vue","webpack://h5-app/./src/settingPages/p_i_pages/UserArea.vue?7d22","webpack://h5-app/./src/settingPages/p_i_pages/UserArea.vue?4ff2","webpack://h5-app/./src/settingPages/p_i_pages/UserAreaDetail.vue","webpack://h5-app/src/settingPages/p_i_pages/UserAreaDetail.vue","webpack://h5-app/./src/settingPages/p_i_pages/UserAreaDetail.vue?6861","webpack://h5-app/./src/settingPages/p_i_pages/UserAreaDetail.vue?6cc5","webpack://h5-app/./src/settingPages/p_i_pages/UserNickName.vue","webpack://h5-app/src/settingPages/p_i_pages/UserNickName.vue","webpack://h5-app/./src/settingPages/p_i_pages/UserNickName.vue?c8ef","webpack://h5-app/./src/settingPages/p_i_pages/UserNickName.vue?d5e4","webpack://h5-app/./src/settingPages/SetUp.vue","webpack://h5-app/src/settingPages/SetUp.vue","webpack://h5-app/./src/settingPages/SetUp.vue?4a87","webpack://h5-app/./src/settingPages/SetUp.vue?d772","webpack://h5-app/./src/router/index.js","webpack://h5-app/./src/components/global_error.vue","webpack://h5-app/src/components/global_error.vue","webpack://h5-app/./src/components/global_error.vue?0095","webpack://h5-app/./src/components/global_error.vue?458f","webpack://h5-app/./src/components/clear.vue","webpack://h5-app/src/components/clear.vue","webpack://h5-app/./src/components/clear.vue?4092","webpack://h5-app/./src/components/clear.vue?1fe8","webpack://h5-app/./src/components/forward.vue","webpack://h5-app/src/components/forward.vue","webpack://h5-app/./src/components/forward.vue?1d9d","webpack://h5-app/./src/components/forward.vue?3517","webpack://h5-app/./src/components/back.vue","webpack://h5-app/src/components/back.vue","webpack://h5-app/./src/components/back.vue?852f","webpack://h5-app/./src/components/back.vue?c8f9","webpack://h5-app/./src/components/header.vue","webpack://h5-app/src/components/header.vue","webpack://h5-app/./src/components/header.vue?2dc4","webpack://h5-app/./src/components/header.vue?1e62","webpack://h5-app/./src/main.js","webpack://h5-app/webpack/bootstrap","webpack://h5-app/webpack/runtime/chunk loaded","webpack://h5-app/webpack/runtime/compat get default export","webpack://h5-app/webpack/runtime/define property getters","webpack://h5-app/webpack/runtime/global","webpack://h5-app/webpack/runtime/hasOwnProperty shorthand","webpack://h5-app/webpack/runtime/make namespace object","webpack://h5-app/webpack/runtime/jsonp chunk loading","webpack://h5-app/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[(!_vm.isLoggedIn)?_c('router-view'):_vm._e(),_c('GlobalError'),(_vm.isLoggedIn)?_c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"sidebar_container\"},[_c('div',{staticClass:\"sidebar-content\"},[_c('div',{staticStyle:{\"color\":\"dodgerblue\"}},[_vm._v(\"liuhu\")]),_c('div',{staticClass:\"user-avatar-container s1\"},[(_vm.currentUser && _vm.currentUser.avatar)?_c('img',{staticClass:\"user-sidebar-avatar\",attrs:{\"src\":_vm.getAvatarUrl(_vm.currentUser.avatar),\"alt\":\"用户头像\"}}):_c('img',{staticClass:\"user-sidebar-avatar\",attrs:{\"src\":\"http://localhost:3081/public/default_user-avator/default.webp\",\"alt\":\"默认头像\"}})]),_c('van-tabbar',{staticClass:\"van-tabbar\",attrs:{\"route\":\"\",\"border\":false}},[_c('van-tabbar-item',{attrs:{\"to\":\"/Home\",\"icon\":_vm.homeIcon}},[_vm._v(\"聊天\")])],1),_c('van-tabbar',{staticClass:\"van-tabbar\",attrs:{\"route\":\"\",\"border\":false}},[_c('van-tabbar-item',{attrs:{\"to\":\"/Friends\",\"icon\":_vm.friendsIcon}},[_vm._v(\"好友\")])],1),_c('van-tabbar',{staticClass:\"van-tabbar\",attrs:{\"route\":\"\",\"border\":false}},[_c('van-tabbar-item',{attrs:{\"to\":\"/Setting\",\"icon\":_vm.settingIcon}},[_vm._v(\"设置\")])],1)],1)]),_c('div',{staticClass:\"app-content\"},[_c('router-view')],1)]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <!-- App.vue -->\n    <div id=\"app\">\n        <!-- 启动动画、登陆、注册、忘记密码页面渲染 -->\n        <router-view v-if=\"!isLoggedIn\" />\n\n        <!-- 全局错误提示 -->\n        <GlobalError />\n\n        <!-- 登陆后的页面渲染区域 -->\n        <div class=\"app-container\" v-if=\"isLoggedIn\">\n            <!-- 侧边栏 -->\n            <div class=\"sidebar_container\">\n                <div class=\"sidebar-content\">\n                    <div style=\"color: dodgerblue;\">liuhu</div>\n                    <!-- 这里显示当前登陆用户的头像 -->\n                    <div class=\"user-avatar-container s1\">\n                        <img :src=\"getAvatarUrl(currentUser.avatar)\" alt=\"用户头像\" class=\"user-sidebar-avatar\"\n                            v-if=\"currentUser && currentUser.avatar\" />\n                        <img src=\"http://localhost:3081/public/default_user-avator/default.webp\" alt=\"默认头像\"\n                            class=\"user-sidebar-avatar\" v-else />\n                    </div>\n\n                    <van-tabbar class=\"van-tabbar\" route :border=\"false\">\n                        <van-tabbar-item to=\"/Home\" :icon=\"homeIcon\">聊天</van-tabbar-item>\n                    </van-tabbar>\n\n                    <van-tabbar class=\"van-tabbar\" route :border=\"false\">\n                        <van-tabbar-item to=\"/Friends\" :icon=\"friendsIcon\">好友</van-tabbar-item>\n                    </van-tabbar>\n\n                    <van-tabbar class=\"van-tabbar\" route :border=\"false\">\n                        <van-tabbar-item to=\"/Setting\" :icon=\"settingIcon\">设置</van-tabbar-item>\n                    </van-tabbar>\n                </div>\n            </div>\n\n            <!-- 页面内容渲染区域 -->\n            <div class=\"app-content\">\n                <!-- 这里渲染 Home.vue -->\n                <router-view />\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n    name: \"App\",\n    data() {\n        return {};\n    },\n    mounted() {\n    },\n\n    computed: {\n        // 获取登陆状态\n        ...mapGetters([\"isLoggedIn\", \"currentUser\"]), // <-- 添加 currentUser getter\n\n        // ✅ 主页图标的新计算属性\n        homeIcon() {\n            const currentPath = this.$route.path;\n            // console.log('APP ===== Current route path for Home icon:', currentPath);\n            return currentPath === '/Home' ? 'chat' : 'chat-o';\n        },\n\n        // ✅ 设置图标的新计算属性\n        settingIcon() {\n            // 如果当前路由的路径是 '/Setting'，则使用 'setting'，否则使用 'setting-o'\n            return this.$route.path === '/Setting' ? 'setting' : 'setting-o';\n        },\n\n        // ✅ 好友图标的新计算属性\n        friendsIcon() {\n            // 如果当前路由的路径是 '/Friends'，则使用 'friends'，否则使用 'friends-o'\n            return this.$route.path === '/Friends' ? 'friends' : 'friends-o';\n        }\n    },\n    created() {\n        this.checkLogin();\n    },\n    methods: {\n        ...mapActions([\"checkLogin\"]),\n        // 复制自 ChatArea.vue 的 getAvatarUrl 方法，或者从公共工具引入\n        getAvatarUrl(relativePath) {\n            // 如果 relativePath 为空或null，使用默认头像路径\n            if (!relativePath) {\n                return 'http://localhost:3081/public/default_user-avator/default.webp';\n            }\n\n            // 检查 relativePath 是否已经是一个完整的 URL (例如 http://...)\n            // 如果是，直接返回，不再拼接\n            if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {\n                return relativePath;\n            }\n\n            // 如果 relativePath 是相对路径（例如 /uploads/... 或 public/...）\n            const baseUrl = 'http://localhost:3081';\n            // 确保相对路径以 '/' 开头，避免 /public/ 和 /uploads/ 之间少了一个斜杠\n            if (!relativePath.startsWith('/')) {\n                relativePath = '/' + relativePath;\n            }\n            return `${baseUrl}${relativePath}`;\n        },\n    }\n};\n</script>\n\n<style lang=\"less\">\n#app {\n    min-width: 570px;\n}\n\n:root {\n    --nav-height: @nav_status;\n    --tabbar-height: @tabbar_height;\n}\n</style>\n\n<style scoped lang=\"less\">\n.app-container {\n    width: 100vw;\n    min-width: 570px;\n    height: 100vh;\n    background-color: @240_240_240;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex-direction: row;\n}\n\n.app-content {\n    width: 100%;\n    height: 100vh;\n    background-color: @240_240_240;\n}\n\n.sidebar {\n    height: 100%;\n    width: @tabbar_height;\n    background-color: @240_240_240;\n}\n\n\n// ... 其他样式保持不变\n\n.sidebar_container {\n    height: 100%;\n    width: @tabbar_height; // 假设这个变量设置了侧边栏宽度，例如 60px\n    background-color: @240_240_240;\n    display: flex; // 使内容垂直居中\n    flex-direction: column; // 垂直排列\n    align-items: center; // 水平居中\n}\n\n.sidebar-content {\n    width: 100%;\n    height: 240px;\n    // background-color: blue;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center; // 水平居中\n}\n\n.user-avatar-container {\n    width: 40px; // 头像容器的宽度\n    height: 40px; // 头像容器的高度\n    border-radius: 50%; // 圆形容器\n    overflow: hidden; // 确保图片超出容器时被裁剪\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: #fff; // 背景色，如果图片透明可见\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); // 添加一点阴影\n}\n\n.user-sidebar-avatar {\n    width: 100%; // 图片填充容器\n    height: 100%; // 图片填充容器\n    object-fit: cover; // 确保图片等比例填充，裁剪超出部分\n    border-radius: 50%; // 圆形图片\n}\n\n\n.van-tabbar {\n    background-color: rgba(255, 0, 0, 0);\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    flex-direction: column;\n    width: 100%; // 确保 Tabbar 占据侧边栏的全部宽度\n}\n\n// 调整 Tabbar Item 的样式，让它们更适合垂直布局\n.van-tabbar-item {\n    padding: 15px 0; // 增加上下内边距\n    width: 100%; // 让每个 Tabbar Item 占据完整宽度\n\n    .van-tabbar-item__icon {\n        margin-bottom: 5px; // 图标和文字之间的间距\n    }\n\n    .van-tabbar-item__text {\n        font-size: 0.8em; // 调整文字大小\n    }\n}\n\n.van-tabbar--fixed {\n    position: relative; // 保持相对定位，因为它在 flex 容器内部\n}\n\n.vt1 {\n    margin-bottom: 40px;\n}\n</style>\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=10f3ff6e&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=10f3ff6e&prod&lang=less\"\nimport style1 from \"./App.vue?vue&type=style&index=1&id=10f3ff6e&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10f3ff6e\",\n  null\n  \n)\n\nexport default component.exports","// src/store/error.js\n\nconst state = {\n  errors: []  // 每条 error = { msg: '提示内容', type: 'error' | 'success' }\n};\n\nconst mutations = {\n  ADD_ERROR(state, payload) {\n    state.errors.push(payload);\n  },\n  REMOVE_ERROR(state, index = 0) {\n    state.errors.splice(index, 1);\n  }\n};\n\nconst actions = {\n  addError({ commit }, { msg, type = 'error' }) {\n    const payload = { msg, type };\n    commit('ADD_ERROR', payload);\n\n    setTimeout(() => {\n      commit('REMOVE_ERROR');\n    }, 1000); // 自动移除\n  }\n};\n\nconst getters = {\n  allErrors: state => state.errors\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters\n};\n\n","// src/store/index.js\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\n\nconst storeAxios = axios.create({\n    baseURL: process.env.VUE_APP_API_BASE_URL,\n    timeout: 5000,\n    withCredentials: true,\n    headers: { 'Content-Type': 'application/json', },\n});\n\n// 全局 错误处理\nimport error from '@/store/error.js'\n\n// 安装 Vuex 插件\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n    state: {\n        isLoggedIn: false,\n        currentUser: null, // 用于存储当前用户的完整信息，包括 id 和 user_id\n        // ✅ 新增：用于存储当前聊天目标用户，以便跨页面共享\n        currentChatTargetUser: null\n    },\n\n    mutations: {\n        setLoginStatus(state, status) {\n            state.isLoggedIn = status;\n        },\n        // 更新 setCurrentUser mutation，确保能接收并存储完整的用户对象\n        setCurrentUser(state, user) {\n            state.currentUser = user;\n            // console.log('关键：更新 setCurrentUser mutation，确保能接收并存储完整的用户对象', state.currentUser)\n        },\n        // 完善 logout mutation，清除 currentUser\n        logout(state) {\n            state.isLoggedIn = false;\n            state.currentUser = null; // 清除用户数据\n            state.currentChatTargetUser = null; // ✅ 登出时也清空聊天目标用户\n        },\n        // 更新 currentUser 的 avatar 字段\n        setCurrentUserAvatar(state, avatarPath) {\n            if (state.currentUser) {\n                state.currentUser.avatar = avatarPath;\n                // console.log('Vuex中avatar已更新为:', state.currentUser.avatar);\n            }\n        },\n        // 更新 currentUser 的 gender 字段\n        setCurrentUserGender(state, gender) {\n            if (state.currentUser) {\n                state.currentUser.gender = gender;\n                // console.log('Vuex中性别已更新为:', state.currentUser.gender);\n            }\n        },\n        // ✅ 新增 mutation 来设置聊天目标用户\n        setChatTargetUser(state, user) {\n            state.currentChatTargetUser = user;\n            // console.log('Vuex setChatTargetUser:', user); // 调试用\n        }\n    },\n\n    actions: {\n        async checkLogin({ commit }) {\n            try {\n                const res = await storeAxios.get('/check-session', { withCredentials: true });\n\n                commit('setLoginStatus', res.data.loggedIn);\n\n                if (res.data.loggedIn && res.data.user) {\n                    // 如果 check-session 返回 user 数据，也将其存储\n                    commit('setCurrentUser', res.data.user);\n                    // console.log('Vuex 中保存的用户信息(check-session 返回的 user 数据):', res.data.user.avatar);\n                } else {\n                    commit('setCurrentUser', null); // 如果未登录或没有 user 数据，清空\n                }\n            } catch {\n                commit('setLoginStatus', false);\n                commit('setCurrentUser', null); // 错误时也清空\n            }\n        },\n\n        // 一个 action 来专门处理登录后设置用户数据\n        // 这个 action 将被 login.vue 调用\n        async loginSuccess({ commit, dispatch }, userData) {\n            commit('setLoginStatus', true);\n            commit('setCurrentUser', userData); // 存储从登录或 profile 接口获取的完整用户数据\n            // console.log('Vuex中保存的用户数据(通过loginSuccess):', userData);\n            // 可以在这里派发其他 action，例如获取用户完整的资料（如果登录接口返回的不全）\n            // await dispatch('fetchUserProfile'); // 示例\n        },\n\n        logout({ commit }) {\n            // 在这里触发后端的 /api/exit 登出请求，然后才清除前端状态\n            // 示例：\n            // await axios.post('http://localhost:3081/api/exit', {}, { withCredentials: true });\n            commit('setLoginStatus', false);\n            commit('setCurrentUser', null);\n        },\n        // ✅ 新增 action 来设置聊天目标用户\n        selectChatUser({ commit }, user) {\n            commit('setChatTargetUser', user);\n        }\n    },\n\n    getters: {\n        isLoggedIn(state) {\n            return state.isLoggedIn;\n        },\n        // getter 获取完整的 currentUser 对象\n        currentUser(state) {\n            return state.currentUser;\n        },\n        // 获取用户数据库主键 ID (如果你的后端 profile 路由使用 id)\n        currentUserId(state) {\n            return state.currentUser ? state.currentUser.id : null;\n        },\n        // 获取用户的自定义 user_id (如果你的后端 deactivate-account 路由使用 user_id)\n        currentUserCustomId(state) {\n            return state.currentUser ? state.currentUser.user_id : null;\n        },\n        getUserEmail(state) {\n            return state.currentUser?.email || '';\n        },\n        // ✅ 新增 getter 获取聊天目标用户\n        currentChatTargetUser(state) {\n            return state.currentChatTargetUser;\n        }\n    },\n\n    modules: {\n        error\n    },\n});","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home_container\"},[_c('div',{staticClass:\"user-list\",style:({ width: _vm.userListWidth + 'px' })},[_c('UserList',{attrs:{\"currentUser\":_vm.currentChatUser},on:{\"select-user\":_vm.handleSelectUserFromUserList}})],1),_c('div',{staticClass:\"divider\",on:{\"mousedown\":_vm.startDrag}}),_c('div',{staticClass:\"chat-area\"},[_c('ChatArea',{attrs:{\"user\":_vm.currentChatUser}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"user-list-wrapper\"},[_c('ul',{staticClass:\"UserList_container\"},[_c('UserListHeader',{attrs:{\"friends\":_vm.users,\"currentUser\":_vm.currentUser},on:{\"select-user\":_vm.selectUser,\"friend-added\":_vm.handleFriendAdded}}),_c('div',{staticClass:\"user-list\"},[(_vm.loading)?_c('li',{staticClass:\"loading-item default-item\"},[_vm._v(\"加载好友中...\")]):(_vm.users.length === 0)?_c('li',{staticClass:\"empty-list default-item\"},[_vm._v(\"暂无好友\")]):_vm._e(),_vm._l((_vm.users),function(user){return _c('li',{key:user.user_id,class:{ active: _vm.currentUser && _vm.currentUser.user_id === user.user_id, 'default-user-item': true },on:{\"click\":function($event){return _vm.selectUser(user)}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":user.avatar,\"alt\":user.name + '头像'}}),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(user.nickname || user.name))])])})],2)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"list-header\"},[_c('div',{staticClass:\"search-container\"},[_c('div',{staticClass:\"search-input-wrapper\",class:{ focus: _vm.isFocused }},[_c('svg',{staticClass:\"search-icon\",attrs:{\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":_vm.searchIconPath}})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.searchValue),expression:\"searchValue\",modifiers:{\"trim\":true}}],ref:\"searchInput\",staticClass:\"actual-search-input\",attrs:{\"type\":\"text\",\"placeholder\":\"搜索好友或邮箱添加\"},domProps:{\"value\":(_vm.searchValue)},on:{\"focus\":_vm.handleFocus,\"blur\":[_vm.handleBlur,function($event){return _vm.$forceUpdate()}],\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleSearchSubmit.apply(null, arguments)},\"input\":function($event){if($event.target.composing)return;_vm.searchValue=$event.target.value.trim()}}}),(_vm.searchValue.length > 0 && _vm.isFocused)?_c('div',{staticClass:\"clear-box\",on:{\"mousedown\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.clearSearchInput()}}},[_c('svg',{staticClass:\"clear-icon\",attrs:{\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":_vm.clearIconPath}})])]):_vm._e()]),_c('button',{staticClass:\"add-button\",on:{\"click\":function($event){return _vm.openAddFriendOverlay()}}},[_c('svg',{staticClass:\"add-icon\",attrs:{\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":_vm.addIconPath}})])])]),(_vm.showSearchResultsOverlay)?_c('div',{staticClass:\"search-results-overlay\"},[(_vm.filteredFriends.length > 0)?[_c('p',{staticClass:\"search-results-category\"},[_vm._v(\"我的好友\")]),_c('ul',{staticClass:\"search-results-list\"},_vm._l((_vm.filteredFriends),function(user){return _c('li',{key:user.user_id,staticClass:\"search-user-item\",class:{'highlighted': (_vm.filteredFriends.length > 0 && _vm.highlightFirstFriend)},on:{\"click\":function($event){return _vm.selectUserFromSearch(user)}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":user.avatar,\"alt\":user.name + '头像'}}),_c('div',{staticClass:\"user-info\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(user.nickname || user.name))])])])}),0)]:_vm._e(),(_vm.isValidEmail && (_vm.remoteSearchLoading || _vm.searchedNewUser || _vm.remoteSearchError))?[_c('p',{staticClass:\"search-results-category\"},[_vm._v(\"查找新用户\")]),_c('ul',{staticClass:\"search-results-list\"},[(_vm.remoteSearchLoading)?_c('li',{staticClass:\"loading-item search-item\"},[_vm._v(\"搜索中...\")]):(_vm.remoteSearchError)?_c('li',{staticClass:\"empty-list search-item error-message\"},[_vm._v(_vm._s(_vm.remoteSearchError))]):(_vm.searchedNewUser)?_c('li',{staticClass:\"search-user-item new-user-item\",class:{'highlighted': _vm.highlightNewUserItem},on:{\"click\":function($event){return _vm.addNewFriend(_vm.searchedNewUser)}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.searchedNewUser.avatar,\"alt\":_vm.searchedNewUser.name + '头像'}}),_c('div',{staticClass:\"user-info\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.searchedNewUser.nickname || _vm.searchedNewUser.name))]),_c('span',{staticClass:\"email\"},[_vm._v(_vm._s(_vm.searchedNewUser.email))])]),_c('button',{staticClass:\"add-button-action\",on:{\"click\":function($event){$event.stopPropagation();return _vm.addNewFriend(_vm.searchedNewUser)}}},[_vm._v(\"添加\")])]):(!_vm.searchedNewUser && !_vm.remoteSearchError)?_c('li',{staticClass:\"empty-list search-item\"},[_vm._v(\"未找到该用户\")]):_vm._e()])]:(!_vm.isValidEmail && _vm.searchValue.length > 0 && _vm.filteredFriends.length === 0)?[_c('p',{staticClass:\"empty-list search-item\"},[_vm._v(\"未找到相关好友。请输入邮箱进行精确查找新用户。\")])]:_vm._e()],2):_vm._e(),(_vm.showAddFriendOverlay)?_c('div',{staticClass:\"add-friend-overlay\"},[_c('div',{staticClass:\"add-friend-header\"},[_c('h3',[_vm._v(\"添加好友\")]),_c('button',{staticClass:\"close-button\",on:{\"click\":function($event){return _vm.closeAddFriendOverlay()}}},[_c('svg',{attrs:{\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":_vm.clearIconPath}})])])]),_c('div',{staticClass:\"add-friend-search-container\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.addFriendSearchValue),expression:\"addFriendSearchValue\",modifiers:{\"trim\":true}}],staticClass:\"add-friend-search-input\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入完整邮箱号\"},domProps:{\"value\":(_vm.addFriendSearchValue)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.searchNewFriendsByEmail(_vm.addFriendSearchValue)},\"input\":function($event){if($event.target.composing)return;_vm.addFriendSearchValue=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('button',{attrs:{\"disabled\":_vm.remoteSearchLoading},on:{\"click\":function($event){return _vm.searchNewFriendsByEmail(_vm.addFriendSearchValue)}}},[_vm._v(\"搜索\")])]),_c('div',{staticClass:\"add-friend-results\"},[(_vm.remoteSearchLoading)?_c('p',{staticClass:\"loading-item\"},[_vm._v(\"搜索中...\")]):(_vm.remoteSearchError)?_c('p',{staticClass:\"error-message\"},[_vm._v(_vm._s(_vm.remoteSearchError))]):(_vm.addFriendSearchValue.length === 0 && _vm.searchedNewUser === null)?_c('p',{staticClass:\"empty-list\"},[_vm._v(\" 请输入邮箱进行搜索 \")]):(_vm.searchedNewUser === null)?_c('p',{staticClass:\"empty-list\"},[_vm._v(\"未找到该用户\")]):(_vm.searchedNewUser)?_c('div',{staticClass:\"add-friend-user-card\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.searchedNewUser.avatar,\"alt\":_vm.searchedNewUser.name + '头像'}}),_c('div',{staticClass:\"user-info\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.searchedNewUser.nickname || _vm.searchedNewUser.name))]),_c('span',{staticClass:\"email\"},[_vm._v(_vm._s(_vm.searchedNewUser.email))])]),_c('button',{staticClass:\"add-button-action\",on:{\"click\":function($event){return _vm.addNewFriend(_vm.searchedNewUser)}}},[_vm._v(\"添加\")])]):_vm._e()])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const svg_d = {\n    // 切换翻译\n    toggle_translate_svg: 'M860.842667 669.696l-146.346667 150.869333a42.026667 42.026667 0 0 1-59.861333 0.469334 42.666667 42.666667 0 0 1 0-60.330667l63.488-63.530667a8.533333 8.533333 0 0 0-6.058667-14.549333H213.333333a42.666667 42.666667 0 0 1 0-85.333333l519.338667 0.042666h97.536a42.666667 42.666667 0 0 1 30.634667 72.362667zM369.365333 202.965333a42.666667 42.666667 0 0 1 0 60.330667L305.877333 326.784A8.533333 8.533333 0 0 0 311.936 341.333333H810.666667a42.666667 42.666667 0 0 1 0 85.333334H188.202667a42.666667 42.666667 0 0 1-30.165334-72.832l150.997334-150.869334a42.666667 42.666667 0 0 1 60.330666 0z',\n    \n    // clear\n    clear_svg: 'M511.968 376.224 796.096 92.096C833.536 54.624 894.4 54.624 931.84 92.096 969.312 129.568 969.312 190.4 931.84 227.872L647.744 512 931.84 796.096C969.312 833.568 969.312 894.4 931.84 931.872 894.4 969.344 833.536 969.344 796.096 931.872L511.968 647.744 227.84 931.872C190.4 969.344 129.536 969.344 92.096 931.872 54.624 894.4 54.624 833.568 92.096 796.096L376.224 512 92.096 227.872C54.624 190.4 54.624 129.568 92.096 92.096 129.536 54.624 190.4 54.624 227.84 92.096L511.968 376.224Z',\n   \n    // translatePage search\n    translate_search_svg: 'M756.565333 697.258667c2.133333 1.493333 4.224 3.157333 6.101334 5.12l241.664 241.621333c16.256 16.256 16.512 43.52-0.128 60.16a42.453333 42.453333 0 0 1-60.202667 0.170667l-241.664-241.664a41.429333 41.429333 0 0 1-5.034667-6.101334A424.917333 424.917333 0 0 1 426.666667 853.333333C191.018667 853.333333 0 662.314667 0 426.666667S191.018667 0 426.666667 0s426.666667 191.018667 426.666666 426.666667c0 102.698667-36.266667 196.949333-96.768 270.592zM426.666667 768a341.333333 341.333333 0 1 0 0-682.666667 341.333333 341.333333 0 0 0 0 682.666667z',\n    \n    // home clearHistory d11\n    home_clearHistory_d11: 'M829.952 271.36h-126.976v-51.2a76.288 76.288 0 0 0-75.776-76.288h-256a76.288 76.288 0 0 0-75.776 76.8v51.2H168.448a25.6 25.6 0 0 0 0 51.2h661.504a25.6 25.6 0 0 0 0-51.712z m-178.176 0h-307.2v-51.2a26.112 26.112 0 0 1 25.6-25.6h256a24.576 24.576 0 0 1 24.576 25.6zM448.512 677.376V398.336a25.6 25.6 0 0 0-51.2 0v279.04a25.6 25.6 0 0 0 51.2 0zM601.088 677.376V398.336a25.6 25.6 0 0 0-51.2 0v279.04a25.6 25.6 0 0 0 51.2 0z',\n    // home clearHistory d22\n    home_clearHistory_d22: 'M735.744 346.624a25.6 25.6 0 0 0-25.6 25.6v381.44a102.4 102.4 0 0 1-102.4 102.4H390.656a102.4 102.4 0 0 1-102.4-102.4V372.224a25.6 25.6 0 0 0-51.2 0v381.44a153.6 153.6 0 0 0 153.6 153.6h217.6a153.6 153.6 0 0 0 153.6-153.6V372.224a25.6 25.6 0 0 0-26.112-25.6z',\n    \n    // login_eyes\n    // login_eyes_svg: 'M512 116.363636C265.309091 116.363636 55.854545 262.981818 0 507.345455v11.636363C55.854545 761.018182 265.309091 907.636364 512 907.636364s456.145455-146.618182 512-390.981819v-11.636363C968.145455 262.981818 758.690909 116.363636 512 116.363636z m0 744.727273c-223.418182 0-414.254545-130.327273-465.454545-349.090909C97.745455 293.236364 288.581818 162.909091 512 162.909091s414.254545 130.327273 465.454545 349.090909c-51.2 218.763636-242.036364 349.090909-465.454545 349.090909z m0-535.272727c-102.4 0-186.181818 83.781818-186.181818 186.181818s83.781818 186.181818 186.181818 186.181818 186.181818-83.781818 186.181818-186.181818-83.781818-186.181818-186.181818-186.181818z m0 325.818182c-76.8 0-139.636364-62.836364-139.636364-139.636364s62.836364-139.636364 139.636364-139.636364 139.636364 62.836364 139.636364 139.636364-62.836364 139.636364-139.636364 139.636364z',\n   \n    // 前进\n    forward_svg_d11: 'M256.045025 132.573411l61.349253-61.350277c8.94165-8.94165 23.146163-9.156544 31.787984-0.514723l419.291528 426.585655c8.640798 8.630564 8.405437 22.877033-0.493234 31.797194l-61.391209 61.372789c-3.551896 3.539616-8.001231 5.326309-12.536524 6.096858l-343.330486 356.806405c-8.535397 8.54563-22.63144 8.321526-31.444153-0.5137l-60.774155-60.750619c-8.834202-8.823969-9.05012-22.921036-0.49221-31.476899l337.298096-350.551958-339.77859-345.701486C246.890528 155.717528 247.103376 141.515061 256.045025 132.573411z',\n    \n    // setting ()\n    user_personal_info_d11: 'M490.666667 53.333333c-147.285333 0-266.666667 119.381333-266.666667 266.666667S343.381333 586.666667 490.666667 586.666667 757.333333 467.285333 757.333333 320 637.952 53.333333 490.666667 53.333333z m0 64a202.666667 202.666667 0 1 1 0 405.333334 202.666667 202.666667 0 0 1 0-405.333334z',\n    user_personal_info_d22: 'M492.544 522.666667c68.992 0 135.637333 16.682667 195.328 48.149333a32 32 0 1 1-29.845333 56.618667 353.664 353.664 0 0 0-165.482667-40.768C297.066667 586.666667 138.666667 744.298667 138.666667 938.666667a32 32 0 1 1-64 0c0-229.781333 187.136-416 417.877333-416zM896 704a32 32 0 0 1 3.072 63.850667L896 768H640a32 32 0 0 1-3.072-63.850667L640 704h256zM896 896a32 32 0 0 1 3.072 63.850667L896 960H640a32 32 0 0 1-3.072-63.850667L640 896h256z',\n    \n    // 退出登陆 ()\n    log_out_d11: 'M512 328c-100.8 0-184 83.2-184 184S411.2 696 512 696 696 612.8 696 512 612.8 328 512 328z m0 320c-75.2 0-136-60.8-136-136s60.8-136 136-136 136 60.8 136 136-60.8 136-136 136z',\n    log_out_d22: 'M857.6 572.8c-20.8-12.8-33.6-35.2-33.6-60.8s12.8-46.4 33.6-60.8c14.4-9.6 20.8-27.2 16-44.8-8-27.2-19.2-52.8-32-76.8-8-14.4-25.6-24-43.2-19.2-24 4.8-48-1.6-65.6-19.2-17.6-17.6-24-41.6-19.2-65.6 3.2-16-4.8-33.6-19.2-43.2-24-14.4-51.2-24-76.8-32-16-4.8-35.2 1.6-44.8 16-12.8 20.8-35.2 33.6-60.8 33.6s-46.4-12.8-60.8-33.6c-9.6-14.4-27.2-20.8-44.8-16-27.2 8-52.8 19.2-76.8 32-14.4 8-24 25.6-19.2 43.2 4.8 24-1.6 49.6-19.2 65.6-17.6 17.6-41.6 24-65.6 19.2-16-3.2-33.6 4.8-43.2 19.2-14.4 24-24 51.2-32 76.8-4.8 16 1.6 35.2 16 44.8 20.8 12.8 33.6 35.2 33.6 60.8s-12.8 46.4-33.6 60.8c-14.4 9.6-20.8 27.2-16 44.8 8 27.2 19.2 52.8 32 76.8 8 14.4 25.6 22.4 43.2 19.2 24-4.8 49.6 1.6 65.6 19.2 17.6 17.6 24 41.6 19.2 65.6-3.2 16 4.8 33.6 19.2 43.2 24 14.4 51.2 24 76.8 32 16 4.8 35.2-1.6 44.8-16 12.8-20.8 35.2-33.6 60.8-33.6s46.4 12.8 60.8 33.6c8 11.2 20.8 17.6 33.6 17.6 3.2 0 8 0 11.2-1.6 27.2-8 52.8-19.2 76.8-32 14.4-8 24-25.6 19.2-43.2-4.8-24 1.6-49.6 19.2-65.6 17.6-17.6 41.6-24 65.6-19.2 16 3.2 33.6-4.8 43.2-19.2 14.4-24 24-51.2 32-76.8 4.8-17.6-1.6-35.2-16-44.8z m-56 92.8c-38.4-6.4-76.8 6.4-104 33.6-27.2 27.2-40 65.6-33.6 104-17.6 9.6-36.8 17.6-56 24-22.4-30.4-57.6-49.6-97.6-49.6-38.4 0-73.6 17.6-97.6 49.6-19.2-6.4-38.4-14.4-56-24 6.4-38.4-6.4-76.8-33.6-104-27.2-27.2-65.6-40-104-33.6-9.6-17.6-17.6-36.8-24-56 30.4-22.4 49.6-57.6 49.6-97.6 0-38.4-17.6-73.6-49.6-97.6 6.4-19.2 14.4-38.4 24-56 38.4 6.4 76.8-6.4 104-33.6 27.2-27.2 40-65.6 33.6-104 17.6-9.6 36.8-17.6 56-24 22.4 30.4 57.6 49.6 97.6 49.6 38.4 0 73.6-17.6 97.6-49.6 19.2 6.4 38.4 14.4 56 24-6.4 38.4 6.4 76.8 33.6 104 27.2 27.2 65.6 40 104 33.6 9.6 17.6 17.6 36.8 24 56-30.4 22.4-49.6 57.6-49.6 97.6 0 38.4 17.6 73.6 49.6 97.6-6.4 19.2-14.4 38.4-24 56z',\n    \n    // 个人资料\n    personal_info_d11: 'M874.666667 900.693333H149.333333a117.546667 117.546667 0 0 1-117.333333-117.333333V234.666667A117.333333 117.333333 0 0 1 149.333333 117.333333h725.333334a117.333333 117.333333 0 0 1 117.333333 117.333334v548.693333a117.546667 117.546667 0 0 1-117.333333 117.333333zM149.333333 181.333333A53.546667 53.546667 0 0 0 95.786667 234.666667v548.693333A53.546667 53.546667 0 0 0 149.333333 836.693333h725.333334a53.333333 53.333333 0 0 0 53.333333-53.333333V234.666667A53.333333 53.333333 0 0 0 874.666667 181.333333z',\n    personal_info_d22: 'M462.293333 505.813333a129.92 129.92 0 1 0-192 0 227.84 227.84 0 0 0-132.053333 206.293334 32 32 0 0 0 64 0 164.053333 164.053333 0 0 1 327.893333 0 32 32 0 0 0 64 0 227.84 227.84 0 0 0-131.84-206.293334z m-161.706666-87.466666a65.92 65.92 0 1 1 65.92 65.92 65.92 65.92 0 0 1-65.92-65.92z',\n    personal_info_d33: 'M832 416.426667h-170.666667a32 32 0 0 1 0-64h170.666667a32 32 0 0 1 0 64z',\n    personal_info_d44: 'M832 554.666667h-170.666667a32 32 0 0 1 0-64h170.666667a32 32 0 0 1 0 64z',\n    personal_info_d55: 'M832 693.333333h-170.666667a32 32 0 1 1 0-64h170.666667a32 32 0 0 1 0 64z',\n    \n    // 修改密码\n    change_password_d11: 'M350.334 1024c-93.643 0-181.663-36.448-247.844-102.629-136.625-136.8-136.619-359.229 0-495.848 66.181-66.181 154.201-102.629 247.844-102.629 55.7 0 110.859 13.74 160.967 39.925L833.41 40.711c43.51-43.51 114.307-43.522 157.834-0.029l0 0c21.122 21.068 32.755 49.096 32.756 78.92 0 29.824-11.633 57.852-32.755 78.921l-76.494 76.493 76.522 76.522c43.522 43.523 43.522 114.34 0.001 157.863-21.093 21.092-49.125 32.707-78.933 32.707-29.809 0-57.841-11.615-78.932-32.706l-76.522-76.522-90.886 90.886c23.087 47.813 34.812 97.988 34.886 149.477 0.087 93.694-36.39 181.81-102.71 248.129C531.996 987.552 443.977 1024 350.334 1024zM350.334 386.894c-76.548 0-148.496 29.791-202.589 83.884C36.064 582.459 36.07 764.299 147.759 876.13 201.838 930.209 273.786 960 350.334 960s148.496-29.791 202.59-83.884c54.216-54.216 84.035-126.237 83.964-202.799-0.069-48.215-12.854-95.27-37.999-139.84l-11.942-21.167L756.888 342.37l121.777 121.777c9.003 9.003 20.963 13.961 33.677 13.961 12.713 0 24.674-4.958 33.678-13.962 18.568-18.569 18.568-48.784-0.001-67.354L824.241 275.017 946.02 153.24c9.025-9.003 13.98-20.939 13.98-33.637s-4.956-24.633-13.953-33.607l-0.028-0.029c-18.569-18.568-48.784-18.569-67.354 0L521.44 443.19l-21.533-13.272C454.243 401.771 402.521 386.894 350.334 386.894zM350.222 863.15c-51.316 0-100.555-19.785-135.109-54.293-74.568-74.759-74.555-196.187-0.015-270.726 36.087-36.088 84.115-55.962 135.236-55.962s99.148 19.874 135.236 55.962c36.138 36.138 56.041 84.194 56.041 135.315 0 51.218-19.913 99.284-56.071 135.345-34.612 34.521-83.898 54.334-135.22 54.358C350.288 863.15 350.254 863.15 350.222 863.15zM350.334 546.17c-34.026 0-65.981 13.217-89.981 37.216-49.618 49.618-49.605 130.47 0.029 180.23 47.844 47.78 131.96 47.736 179.963-0.139l0 0c24.031-23.967 37.265-55.94 37.265-90.03 0-34.026-13.245-66.011-37.295-90.062C416.316 559.387 384.36 546.17 350.334 546.17z',\n    \n    // userList\n    userList_search: 'M756.565333 697.258667c2.133333 1.493333 4.224 3.157333 6.101334 5.12l241.664 241.621333c16.256 16.256 16.512 43.52-0.128 60.16a42.453333 42.453333 0 0 1-60.202667 0.170667l-241.664-241.664a41.429333 41.429333 0 0 1-5.034667-6.101334A424.917333 424.917333 0 0 1 426.666667 853.333333C191.018667 853.333333 0 662.314667 0 426.666667S191.018667 0 426.666667 0s426.666667 191.018667 426.666666 426.666667c0 102.698667-36.266667 196.949333-96.768 270.592zM426.666667 768a341.333333 341.333333 0 1 0 0-682.666667 341.333333 341.333333 0 0 0 0 682.666667z',\n    userList_add: 'M853.333333 480H544V170.666667c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v309.333333H170.666667c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h309.333333V853.333333c0 17.066667 14.933333 32 32 32s32-14.933333 32-32V544H853.333333c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32z',\n    userList_clear: 'M1023.600998 91.107232 933.290773 0.797007 512 422.130673 90.709227 0.797007 0.399002 91.107232 421.732668 512.399002 0.399002 933.731671l90.310224 90.267332L512 602.709227l421.290773 421.290773 90.310224-90.267332L602.267332 512.399002 1023.600998 91.107232z',\n\n    // \n    // \n\n}\nexport default svg_d","<template>\n    <div class=\"list-header\">\n        <div class=\"search-container\">\n            <div class=\"search-input-wrapper\" :class=\"{ focus: isFocused }\">\n                <svg class=\"search-icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path :d=\"searchIconPath\"></path>\n                </svg>\n                <input\n                    type=\"text\"\n                    ref=\"searchInput\"\n                    v-model.trim=\"searchValue\"\n                    placeholder=\"搜索好友或邮箱添加\"\n                    class=\"actual-search-input\"\n                    @focus=\"handleFocus\"\n                    @blur=\"handleBlur\"\n                    @keyup.enter=\"handleSearchSubmit\"\n                />\n                <div v-if=\"searchValue.length > 0 && isFocused\" class=\"clear-box\"\n                    @mousedown.stop.prevent=\"clearSearchInput()\">\n                    <svg class=\"clear-icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path :d=\"clearIconPath\"></path>\n                    </svg>\n                </div>\n            </div>\n            <button class=\"add-button\" @click=\"openAddFriendOverlay()\">\n                <svg class=\"add-icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path :d=\"addIconPath\" />\n                </svg>\n            </button>\n        </div>\n\n        <div v-if=\"showSearchResultsOverlay\" class=\"search-results-overlay\">\n            <template v-if=\"filteredFriends.length > 0\">\n                <p class=\"search-results-category\">我的好友</p>\n                <ul class=\"search-results-list\">\n                    <li v-for=\"user in filteredFriends\" :key=\"user.user_id\"\n                        @click=\"selectUserFromSearch(user)\"\n                        class=\"search-user-item\"\n                        :class=\"{'highlighted': (filteredFriends.length > 0 && highlightFirstFriend)}\"\n                    >\n                        <img :src=\"user.avatar\" class=\"avatar\" :alt=\"user.name + '头像'\" />\n                        <div class=\"user-info\">\n                            <span class=\"name\">{{ user.nickname || user.name }}</span>\n                        </div>\n                    </li>\n                </ul>\n            </template>\n\n            <template v-if=\"isValidEmail && (remoteSearchLoading || searchedNewUser || remoteSearchError)\">\n                <p class=\"search-results-category\">查找新用户</p>\n                <ul class=\"search-results-list\">\n                    <li v-if=\"remoteSearchLoading\" class=\"loading-item search-item\">搜索中...</li>\n                    <li v-else-if=\"remoteSearchError\" class=\"empty-list search-item error-message\">{{ remoteSearchError }}</li>\n                    <li v-else-if=\"searchedNewUser\" class=\"search-user-item new-user-item\"\n                        :class=\"{'highlighted': highlightNewUserItem}\"\n                        @click=\"addNewFriend(searchedNewUser)\"\n                    >\n                        <img :src=\"searchedNewUser.avatar\" class=\"avatar\" :alt=\"searchedNewUser.name + '头像'\" />\n                        <div class=\"user-info\">\n                            <span class=\"name\">{{ searchedNewUser.nickname || searchedNewUser.name }}</span>\n                            <span class=\"email\">{{ searchedNewUser.email }}</span>\n                        </div>\n                        <button class=\"add-button-action\" @click.stop=\"addNewFriend(searchedNewUser)\">添加</button>\n                    </li>\n                    <li v-else-if=\"!searchedNewUser && !remoteSearchError\" class=\"empty-list search-item\">未找到该用户</li>\n                </ul>\n            </template>\n            <template v-else-if=\"!isValidEmail && searchValue.length > 0 && filteredFriends.length === 0\">\n                <p class=\"empty-list search-item\">未找到相关好友。请输入邮箱进行精确查找新用户。</p>\n            </template>\n        </div>\n\n        <div v-if=\"showAddFriendOverlay\" class=\"add-friend-overlay\">\n            <div class=\"add-friend-header\">\n                <h3>添加好友</h3>\n                <button class=\"close-button\" @click=\"closeAddFriendOverlay()\">\n                    <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path :d=\"clearIconPath\"></path>\n                    </svg>\n                </button>\n            </div>\n            <div class=\"add-friend-search-container\">\n                <input type=\"text\" v-model.trim=\"addFriendSearchValue\" placeholder=\"请输入完整邮箱号\" class=\"add-friend-search-input\"\n                    @keyup.enter=\"searchNewFriendsByEmail(addFriendSearchValue)\" />\n                <button @click=\"searchNewFriendsByEmail(addFriendSearchValue)\" :disabled=\"remoteSearchLoading\">搜索</button>\n            </div>\n\n            <div class=\"add-friend-results\">\n                <p v-if=\"remoteSearchLoading\" class=\"loading-item\">搜索中...</p>\n                <p v-else-if=\"remoteSearchError\" class=\"error-message\">{{ remoteSearchError }}</p>\n                <p v-else-if=\"addFriendSearchValue.length === 0 && searchedNewUser === null\" class=\"empty-list\">\n                    请输入邮箱进行搜索\n                </p>\n                <p v-else-if=\"searchedNewUser === null\" class=\"empty-list\">未找到该用户</p>\n                <div v-else-if=\"searchedNewUser\" class=\"add-friend-user-card\">\n                    <img :src=\"searchedNewUser.avatar\" class=\"avatar\"\n                        :alt=\"searchedNewUser.name + '头像'\" />\n                    <div class=\"user-info\">\n                        <span class=\"name\">{{ searchedNewUser.nickname || searchedNewUser.name }}</span>\n                        <span class=\"email\">{{ searchedNewUser.email }}</span>\n                    </div>\n                    <button class=\"add-button-action\" @click=\"addNewFriend(searchedNewUser)\">添加</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport svg from '@/assets/svg/svg';\n\nexport default {\n    name: 'UserListHeader',\n    emits: ['select-user', 'friend-added'],\n    props: {\n        friends: {\n            type: Array,\n            default: () => []\n        }\n    },\n    data() {\n        return {\n            searchValue: '',\n            isFocused: false,\n            searchIconPath: svg.userList_search,\n            clearIconPath: svg.userList_clear,\n            addIconPath: svg.userList_add,\n\n            showAddFriendOverlay: false,\n            addFriendSearchValue: '',\n\n            remoteSearchLoading: false,\n            searchedNewUser: null,\n            remoteSearchError: null,\n\n            highlightFirstFriend: false, // 控制本地好友搜索结果高亮\n            highlightNewUserItem: false // 控制远程搜索新用户结果高亮\n        };\n    },\n    computed: {\n        isValidEmail() {\n            return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(this.searchValue);\n        },\n        filteredFriends() {\n            if (!this.searchValue) {\n                return [];\n            }\n            const searchTerm = this.searchValue.toLowerCase();\n            return this.friends.filter(user => {\n                return (\n                    (user.email && user.email.toLowerCase().includes(searchTerm)) ||\n                    (user.name && user.name.toLowerCase().includes(searchTerm)) ||\n                    (user.nickname && user.nickname.toLowerCase().includes(searchTerm))\n                );\n            });\n        },\n        showSearchResultsOverlay() {\n            // 只有当搜索框有值，且聚焦时，或者有远程搜索结果时才显示\n            return (this.searchValue.length > 0 && this.isFocused) || this.searchedNewUser !== null || this.remoteSearchError !== null || this.filteredFriends.length > 0;\n        }\n    },\n    methods: {\n        handleFocus() {\n            this.isFocused = true;\n            this.highlightFirstFriend = this.filteredFriends.length > 0; // 聚焦时立即判断是否高亮第一个好友\n            this.highlightNewUserItem = this.searchedNewUser !== null && !this.remoteSearchLoading && !this.remoteSearchError; // 聚焦时判断是否高亮新用户\n        },\n        handleBlur() {\n            // 在 blur 事件中，我们不使用 setTimeout 来延迟 isFocused 的设置。\n            // 而是检查 relatedTarget，以确定焦点是否转移到搜索结果项。\n            // 如果焦点转移到了搜索结果项，我们就不关闭 overlay，也不重置 isFocused。\n            // 如果焦点转移到了其他非结果项的区域，我们才关闭 overlay 和重置 isFocused。\n\n            // console.log(\"Blur event fired. Related Target:\", event.relatedTarget);\n\n            // 使用 nextTick 确保 DOM 更新后进行检查\n            this.$nextTick(() => {\n                const resultsOverlay = this.$el.querySelector('.search-results-overlay');\n                if (resultsOverlay && resultsOverlay.contains(document.activeElement)) {\n                    // 如果焦点在 overlay 内部，则不进行处理，保持 isFocused 为 true\n                    return;\n                }\n                // 否则，认为焦点已经离开了搜索区域\n                this.isFocused = false;\n                if (!this.searchValue && !this.searchedNewUser && !this.remoteSearchError) {\n                    this.resetRemoteSearchState();\n                }\n                this.highlightFirstFriend = false; // 失去焦点时，取消高亮\n                this.highlightNewUserItem = false; // 失去焦点时，取消高亮\n            });\n        },\n        clearSearchInput() {\n            this.searchValue = '';\n            this.resetRemoteSearchState();\n            this.highlightFirstFriend = false;\n            this.highlightNewUserItem = false;\n            this.$nextTick(() => {\n                if (this.$refs.searchInput) {\n                    this.$refs.searchInput.focus();\n                }\n            });\n        },\n        handleSearchSubmit() {\n            // 优先处理已添加好友的搜索结果\n            if (this.filteredFriends.length > 0) {\n                this.selectUserFromSearch(this.filteredFriends[0]);\n            }\n            // 如果没有已添加好友的结果，且是有效邮箱，尝试远程搜索\n            else if (this.isValidEmail) {\n                this.searchNewFriendsByEmail(this.searchValue);\n                // 如果远程搜索成功并且找到了新用户，回车就相当于点击添加按钮\n                if (this.searchedNewUser && !this.remoteSearchLoading && !this.remoteSearchError) {\n                    this.addNewFriend(this.searchedNewUser);\n                }\n            }\n            // 如果既没有本地好友结果，也不是有效邮箱，且有远程搜索结果（说明之前已经搜索到），则尝试添加该远程用户\n            else if (this.searchedNewUser && !this.remoteSearchLoading && !this.remoteSearchError) {\n                this.addNewFriend(this.searchedNewUser);\n            }\n            // 否则，不执行任何操作或可以给出提示\n            else {\n                console.log('UserListHeader: Enter pressed, but no valid action to perform.');\n            }\n        },\n\n        selectUserFromSearch(user) {\n            this.$emit('select-user', user);\n            this.searchValue = '';\n            this.isFocused = false; // 立即设置为 false\n            this.resetRemoteSearchState();\n            this.highlightFirstFriend = false; // 选中后立即重置高亮\n            this.highlightNewUserItem = false; // 选中后立即重置高亮\n        },\n\n        openAddFriendOverlay() {\n            this.showAddFriendOverlay = true;\n            this.addFriendSearchValue = '';\n            this.resetRemoteSearchState();\n        },\n        closeAddFriendOverlay() {\n            this.showAddFriendOverlay = false;\n            this.addFriendSearchValue = '';\n            this.resetRemoteSearchState();\n        },\n\n        searchNewFriendsByEmail(emailToSearch) {\n            const email = emailToSearch.trim();\n            this.highlightFirstFriend = false; // 搜索时重置高亮\n            this.highlightNewUserItem = false; // 搜索时重置新用户高亮\n\n            if (!email) {\n                this.remoteSearchError = '请输入完整的邮箱号';\n                this.searchedNewUser = null;\n                return;\n            }\n\n            if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\n                this.remoteSearchError = '邮箱格式不正确';\n                this.searchedNewUser = null;\n                return;\n            }\n\n            // 检查是否已经在friends列表中，如果是，则不进行远程搜索并给出提示\n            const isFriend = this.friends.some(friend => friend.email && friend.email.toLowerCase() === email.toLowerCase());\n            if (isFriend) {\n                this.remoteSearchError = '该用户已经是您的好友';\n                this.searchedNewUser = null;\n                return;\n            }\n\n            this.remoteSearchLoading = true;\n            this.remoteSearchError = null;\n            this.searchedNewUser = null;\n\n            this.$axios.get(`/user/search-by-email`, {\n                params: { email: email },\n                withCredentials: true\n            })\n            .then(response => {\n                if (response.data.success && response.data.user) {\n                    this.searchedNewUser = response.data.user;\n                    // 如果成功搜索到新用户，且当前聚焦，高亮新用户项\n                    if (this.isFocused) {\n                        this.highlightNewUserItem = true;\n                    }\n                } else {\n                    this.remoteSearchError = response.data.message || '未找到该用户';\n                    this.searchedNewUser = null;\n                }\n            })\n            .catch(error => {\n                console.error('UserListHeader: Remote search failed:', error);\n                this.remoteSearchError = '搜索失败，请检查网络或稍后重试';\n                this.searchedNewUser = null;\n            })\n            .finally(() => {\n                this.remoteSearchLoading = false;\n            });\n        },\n\n        addNewFriend(user) {\n            this.$axios.post('/user/add-friend', { target_user_id: user.user_id }, { withCredentials: true })\n                .then(response => {\n                    if (response.data.success) {\n                        alert(`已向 ${user.nickname || user.name} 发送好友请求！`);\n                        this.$emit('friend-added');\n                        this.closeAddFriendOverlay();\n                        this.searchValue = '';\n                        this.isFocused = false; // 立即设置为 false\n                        this.resetRemoteSearchState();\n                        this.highlightFirstFriend = false; // 立即重置高亮\n                        this.highlightNewUserItem = false; // 立即重置高亮\n                    } else {\n                        alert(`添加好友失败: ${response.data.message || '未知错误'}`);\n                    }\n                })\n                .catch(error => {\n                    console.error('UserListHeader: Add friend request failed:', error);\n                    alert('添加好友请求失败，请稍后重试。');\n                });\n        },\n        resetRemoteSearchState() {\n            this.searchedNewUser = null;\n            this.remoteSearchError = null;\n            this.remoteSearchLoading = false;\n        }\n    },\n    watch: {\n        searchValue(newValue, oldValue) {\n            if (this.isFocused) { // 只在聚焦时才响应 searchValue 变化\n                if (this.isValidEmail) {\n                     this.searchNewFriendsByEmail(newValue);\n                } else if (!newValue) {\n                    this.resetRemoteSearchState();\n                }\n                // 当搜索值变化时，如果存在 filteredFriends，则高亮第一个\n                this.highlightFirstFriend = this.filteredFriends.length > 0;\n            } else if (!newValue) {\n                 // 如果 searchValue 清空，且不再聚焦，则重置远程搜索状态\n                this.resetRemoteSearchState();\n            }\n            // 确保当搜索框失去焦点时，高亮状态被清除\n            if (!this.isFocused) {\n                this.highlightFirstFriend = false;\n                this.highlightNewUserItem = false;\n            }\n        },\n        filteredFriends: {\n            handler(newVal) {\n                // 当 filteredFriends 变化时，如果当前是聚焦状态，更新 highlightFirstFriend\n                if (this.isFocused) {\n                    this.highlightFirstFriend = newVal.length > 0;\n                }\n            },\n            deep: true\n        },\n        searchedNewUser: {\n            handler(newVal) {\n                // 当 searchedNewUser 变化时，如果当前是聚焦状态，更新 highlightNewUserItem\n                if (this.isFocused) {\n                    this.highlightNewUserItem = newVal !== null && !this.remoteSearchLoading && !this.remoteSearchError;\n                }\n            }\n        },\n        isFocused(newVal) {\n            if (!newVal) {\n                // 当失去焦点时，清除所有高亮\n                this.highlightFirstFriend = false;\n                this.highlightNewUserItem = false;\n                // 如果搜索框没有内容，并且没有远程搜索结果，才重置远程搜索状态\n                if (!this.searchValue && !this.searchedNewUser && !this.remoteSearchError) {\n                    this.resetRemoteSearchState();\n                }\n            } else {\n                // 获得焦点时，根据当前数据判断是否高亮\n                this.highlightFirstFriend = this.filteredFriends.length > 0;\n                this.highlightNewUserItem = this.searchedNewUser !== null && !this.remoteSearchLoading && !this.remoteSearchError;\n            }\n        }\n    }\n};\n</script>\n\n<style scoped lang=\"less\">\n@chat-header-userList-headwe: 60px;\n@255_255_255: #FFFFFF;\n@dodgerblue: #1E90FF;\n@245_245_245: #F5F5F5;\n\n.list-header {\n    width: 100%;\n    height: @chat-header-userList-headwe;\n    border-bottom: 1px solid #dee2e6;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 12px 10px !important;\n    position: relative;\n    z-index: 10;\n}\n\n.search-container {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    height: 100%;\n    background-color: transparent;\n    gap: 10px;\n    flex-shrink: 0;\n}\n\n.search-input-wrapper {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    background-color: rgb(245, 245, 245);\n    border-radius: 8px;\n    height: 100%;\n    padding: 0 8px 0px 12px;\n    transition: border-color 0.2s ease;\n    border: 1px solid transparent;\n}\n\n.search-input-wrapper.focus {\n    border-color: @dodgerblue;\n    color: black;\n}\n\n.search-icon {\n    width: 18px;\n    height: 18px;\n    color: #999;\n    margin-right: 8px;\n    fill: rgb(160, 160, 160);\n}\n\n.clear-box {\n    height: 100%;\n    width: 31px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    flex-shrink: 0;\n}\n\n.clear-icon {\n    width: 12px;\n    height: 12px;\n    color: #999;\n    margin-right: 8px;\n    fill: rgb(160, 160, 160);\n}\n\n.actual-search-input {\n    width: 100%;\n    border: none;\n    outline: none;\n    background-color: transparent;\n    font-size: 13px;\n    color: rgb(160, 160, 160);\n\n    &::placeholder {\n        color: rgb(160, 160, 160);\n    }\n}\n\n.actual-search-input:focus {\n    color: black;\n}\n\n.add-button {\n    aspect-ratio: 1/1;\n    height: 100%;\n    background-color: rgb(245, 245, 245);\n    border-radius: 8px;\n    border: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    flex-shrink: 0;\n    padding: 0;\n    transition: background-color 0.2s ease;\n}\n.add-button:hover {\n    background-color: darken(rgb(245, 245, 245), 5%);\n}\n\n.add-icon {\n    fill: rgb(160, 160, 160);\n    width: 20px;\n    height: 20px;\n    color: rgb(160, 160, 160);\n}\n\n/* 搜索结果覆盖层样式 */\n.search-results-overlay {\n    position: absolute;\n    top: @chat-header-userList-headwe;\n    left: 50%;\n    transform: translateX(-50%);\n    width: calc(100% - 20px);\n    background-color: @255_255_255;\n    border-radius: 8px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    z-index: 100;\n    overflow: hidden;\n    max-height: calc(100vh - @chat-header-userList-headwe - 20px);\n    display: flex;\n    flex-direction: column;\n}\n\n.search-results-category {\n    padding: 10px 15px;\n    font-size: 13px;\n    color: #999;\n    background-color: #f0f0f0;\n    border-bottom: 1px solid #eee;\n    margin: 0;\n}\n\n.search-results-list {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    overflow-y: auto;\n    flex-grow: 1;\n    background-color: white;\n}\n\n.search-results-list .search-user-item {\n    display: flex;\n    align-items: center;\n    padding: 10px 15px;\n    cursor: pointer;\n    border-bottom: 1px solid #eee;\n    transition: background-color 0.2s ease; \n    background-color: transparent;\n}\n\n.search-results-list .search-user-item:hover {\n     background-color: rgb(240, 240, 240);\n    // background-color: orange; /* 失去焦点时鼠标悬停的背景颜色 */\n}\n\n// 新增：高亮样式\n.search-results-list .search-user-item.highlighted {\n    background-color: lighten(@dodgerblue, 45%);\n}\n\n.search-results-list .search-user-item.highlighted:hover {\n    background-color: lighten(@dodgerblue, 40%);\n    // background-color: peru; /* 获得焦点时鼠标悬停的背景颜色 */\n}\n\n.search-results-list .avatar {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    margin-right: 10px;\n    object-fit: cover;\n}\n\n.search-results-list .user-info {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    flex-grow: 1;\n    overflow: hidden;\n}\n\n.search-results-list .name {\n    font-size: 16px;\n    color: #333;\n    font-weight: normal;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n.search-results-list .email {\n    font-size: 13px;\n    color: #666;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n\n.loading-item,\n.empty-list {\n    padding: 20px;\n    text-align: center;\n    color: #888;\n}\n.error-message {\n    color: red;\n}\n\n/* 添加好友弹窗样式 - 与主搜索结果层区分 */\n.add-friend-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.6);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-start;\n    z-index: 1000;\n    padding-top: 50px;\n}\n\n.add-friend-header {\n    width: 90%;\n    max-width: 500px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    background-color: white;\n    padding: 15px 20px;\n    border-top-left-radius: 12px;\n    border-top-right-radius: 12px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.add-friend-header h3 {\n    margin: 0;\n    color: #333;\n    font-size: 18px;\n}\n\n.add-friend-header .close-button {\n    background: none;\n    border: none;\n    cursor: pointer;\n    padding: 5px;\n}\n\n.add-friend-header .close-button svg {\n    width: 20px;\n    height: 20px;\n    fill: #666;\n}\n\n.add-friend-search-container {\n    width: 90%;\n    max-width: 500px;\n    display: flex;\n    gap: 10px;\n    padding: 15px 20px;\n    background-color: white;\n    border-bottom: 1px solid #eee;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.add-friend-search-input {\n    flex-grow: 1;\n    padding: 10px 15px;\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    font-size: 15px;\n    outline: none;\n    transition: border-color 0.2s ease;\n}\n\n.add-friend-search-input:focus {\n    border-color: @dodgerblue;\n}\n\n.add-friend-search-container button {\n    padding: 10px 20px;\n    background-color: @dodgerblue;\n    color: white;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: background-color 0.2s ease;\n}\n\n.add-friend-search-container button:hover:not(:disabled) {\n    background-color: darken(@dodgerblue, 10%);\n}\n\n.add-friend-search-container button:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n}\n\n.add-friend-results {\n    width: 90%;\n    max-width: 500px;\n    background-color: white;\n    border-bottom-left-radius: 12px;\n    border-bottom-right-radius: 12px;\n    padding: 20px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    text-align: center;\n    color: #888;\n    min-height: 100px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n}\n\n.add-friend-user-card {\n    display: flex;\n    align-items: center;\n    width: 100%;\n    padding: 15px;\n    border: 1px solid #eee;\n    border-radius: 8px;\n    background-color: #f9f9f9;\n    margin-bottom: 10px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\n}\n\n.add-friend-user-card .avatar {\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n    margin-right: 15px;\n    object-fit: cover;\n}\n\n.add-friend-user-card .user-info {\n    flex-grow: 1;\n    text-align: left;\n}\n\n.add-friend-user-card .user-info .name {\n    font-size: 18px;\n    font-weight: bold;\n    color: #333;\n}\n\n.add-friend-user-card .user-info .email {\n    font-size: 14px;\n    color: #666;\n    margin-left: 10px;\n}\n\n.add-friend-user-card .add-button-action {\n    padding: 8px 15px;\n    background-color: @dodgerblue;\n    color: white;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    font-size: 14px;\n    transition: background-color 0.2s ease;\n}\n\n.add-friend-user-card .add-button-action:hover {\n    background-color: darken(@dodgerblue, 10%);\n}\n\n.add-friend-results .error-message {\n    color: red;\n    font-weight: bold;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserListHeader.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserListHeader.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserListHeader.vue?vue&type=template&id=4b0be23d&scoped=true\"\nimport script from \"./UserListHeader.vue?vue&type=script&lang=js\"\nexport * from \"./UserListHeader.vue?vue&type=script&lang=js\"\nimport style0 from \"./UserListHeader.vue?vue&type=style&index=0&id=4b0be23d&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b0be23d\",\n  null\n  \n)\n\nexport default component.exports","<!-- 在组件创建时调用后端 API 获取好友列表，并修改 selectUser 方法来通知父组件。 -->\n\n<template>\n    <div class=\"user-list-wrapper\">\n        <ul class=\"UserList_container\">\n            <UserListHeader :friends=\"users\" :currentUser=\"currentUser\" @select-user=\"selectUser\"\n                @friend-added=\"handleFriendAdded\" />\n\n            <div class=\"user-list\">\n                <li v-if=\"loading\" class=\"loading-item default-item\">加载好友中...</li>\n                <li v-else-if=\"users.length === 0\" class=\"empty-list default-item\">暂无好友</li>\n\n                <li v-for=\"user in users\" :key=\"user.user_id\" @click=\"selectUser(user)\"\n                    :class=\"{ active: currentUser && currentUser.user_id === user.user_id, 'default-user-item': true }\">\n                    <img :src=\"user.avatar\" class=\"avatar\" :alt=\"user.name + '头像'\" />\n                    <span class=\"name\">{{ user.nickname || user.name }}</span>\n                </li>\n            </div>\n        </ul>\n    </div>\n</template>\n\n\n\n<!-- 1 -->\n<script>\nimport UserListHeader from '@/components/UserListHeader.vue';\nimport { mapGetters } from 'vuex'; // 从 Vuex 中导入 mapGetters，用于获取全局状态（当前用户 ID）\n\nexport default {\n    name: 'UserList',\n    components: {\n        UserListHeader, // 引入并注册头部组件\n    },\n    props: {\n        // 父组件传入的当前选中聊天用户\n        currentUser: {\n            type: Object,\n            default: null\n        }\n    },\n    data() {\n        return {\n            users: [], // 好友列表\n            loading: false, // 是否正在加载\n            error: null, // 错误信息\n            currentSelectedUser: null, // 当前选中的用户（本组件内部用于高亮）\n        };\n    },\n    computed: {\n        ...mapGetters(['currentUserCustomId']), // 从 Vuex 中获取当前登录用户的 user_id\n    },\n    watch: {\n        // 监听父组件传入的 currentUser\n        currentUser: {\n            immediate: true, // 组件初始化时立即执行一次\n            handler(newVal, oldVal) {\n                if (newVal && (!this.currentSelectedUser || newVal.user_id !== this.currentSelectedUser.user_id)) {\n                    this.currentSelectedUser = newVal; // 同步更新内部选中状态\n                } else if (!newVal && this.currentSelectedUser) {\n                    this.currentSelectedUser = null; // 如果传入 null，清除选中\n                }\n            }\n        },\n        // 监听 users 列表变化\n        users: {\n            immediate: true, // 初始执行\n            handler(newUsers, oldUsers) {\n                if (newUsers.length > 0 && (newUsers.length !== oldUsers.length || JSON.stringify(newUsers) !== JSON.stringify(oldUsers))) {\n                    this.ensureUserSelected(); // 确保有一个用户被选中\n                } else if (newUsers.length === 0 && this.currentSelectedUser) {\n                    this.currentSelectedUser = null; // 清除选中\n                }\n            }\n        }\n    },\n    methods: {\n        // 获取头像完整 URL\n        getAvatarUrl(relativePath) {\n            if (!relativePath) {\n                return 'http://localhost:3081/public/default_user-avator/default.webp'; // 默认头像\n            }\n            if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {\n                return relativePath; // 已是完整链接\n            }\n            const baseUrl = 'http://localhost:3081';\n            return `${baseUrl}${relativePath.startsWith('/') ? '' : '/'}${relativePath}`;\n        },\n\n        // 从后端获取好友列表\n        fetchFriends() {\n            this.loading = true;\n            this.error = null;\n            this.$axios.get('/user/friends', { withCredentials: true })\n                .then(response => {\n                    if (response.data.success && Array.isArray(response.data.friends)) {\n                        // 过滤掉当前登录用户（防止自己出现在好友列表中）\n                        this.users = response.data.friends.filter(friend => friend.user_id !== this.currentUserCustomId);\n                    } else {\n                        this.error = response.data.message || '获取好友列表失败';\n                    }\n                })\n                .catch(error => {\n                    this.error = '网络错误或服务器异常';\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n\n        // 点击选择用户\n        selectUser(user) {\n            if (!user || (this.currentSelectedUser && this.currentSelectedUser.user_id === user.user_id)) return;\n            this.currentSelectedUser = user;\n            this.$emit('select-user', user); // 向父组件发送选中事件\n        },\n\n        // 保证一定有用户被选中（3级优先）\n        ensureUserSelected() {\n            // 优先 1：父组件传入的 currentUser\n            if (this.currentUser && this.users.length > 0) {\n                const matched = this.users.find(u => u.user_id === this.currentUser.user_id);\n                if (matched) {\n                    this.selectUser(matched);\n                    return;\n                }\n            }\n\n            // 优先 2：从 localStorage 恢复\n            const lastSelectedUserId = localStorage.getItem('lastSelectedChatUser');\n            if (lastSelectedUserId) {\n                const matched = this.users.find(user => user.user_id === lastSelectedUserId);\n                if (matched) {\n                    this.selectUser(matched);\n                    return;\n                } else {\n                    localStorage.removeItem('lastSelectedChatUser'); // 无效则清除\n                }\n            }\n\n            // 优先 3：默认选择第一个用户\n            if (!this.currentSelectedUser && this.users.length > 0) {\n                this.selectUser(this.users[0]);\n            } else if (this.users.length === 0) {\n                this.selectUser(null);\n            }\n        },\n\n        // 处理好友添加后刷新列表\n        handleFriendAdded() {\n            this.fetchFriends(); // 重新加载好友\n        },\n    },\n    created() {\n        this.fetchFriends(); // 初始化加载好友列表\n    },\n};\n</script>\n\n\n\n<style scoped lang=\"less\">\n/*\n  请确保以下 Less 变量在你的项目中是可用的。\n  如果它们是通过 vue.config.js 全局注入的，则无需在此处重复定义。\n  否则，你需要在 src/assets/styles/variables.less （或其他你定义的路径）中定义它们，\n  并在此处通过 @import 引入。\n*/\n@chat-header-userList-headwe: 60px;\n/* 示例值，请替换为你的实际值 */\n@255_255_255: #FFFFFF;\n@dodgerblue: #1E90FF;\n@245_245_245: #F5F5F5;\n\n.user-list-wrapper {\n    position: relative;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n\n.UserList_container {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    width: 100%;\n    background-color: @255_255_255;\n    height: 100%;\n    overflow-y: auto;\n    /* 允许整个用户列表容器滚动 */\n    display: flex;\n    flex-direction: column;\n}\n\n.UserList_container::-webkit-scrollbar {\n    width: 0;\n    /* Hide scrollbar for Webkit browsers */\n}\n\n.user-list {\n    flex-grow: 1;\n    overflow-y: auto;\n    width: 100%;\n    height: calc(100% - @chat-header-userList-headwe);\n    /* 减去 UserListHeader 的高度 */\n}\n\n.user-list::-webkit-scrollbar {\n    width: 0;\n}\n\n\n.user-list .default-user-item {\n    display: flex;\n    align-items: center;\n    padding: 10px 15px;\n    cursor: pointer;\n    border-bottom: 1px solid #eee;\n    transition: background-color 0.2s ease;\n    background-color: white;\n}\n\n.user-list .default-user-item:hover:not(.active) {\n    background-color: @245_245_245;\n}\n\n.user-list .default-user-item.active {\n    background-color: @dodgerblue;\n}\n\n.user-list .default-user-item.active .name {\n    color: white;\n}\n\n.user-list .avatar {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    margin-right: 10px;\n    object-fit: cover;\n}\n\n.user-list .name {\n    font-size: 16px;\n    color: #333;\n}\n\n.loading-item,\n.empty-list {\n    padding: 20px;\n    text-align: center;\n    color: #888;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserList.vue?vue&type=template&id=6ce9bb40&scoped=true\"\nimport script from \"./UserList.vue?vue&type=script&lang=js\"\nexport * from \"./UserList.vue?vue&type=script&lang=js\"\nimport style0 from \"./UserList.vue?vue&type=style&index=0&id=6ce9bb40&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ce9bb40\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"ChatArea_container\",on:{\"dragover\":function($event){$event.preventDefault();},\"drop\":_vm.handleDrop,\"dragleave\":_vm.handleDragLeave,\"dragenter\":_vm.handleDragEnter}},[(_vm.isDraggingOver)?_c('div',{staticClass:\"drag-overlay\"},[_c('p',[_vm._v(\"松开鼠标以上传图片\")])]):_vm._e(),(_vm.user)?_c('div',{staticClass:\"chat-header\"},[_vm._v(\" 与 \"+_vm._s(_vm.user.name)+\" 的聊天 \")]):_vm._e(),(_vm.user)?_c('div',{staticClass:\"chat-messages\"},[(_vm.messages.length === 0)?_c('div',{staticClass:\"no-messages\"},[_vm._v(\"暂无消息，开始聊天吧！\")]):_vm._e(),_vm._l((_vm.messages),function(msg){return _c('div',{key:msg.dbId ? 'db_' + msg.dbId : 'optimistic_' + msg.id,class:['message-item', msg.senderId === _vm.currentLoginUser.user_id ? 'sent' : 'received']},[(msg.senderId !== _vm.currentLoginUser.user_id)?_c('div',{staticClass:\"avatar-wrapper\"},[_c('img',{staticClass:\"message-avatar\",attrs:{\"src\":_vm.getAvatarUrl(_vm.user.avatar),\"alt\":\"对方头像\"}})]):_vm._e(),_c('div',{staticClass:\"message-bubble\"},[_c('div',{staticClass:\"sender-name\"},[_vm._v(\" \"+_vm._s(msg.senderId === _vm.currentLoginUser.user_id ? (_vm.currentLoginUser.nickname || _vm.currentLoginUser.username) : _vm.user.name)+\" \")]),(_vm.isImageMessage(msg.text))?_c('div',{staticClass:\"message-content\"},[_c('img',{staticClass:\"chat-image\",attrs:{\"src\":_vm.getImageUrl(msg.text),\"alt\":\"聊天图片\"},on:{\"error\":function($event){return _vm.handleImageError(msg)},\"dblclick\":function($event){_vm.showFullscreen(_vm.getImageUrl(msg.text))}}}),(msg.imageLoadError)?_c('p',{staticClass:\"image-error-text\"},[_vm._v(\"图片加载失败或已移除\")]):_vm._e()]):_c('div',{staticClass:\"message-content\"},[_vm._v(\" \"+_vm._s(msg.text)+\" \")])]),(msg.senderId === _vm.currentLoginUser.user_id)?_c('div',{staticClass:\"avatar-wrapper\"},[_c('img',{staticClass:\"message-avatar\",attrs:{\"src\":_vm.getAvatarUrl(_vm.currentLoginUser.avatar),\"alt\":\"我的头像\"}})]):_vm._e()])})],2):_vm._e(),_c('div',{staticClass:\"resize-handle\",on:{\"mousedown\":_vm.startResize}}),(_vm.isFullscreen)?_c('div',{staticClass:\"fullscreen-overlay\",on:{\"click\":_vm.closeFullscreen}},[_c('button',{staticClass:\"close-fullscreen-button\",on:{\"click\":function($event){$event.stopPropagation();return _vm.closeFullscreen.apply(null, arguments)}}},[_vm._v(\"×\")]),_c('img',{staticClass:\"fullscreen-image\",attrs:{\"src\":_vm.fullscreenImageUrl,\"alt\":\"全屏图片\"},on:{\"click\":function($event){$event.stopPropagation();}}})]):_vm._e(),(_vm.user)?_c('div',{staticClass:\"chat-input\",style:({ height: _vm.chatInputHeight + 'px' })},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newMessage),expression:\"newMessage\"}],ref:\"messageTextarea\",staticClass:\"message-textarea\",style:(_vm.textareaStyle),attrs:{\"placeholder\":\"输入消息... (回车发送，Shift+回车 换行)\"},domProps:{\"value\":(_vm.newMessage)},on:{\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey)return null;$event.preventDefault();return _vm.sendMessage.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;if(!$event.shiftKey)return null;if($event.ctrlKey||$event.altKey||$event.metaKey)return null;$event.preventDefault();return _vm.insertNewline.apply(null, arguments)}],\"paste\":_vm.handlePaste,\"input\":function($event){if($event.target.composing)return;_vm.newMessage=$event.target.value}}}),(_vm.imagePreviews.length > 0)?_c('div',{staticClass:\"image-previews\"},_vm._l((_vm.imagePreviews),function(preview,index){return _c('div',{key:index,staticClass:\"image-preview-item\"},[_c('img',{staticClass:\"uploaded-image-thumbnail\",attrs:{\"src\":preview.src,\"alt\":preview.name}}),_c('span',{staticClass:\"remove-preview\",on:{\"click\":function($event){return _vm.removeImagePreview(index)}}},[_vm._v(\"×\")]),(preview.uploading)?_c('div',{staticClass:\"upload-progress\"},[_vm._v(\"上传中...\")]):_vm._e(),(preview.error)?_c('div',{staticClass:\"upload-error\"},[_vm._v(\"上传失败!\")]):_vm._e()])}),0):_vm._e()]):_c('div',{staticClass:\"empty-chat\"},[_vm._v(\"请点击左侧用户开始聊天\")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"ChatArea_container\" @dragover.prevent @drop=\"handleDrop\" @dragleave=\"handleDragLeave\"\n        @dragenter=\"handleDragEnter\">\n\n        <div v-if=\"isDraggingOver\" class=\"drag-overlay\">\n            <p>松开鼠标以上传图片</p>\n        </div>\n\n        <div class=\"chat-header\" v-if=\"user\">\n            与 {{ user.name }} 的聊天\n        </div>\n\n\n        <div class=\"chat-messages\" v-if=\"user\">\n            <div v-if=\"messages.length === 0\" class=\"no-messages\">暂无消息，开始聊天吧！</div>\n            <div v-for=\"msg in messages\" :key=\"msg.dbId ? 'db_' + msg.dbId : 'optimistic_' + msg.id\"\n                :class=\"['message-item', msg.senderId === currentLoginUser.user_id ? 'sent' : 'received']\">\n\n                <div v-if=\"msg.senderId !== currentLoginUser.user_id\" class=\"avatar-wrapper\">\n                    <img :src=\"getAvatarUrl(user.avatar)\" alt=\"对方头像\" class=\"message-avatar\" />\n                </div>\n\n                <div class=\"message-bubble\">\n                    <div class=\"sender-name\">\n                        {{ msg.senderId === currentLoginUser.user_id ? (currentLoginUser.nickname ||\n                            currentLoginUser.username) : user.name }}\n                    </div>\n\n                    <div class=\"message-content\" v-if=\"isImageMessage(msg.text)\">\n                        <img :src=\"getImageUrl(msg.text)\" alt=\"聊天图片\" class=\"chat-image\" @error=\"handleImageError(msg)\"\n                            @dblclick=\"showFullscreen(getImageUrl(msg.text))\" />\n                        <p v-if=\"msg.imageLoadError\" class=\"image-error-text\">图片加载失败或已移除</p>\n                    </div>\n                    <div class=\"message-content\" v-else>\n                        {{ msg.text }}\n                    </div>\n                </div>\n\n                <div v-if=\"msg.senderId === currentLoginUser.user_id\" class=\"avatar-wrapper\">\n                    <img :src=\"getAvatarUrl(currentLoginUser.avatar)\" alt=\"我的头像\" class=\"message-avatar\" />\n                </div>\n            </div>\n        </div>\n\n        <div class=\"resize-handle\" @mousedown=\"startResize\"></div>\n\n\n        <div v-if=\"isFullscreen\" class=\"fullscreen-overlay\" @click=\"closeFullscreen\">\n            <button class=\"close-fullscreen-button\" @click.stop=\"closeFullscreen\">&times;</button>\n            <img :src=\"fullscreenImageUrl\" alt=\"全屏图片\" class=\"fullscreen-image\" @click.stop />\n        </div>\n\n        <div class=\"chat-input\" v-if=\"user\" :style=\"{ height: chatInputHeight + 'px' }\">\n            <textarea v-model=\"newMessage\" @keydown.enter.exact.prevent=\"sendMessage\"\n                @keydown.enter.shift.exact.prevent=\"insertNewline\" placeholder=\"输入消息... (回车发送，Shift+回车 换行)\"\n                class=\"message-textarea\" ref=\"messageTextarea\" @paste=\"handlePaste\" :style=\"textareaStyle\"></textarea>\n            <div v-if=\"imagePreviews.length > 0\" class=\"image-previews\">\n                <div v-for=\"(preview, index) in imagePreviews\" :key=\"index\" class=\"image-preview-item\">\n                    <img :src=\"preview.src\" :alt=\"preview.name\" class=\"uploaded-image-thumbnail\" />\n                    <span class=\"remove-preview\" @click=\"removeImagePreview(index)\">&times;</span>\n                    <div v-if=\"preview.uploading\" class=\"upload-progress\">上传中...</div>\n                    <div v-if=\"preview.error\" class=\"upload-error\">上传失败!</div>\n                </div>\n            </div>\n        </div>\n\n        <div v-else class=\"empty-chat\">请点击左侧用户开始聊天</div>\n    </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport io from 'socket.io-client';\n\nexport default {\n    name: 'ChatArea',\n    props: ['user'],\n    data() {\n        return {\n            messages: [],\n            newMessage: '',\n            socket: null,\n            imagePreviews: [], // 用于存储图片预览信息\n            // 拖动调整大小相关\n            isResizing: false,\n            chatInputHeight: 190, // chat-input 的初始高度\n            startY: 0, // 鼠标按下时的Y坐标\n            startHeight: 0, // 鼠标按下时 chat-input 的高度\n            isDraggingOver: false, // 新增：指示是否有文件拖动到容器上方\n            dragLeaveTimeout: null, // 新增：用于存储 setTimeout ID\n            isFullscreen: false, // 控制全屏显示的状态\n            fullscreenImageUrl: null, // 存储当前全屏显示的图片 URL\n        };\n    },\n    computed: {\n        ...mapGetters({\n            currentLoginUser: 'currentUser'\n        }),\n        textareaStyle() {\n            // 这部分保持不变，它负责文本域内部的自适应高度\n            const lineHeight = 22; // 根据你的 CSS .message-textarea 的 line-height 调整\n            const paddingY = 20; // 文本域的上下内边距总和 (padding-top: 10px + padding-bottom: 10px)\n            const borderWidth = 2; // 文本域的上下边框总和 (border: 1px)\n\n            const currentLines = this.newMessage.split('\\n').length;\n            const minLines = 1;\n            const maxLines = 12;\n            const actualLines = Math.max(minLines, Math.min(currentLines, maxLines));\n\n            const calculatedHeight = (actualLines * lineHeight) + paddingY + borderWidth;\n\n            // 注意：这里的高度是给 textarea 内部的，外部 chat-input 的高度由 chatInputHeight 控制\n            return {\n                height: `${calculatedHeight}px`,\n                minHeight: `${(minLines * lineHeight) + paddingY + borderWidth}px`,\n                maxHeight: `${(maxLines * lineHeight) + paddingY + borderWidth}px`,\n                overflowY: actualLines >= maxLines ? 'auto' : 'hidden'\n            };\n        }\n    },\n    watch: {\n        user(newUser, oldUser) {\n            if (newUser && newUser.user_id && newUser.user_id !== (oldUser ? oldUser.user_id : null)) {\n                this.messages = [];\n                this.loadMessages(newUser.user_id);\n                this.newMessage = ''; // 切换用户时清空输入框\n                this.imagePreviews = []; // 清空图片预览\n            } else if (!newUser) {\n                this.messages = [];\n                this.newMessage = '';\n                this.imagePreviews = [];\n            }\n        },\n        currentLoginUser: {\n            immediate: true,\n            handler(newVal, oldVal) {\n                if (newVal && (!oldVal || newVal.user_id !== oldVal.user_id)) {\n                    if (this.socket) {\n                        this.socket.disconnect();\n                    }\n                    this.initSocket();\n                } else if (!newVal && this.socket) {\n                    this.socket.disconnect();\n                }\n            }\n        }\n    },\n    methods: {\n\n        showFullscreen(imageUrl) {\n            this.fullscreenImageUrl = imageUrl;\n            this.isFullscreen = true;\n            // 阻止聊天消息区域的滚动\n            document.body.style.overflow = 'hidden';\n        },\n\n        closeFullscreen() {\n            this.fullscreenImageUrl = null;\n            this.isFullscreen = false;\n            // 恢复聊天消息区域的滚动\n            document.body.style.overflow = 'auto';\n        },\n\n        // 新增方法：获取头像的完整URL\n        getAvatarUrl(relativePath) {\n            // 如果 relativePath 为空或null，使用默认头像路径\n            if (!relativePath) {\n                return 'http://localhost:3081/public/default_user-avator/default.webp';\n            }\n\n            // 检查 relativePath 是否已经是一个完整的 URL (例如 http://...)\n            // 如果是，直接返回，不再拼接\n            if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {\n                return relativePath;\n            }\n\n            // 如果 relativePath 是相对路径（例如 /uploads/... 或 public/...）\n            const baseUrl = 'http://localhost:3081';\n            // 确保相对路径以 '/' 开头，避免 /public/ 和 /uploads/ 之间少了一个斜杠\n            if (!relativePath.startsWith('/')) {\n                relativePath = '/' + relativePath;\n            }\n            return `${baseUrl}${relativePath}`;\n        },\n        initSocket() {\n            if (!this.currentLoginUser || !this.currentLoginUser.user_id) {\n                console.warn('当前登录用户ID缺失，无法初始化Socket.IO连接。');\n                return;\n            }\n\n            if (this.socket) {\n                this.socket.disconnect();\n            }\n\n            this.socket = io('http://localhost:3081', {\n                withCredentials: true\n            });\n\n            this.socket.on('connect', () => {\n                // console.log('Socket.IO 连接成功:', this.socket.id);\n                this.socket.emit('authenticate', { user_id: this.currentLoginUser.user_id });\n            });\n\n            this.socket.on('chat message', (msg) => {\n                // console.log('前端收到新消息:', msg);\n                if (\n                    this.user &&\n                    this.currentLoginUser &&\n                    (\n                        (msg.senderId === this.user.user_id && msg.receiverId === this.currentLoginUser.user_id) ||\n                        (msg.senderId === this.currentLoginUser.user_id && msg.receiverId === this.user.user_id)\n                    )\n                ) {\n                    const existingMessageIndex = this.messages.findIndex(m => m.id === msg.id && m.senderId === msg.senderId);\n                    if (existingMessageIndex !== -1) {\n                        this.$set(this.messages, existingMessageIndex, msg);\n                        // console.log('更新了乐观消息:', msg.id, '->', msg.dbId);\n                    } else {\n                        this.messages.push(msg);\n                        // console.log('添加了新消息:', msg.id, msg.dbId ? '(dbId:' + msg.dbId + ')' : '');\n                    }\n\n                    this.scrollChatToBottom();\n                }\n            });\n\n            this.socket.on('message error', (data) => {\n                console.error('消息发送失败:', data.error);\n                const index = this.messages.findIndex(m => m.id === data.originalMsgId && m.isOptimistic);\n                if (index !== -1) {\n                    this.messages.splice(index, 1);\n                    // alert(`消息发送失败: ${data.error}`);\n                }\n            });\n\n            this.socket.on('disconnect', () => {\n                console.log('Socket.IO 连接断开');\n            });\n\n            this.socket.on('connect_error', (err) => {\n                console.error('Socket.IO 连接错误:', err);\n            });\n        },\n        async loadMessages(targetUserCustomId) {\n            if (!this.currentLoginUser || !this.currentLoginUser.user_id || !targetUserCustomId) {\n                console.warn('用户ID缺失，无法加载消息。');\n                this.messages = [];\n                return;\n            }\n\n            try {\n                const response = await this.$axios.get(`/user/messages/history/${targetUserCustomId}`, {\n                    withCredentials: true\n                });\n\n                if (response.data.success) {\n                    this.messages = response.data.messages.map(msg => ({\n                        ...msg,\n                        id: msg.id\n                    }));\n                    // console.log('历史消息加载成功:', this.messages.length, '条');\n                    this.scrollChatToBottom();\n                } else {\n                    // console.error('获取历史消息失败:', response.data.message);\n                    this.messages = [];\n                }\n            } catch (error) {\n                // console.error('获取历史消息网络错误:', error);\n                this.messages = [];\n            }\n        },\n        sendMessage() {\n            const textContent = this.newMessage.trim();\n            const clientMsgIdBase = Date.now();\n            let messageCounter = 0;\n\n            if (textContent !== '') {\n                const textMessageToSend = {\n                    id: clientMsgIdBase + messageCounter++,\n                    senderId: this.currentLoginUser.user_id,\n                    receiverId: this.user.user_id,\n                    text: textContent,\n                    timestamp: new Date().toISOString()\n                };\n                this.socket.emit('chat message', textMessageToSend);\n                this.messages.push({ ...textMessageToSend, isOptimistic: true });\n            }\n\n            if (this.imagePreviews.length > 0) {\n                const imageUrlsToSend = this.imagePreviews\n                    .filter(p => p.serverUrl && !p.error && !p.uploading)\n                    .map(p => p.serverUrl);\n\n                imageUrlsToSend.forEach(imageUrl => {\n                    const imageMessageToSend = {\n                        id: clientMsgIdBase + messageCounter++,\n                        senderId: this.currentLoginUser.user_id,\n                        receiverId: this.user.user_id,\n                        text: imageUrl,\n                        timestamp: new Date().toISOString()\n                    };\n                    this.socket.emit('chat message', imageMessageToSend);\n                    this.messages.push({ ...imageMessageToSend, isOptimistic: true });\n                });\n            }\n\n            this.newMessage = '';\n            this.imagePreviews.forEach(preview => {\n                if (preview.src && preview.src.startsWith('blob:')) {\n                    URL.revokeObjectURL(preview.src);\n                }\n            });\n            this.imagePreviews = [];\n\n            this.scrollChatToBottom();\n        },\n        insertNewline() {\n            const textarea = this.$refs.messageTextarea;\n            const start = textarea.selectionStart;\n            const end = textarea.selectionEnd;\n            this.newMessage = this.newMessage.substring(0, start) + '\\n' + this.newMessage.substring(end);\n            this.$nextTick(() => {\n                textarea.selectionStart = textarea.selectionEnd = start + 1;\n            });\n        },\n        isImageMessage(text) {\n            return typeof text === 'string' && text.startsWith('/api/upload/chat_image/') && /\\.(jpeg|jpg|png|gif|webp)$/i.test(text);\n        },\n        getImageUrl(text) {\n            if (this.isImageMessage(text)) {\n                const fullUrl = `http://localhost:3081${text}`;\n                return fullUrl;\n            }\n            return '';\n        },\n        // 确保 handleImageError 不会影响滚动，它只处理错误UI\n        handleImageError(msg) {\n            console.error('图片加载失败:', msg.text);\n            const index = this.messages.findIndex(m => m.id === msg.id || m.dbId === msg.dbId);\n            if (index !== -1) {\n                this.$set(this.messages[index], 'imageLoadError', true);\n            }\n            // 这里不调用 scrollChatToBottom，因为图片加载错误不会改变内容总高度\n            // 如果需要，可以在这里强制重新计算高度，但通常不需要\n        },\n        scrollChatToBottom() {\n            this.$nextTick(() => {\n                const messagesContainer = this.$el.querySelector('.chat-messages');\n                if (messagesContainer) {\n                    // console.log('尝试滚动到底部：scrollHeight =', messagesContainer.scrollHeight, 'clientHeight =', messagesContainer.clientHeight);\n                    messagesContainer.scrollTop = messagesContainer.scrollHeight;\n\n                    // 额外处理图片加载：\n                    // 如果消息中包含图片，图片加载是异步的，可能在 DOM 更新后才完成并影响滚动高度。\n                    // 确保所有图片加载完成后再执行一次滚动。\n                    const images = messagesContainer.querySelectorAll('.chat-image');\n                    let imagesLoaded = 0;\n                    const totalImages = images.length;\n\n                    if (totalImages === 0) {\n                        // 没有图片，直接滚动即可\n                        messagesContainer.scrollTop = messagesContainer.scrollHeight;\n                        // console.log('无图片，直接滚动到底部。');\n                    } else {\n                        images.forEach(img => {\n                            // 只有当图片尚未完全加载时才监听 load 事件\n                            if (!img.complete) {\n                                img.addEventListener('load', () => {\n                                    imagesLoaded++;\n                                    if (imagesLoaded === totalImages) {\n                                        // 所有图片加载完成，再次滚动\n                                        messagesContainer.scrollTop = messagesContainer.scrollHeight;\n                                        // console.log('所有图片加载完成，再次滚动到底部。');\n                                    }\n                                }, { once: true }); // 使用 once: true 确保事件只触发一次\n                                img.addEventListener('error', () => {\n                                    // 即使图片加载失败也计入，避免无限等待\n                                    imagesLoaded++;\n                                    if (imagesLoaded === totalImages) {\n                                        messagesContainer.scrollTop = messagesContainer.scrollHeight;\n                                        // console.log('部分图片加载失败，但仍尝试滚动到底部。');\n                                    }\n                                }, { once: true });\n                            } else {\n                                // 图片已经加载完成\n                                imagesLoaded++;\n                            }\n                        });\n\n                        // 初始滚动，如果图片已经加载完成\n                        if (imagesLoaded === totalImages) {\n                            messagesContainer.scrollTop = messagesContainer.scrollHeight;\n                            console.log('初始加载时所有图片已完成，直接滚动到底部。');\n                        }\n                    }\n\n                } else {\n                    console.warn('未找到用于滚动的 messagesContainer。');\n                }\n            });\n        },\n\n        handleDragEnter(e) {\n            e.preventDefault();\n            // 清除任何待处理的隐藏计时器\n            if (this.dragLeaveTimeout) {\n                clearTimeout(this.dragLeaveTimeout);\n                this.dragLeaveTimeout = null;\n            }\n            // 立即显示覆盖层\n            this.isDraggingOver = true;\n        },\n\n        handleDragOver(e) {\n            e.preventDefault();\n            // 清除任何待处理的隐藏计时器（如果鼠标在元素内部移动时触发）\n            if (this.dragLeaveTimeout) {\n                clearTimeout(this.dragLeaveTimeout);\n                this.dragLeaveTimeout = null;\n            }\n            // 确保覆盖层显示\n            this.isDraggingOver = true;\n        },\n\n        handleDragLeave(e) {\n            // 关键改进：检查 relatedTarget\n            // 如果 relatedTarget 是 null 或者不在当前容器内部，才真正隐藏\n            const container = this.$el; // 获取 ChatArea_container 元素本身\n            if (!e.relatedTarget || !container.contains(e.relatedTarget)) {\n                // 鼠标真正离开了整个容器区域\n                if (this.dragLeaveTimeout) {\n                    clearTimeout(this.dragLeaveTimeout);\n                    this.dragLeaveTimeout = null;\n                }\n                this.isDraggingOver = false;\n            } else {\n                // 鼠标只是从容器的一个子元素移动到另一个子元素，仍在容器内部\n                // 我们可以选择在这里不执行任何操作，或者为了严谨性，依然使用计时器（但通常不需要）\n                // 为了避免闪烁，我们确保只有在完全离开时才隐藏\n                // 如果你仍想保持一个小延迟，可以将之前的 setTimeout 逻辑放回这里\n                // 但对于消除“内部闪烁”，上面的 !container.contains(e.relatedTarget) 更关键\n                // 默认情况下，如果还在容器内，就不做任何隐藏操作\n            }\n        },\n\n        async handleDrop(e) {\n            e.preventDefault();\n            // 拖放完成后，无论如何都隐藏覆盖层并清除计时器\n            this.isDraggingOver = false;\n            if (this.dragLeaveTimeout) {\n                clearTimeout(this.dragLeaveTimeout);\n                this.dragLeaveTimeout = null;\n            }\n\n            const files = e.dataTransfer.files;\n            if (files.length > 0) {\n                for (let i = 0; i < files.length; i++) {\n                    const file = files[i];\n                    if (file.type.startsWith('image/')) {\n                        await this.uploadAndPreviewImage(file);\n                    } else {\n                        alert('只支持图片文件上传！');\n                    }\n                }\n            }\n\n            // ⭐ 新增：在处理完拖放后，将焦点重新设置回文本输入框\n            this.$nextTick(() => {\n                if (this.$refs.messageTextarea) {\n                    this.$refs.messageTextarea.focus();\n                }\n            });\n        },\n\n        async handlePaste(event) {\n            const items = (event.clipboardData || event.originalEvent.clipboardData).items;\n            for (const item of items) {\n                if (item.type.startsWith('image/')) {\n                    const file = item.getAsFile();\n                    if (file) {\n                        await this.uploadAndPreviewImage(file);\n                        event.preventDefault();\n                    }\n                }\n            }\n        },\n        async uploadAndPreviewImage(file) {\n            const localPreviewUrl = URL.createObjectURL(file);\n            const previewItem = {\n                src: localPreviewUrl,\n                name: file.name,\n                uploading: true,\n                error: false,\n                serverUrl: null\n            };\n            this.imagePreviews.push(previewItem);\n            this.scrollChatToBottom();\n\n            const formData = new FormData();\n            formData.append('image', file);\n            formData.append('receiverId', this.user.user_id);\n\n            try {\n                const response = await this.$axios.post('/upload/chat_image', formData, {\n                    headers: { 'Content-Type': 'multipart/form-data' },\n                    withCredentials: true\n                });\n\n                if (response.data.success && response.data.imageUrl) {\n                    previewItem.serverUrl = response.data.imageUrl;\n                    previewItem.uploading = false;\n                    console.log('图片上传成功并生成预览:', response.data.imageUrl);\n                } else {\n                    previewItem.uploading = false;\n                    previewItem.error = true;\n                    console.error('图片上传失败:', response.data.message);\n                }\n            } catch (error) {\n                previewItem.uploading = false;\n                previewItem.error = true;\n                console.error('图片上传网络错误:', error);\n            }\n        },\n        removeImagePreview(index) {\n            const previewToRemove = this.imagePreviews[index];\n            if (previewToRemove.src && previewToRemove.src.startsWith('blob:')) {\n                URL.revokeObjectURL(previewToRemove.src);\n            }\n            this.imagePreviews.splice(index, 1);\n        },\n\n        // --- 拖动调整大小方法 ---\n        startResize(e) {\n            this.isResizing = true;\n            this.startY = e.clientY;\n            this.startHeight = this.chatInputHeight;\n\n            // 阻止文本选择\n            document.body.style.userSelect = 'none';\n            document.body.style.cursor = 'ns-resize';\n\n            // 添加全局事件监听器\n            window.addEventListener('mousemove', this.doResize);\n            window.addEventListener('mouseup', this.stopResize);\n        },\n        doResize(e) {\n            if (!this.isResizing) return;\n\n            const deltaY = e.clientY - this.startY;\n            let newHeight = this.startHeight - deltaY; // 鼠标向上拖动，高度增加\n\n            // 限制高度在 190px 到 280px 之间\n            newHeight = Math.max(190, Math.min(newHeight, 280));\n\n            this.chatInputHeight = newHeight;\n        },\n        stopResize() {\n            this.isResizing = false;\n            document.body.style.userSelect = ''; // 恢复文本选择\n            document.body.style.cursor = ''; // 恢复默认光标\n\n            // 移除全局事件监听器\n            window.removeEventListener('mousemove', this.doResize);\n            window.removeEventListener('mouseup', this.stopResize);\n        }\n    },\n    mounted() {\n        if (this.user) {\n            this.loadMessages(this.user.user_id);\n            // 在 mounted 后，再次调用 scrollChatToBottom，确保初始加载时滚动\n            // 延迟一点时间，给浏览器渲染留出空间，特别是有图片时\n            setTimeout(() => {\n                this.scrollChatToBottom();\n            }, 100); // 100毫秒延迟，可以根据实际情况调整\n        }\n    },\n    beforeDestroy() {\n        if (this.socket) {\n            this.socket.disconnect();\n            console.log('ChatArea 组件销毁，Socket.IO 连接已断开');\n        }\n        this.imagePreviews.forEach(preview => {\n            if (preview.src && preview.src.startsWith('blob:')) {\n                URL.revokeObjectURL(preview.src);\n            }\n        });\n        // 组件销毁时移除拖动事件监听器，防止内存泄漏\n        window.removeEventListener('mousemove', this.doResize);\n        window.removeEventListener('mouseup', this.stopResize);\n    }\n};\n</script>\n\n\n<style scoped lang=\"less\">\n.fullscreen-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.7);\n    /* 半透明黑色背景 */\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 1100;\n    /* 确保在拖动覆盖层之上 */\n    overflow: auto;\n    /* 如果图片太大可以滚动 */\n}\n\n.fullscreen-image {\n    max-width: 90%;\n    max-height: 90%;\n    object-fit: contain;\n    /* 保证图片完整显示，可能会有留白 */\n}\n\n.close-fullscreen-button {\n    position: absolute;\n    top: 20px;\n    right: 30px;\n    background: none;\n    color: white;\n    border: none;\n    font-size: 30px;\n    cursor: pointer;\n    z-index: 1101;\n    /* 确保在图片之上 */\n    opacity: 0.7;\n    transition: opacity 0.3s ease;\n}\n\n.close-fullscreen-button:hover {\n    opacity: 1;\n}\n</style>\n\n<style scoped lang=\"less\">\n.ChatArea_container {\n    display: flex;\n    position: relative;\n    /* 确保此容器是定位上下文 */\n    flex-direction: column;\n    height: 100%;\n    background-color: @240_240_240;\n\n    // 拖拽时的样式反馈 (可选)\n    &.dragging-over {\n        border: 2px dashed #007bff;\n        background-color: #e6f7ff;\n    }\n}\n\n.drag-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.4);\n    /* 天蓝色，带有60%的透明度 */\n    /* 半透明黑色背景 */\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: white;\n    font-size: 24px;\n    z-index: 1000;\n    /* 确保在其他内容之上 */\n    border-radius: 8px;\n    /* 根据你的容器圆角调整 */\n}\n\n.drag-overlay p {\n    padding: 20px;\n    border: 3px dashed white;\n    border-radius: 10px;\n}\n\n.chat-header {\n    height: @chat-header-userList-headwe;\n    background-color: transparent;\n    border-bottom: 1px solid #dee2e6;\n    padding-left: 20px;\n    font-weight: bold;\n    flex-shrink: 0;\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    font-size: 1.1em;\n}\n\n\n\n\n\n// ... 其他样式保持不变\n\n.chat-messages {\n    flex-grow: 1;\n    padding: 15px 9px; // 保持这个内边距\n    overflow-y: auto;\n    background-color: transparent;\n\n    display: flex;\n    flex-direction: column; // 消息从顶部开始向下排列\n    // 移除所有 justify-content 属性\n}\n\n.no-messages {\n    text-align: center;\n    color: #999;\n    padding: 20px;\n    font-style: italic;\n    // 移除 margin-top: auto; 这一行\n    margin-bottom: 20px;\n}\n\n.message-item {\n    display: flex;\n    margin-bottom: 20px;\n    align-items: flex-start; // 保证头像和消息顶部对齐\n}\n\n.message-item.sent {\n    justify-content: flex-end; // 发送方消息靠右对齐\n}\n\n.message-item.received {\n    justify-content: flex-start; // 接收方消息靠左对齐\n}\n\n.avatar-name-wrapper {\n    display: flex;\n    flex-direction: column; // 头像和名字垂直排列\n    align-items: center; // 头像和名字水平居中\n    margin: 0 10px; // 头像与消息气泡之间的间距\n    flex-shrink: 0; // 防止头像被压缩\n}\n\n.message-avatar {\n    width: 40px;\n    height: 40px;\n    margin-left: 6px;\n    margin-right: 6px;\n    border-radius: 50%; // 圆形头像\n    object-fit: cover;\n    margin-bottom: 5px; // 头像与名字之间的间距\n}\n\n.sender-name {\n    font-size: 0.8em;\n    margin-bottom: 6px;\n    color: #666;\n    white-space: nowrap; // 防止名字换行\n    overflow: hidden;\n    text-overflow: ellipsis; // 超出部分显示省略号\n    max-width: 200px; // 限制名字宽度，根据需要调整\n}\n\n.message-bubble {\n    display: flex;\n    max-width: 70%; // 消息气泡的最大宽度\n    flex-direction: column; // 确保气泡内的内容（例如图片和文本）垂直堆叠\n}\n\n.message-item.received .message-bubble {\n    align-items: flex-start; // 接收方消息气泡内容左对齐\n}\n\n.message-item.sent .message-bubble {\n    align-items: flex-end; // 发送方消息气泡内容右对齐\n}\n\n\n.message-content {\n    // 移除 max-width: 70%; 因为现在 message-bubble 已经限制了\n    padding: 8px 12px;\n    border-radius: 10px;\n    line-height: 1.4;\n    word-wrap: break-word;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);\n    position: relative;\n    font-size: 0.95em;\n}\n\n/* 文本消息气泡样式 */\n.message-content:not(:has(.chat-image)) {\n    background-color: white;\n    color: black;\n    border: none;\n}\n\n.message-item.sent .message-content:not(:has(.chat-image)) {\n    background-color: dodgerblue;\n    color: white;\n}\n\n/* 图片消息气泡样式 (移除背景和内边距，让图片自身决定) */\n.message-content:has(.chat-image) {\n    border: none;\n    padding: 0;\n    background-color: transparent;\n    box-shadow: none;\n}\n\n/* --- 聊天区域内的图片样式 --- */\n.message-content img.chat-image {\n    width: auto;\n    max-width: 100%;\n    max-height: 280px;\n    display: block;\n    border-radius: 10px;\n    margin: 0;\n    object-fit: contain;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n    cursor: zoom-in;\n}\n\n/* 加载失败或错误图片的占位符样式 */\n.message-content img.chat-image[src=\"\"] {\n    background-color: #f0f0f0;\n    color: #666;\n    font-size: 0.9em;\n    text-align: center;\n    line-height: 150px;\n    height: 150px;\n    width: 200px;\n    border: 1px dashed #ccc;\n    box-shadow: none;\n}\n\n.image-error-text {\n    color: #dc3545;\n    font-size: 0.8em;\n    text-align: center;\n    margin-top: 5px;\n}\n\n\n\n\n\n\n/* 拖动把手样式 */\n.resize-handle {\n    height: 1px;\n    /* 把手的高度 */\n    background-color: #e9ecef;\n    /* 与 header 或 border 颜色一致 */\n    cursor: ns-resize;\n    /* 上下拖动光标 */\n    border-top: 1px solid #dee2e6;\n    border-bottom: 1px solid #dee2e6;\n    flex-shrink: 0;\n\n    /* 防止被压缩 */\n    &:hover {\n        background-color: #d0d5db;\n        /* 悬停时颜色变深 */\n    }\n}\n\n.chat-input {\n    display: flex;\n    flex-direction: column;\n    padding: 5px;\n    /* height 由 JS 动态控制 */\n    border-top: none;\n    /* 边框现在在 resize-handle 上 */\n    background-color: transparent;\n    flex-shrink: 0;\n    gap: 10px;\n    // 移除固定的 height: 240px; 因为现在由 JS 控制\n    min-height: 190px;\n    /* JS 也会限制，这里作为视觉参考 */\n    max-height: 280px;\n    /* JS 也会限制，这里作为视觉参考 */\n    box-sizing: border-box;\n    /* 确保 padding 包含在高度内 */\n}\n\n.message-textarea {\n    flex-grow: 1;\n    width: 100%;\n    height: auto;\n    /* 由 computed 属性控制 */\n    padding: 5px 5px;\n    border: none;\n    outline: none;\n    font-size: 0.95em;\n    resize: none;\n    font-family: inherit;\n    background-color: transparent;\n}\n\n\n/* 图片预览区域 */\n.image-previews {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n    padding-top: 5px;\n    max-height: 120px;\n    overflow-y: auto;\n    border-top: 1px dashed #ccc;\n    padding-top: 6px;\n    margin-top: -5px;\n}\n\n.image-preview-item {\n    position: relative;\n    width: 80px;\n    height: 80px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    overflow: hidden;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: #f0f0f0;\n    flex-shrink: 0;\n}\n\n.uploaded-image-thumbnail {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: 4px;\n}\n\n.remove-preview {\n    position: absolute;\n    top: 2px;\n    right: 2px;\n    background-color: rgba(0, 0, 0, 0.6);\n    color: white;\n    border-radius: 50%;\n    width: 18px;\n    height: 18px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 0.8em;\n    cursor: pointer;\n    z-index: 10;\n}\n\n.upload-progress,\n.upload-error {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: rgba(0, 0, 0, 0.7);\n    color: white;\n    font-size: 0.7em;\n    text-align: center;\n    padding: 2px 0;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n}\n\n.upload-error {\n    background-color: rgba(220, 53, 69, 0.7);\n}\n\n.empty-chat {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    color: #999;\n    font-size: 1.2em;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChatArea.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChatArea.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatArea.vue?vue&type=template&id=959da6fa&scoped=true\"\nimport script from \"./ChatArea.vue?vue&type=script&lang=js\"\nexport * from \"./ChatArea.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatArea.vue?vue&type=style&index=0&id=959da6fa&prod&scoped=true&lang=less\"\nimport style1 from \"./ChatArea.vue?vue&type=style&index=1&id=959da6fa&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"959da6fa\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"home_container\">\n        <div class=\"user-list\" :style=\"{ width: userListWidth + 'px' }\">\n           <UserList :currentUser=\"currentChatUser\" @select-user=\"handleSelectUserFromUserList\" />\n        </div>\n\n        <div class=\"divider\" @mousedown=\"startDrag\"></div>\n\n        <div class=\"chat-area\">\n            <ChatArea :user=\"currentChatUser\" />\n        </div>\n    </div>\n</template>\n\n<script>\nimport UserList from '@/view/UserList.vue';\nimport ChatArea from '@/view/ChatArea.vue';\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n    name: 'Home',\n    components: { UserList, ChatArea },\n    data() {\n        return {\n            userListWidth: 250,\n            dragging: false,\n            currentChatUser: null // Home 组件内部的当前聊天对象，它会从 Vuex 或 UserList 获取\n        };\n    },\n    computed: {\n        ...mapGetters(['currentChatTargetUser', 'currentUserCustomId']) // 映射 Vuex getter\n    },\n    watch: {\n        // 监听 Vuex 中的聊天目标用户变化\n        currentChatTargetUser(newVal, oldVal) {\n            // console.log('Home: currentChatTargetUser changed from Vuex', oldVal, '->', newVal); // Debugging\n            if (newVal && (!oldVal || newVal.user_id !== oldVal.user_id)) {\n                this.currentChatUser = newVal; // 更新 Home 组件内部的聊天对象\n                // console.log('Home: currentChatUser updated from Vuex target:', this.currentChatUser); // Debugging\n            } else if (!newVal) {\n                this.currentChatUser = null; // 清空\n            }\n        }\n    },\n    methods: {\n        ...mapActions(['selectChatUser']), // 映射 selectChatUser action\n\n        // 当 UserList 触发 select-user 事件时 (用户在 Home 页面左侧列表点击切换)\n        handleSelectUserFromUserList(user) {\n            // console.log('Home: User selected from UserList:', user); // Debugging\n            this.currentChatUser = user;\n            this.selectChatUser(user); // 同时更新 Vuex 中的聊天目标用户\n            // 注意：这里不需要再跳转路由，因为已经在 Home 页面了\n            localStorage.setItem('lastSelectedChatUser', user ? user.user_id : ''); // ✅ 更新 localStorage\n        },\n        startDrag(e) {\n            e.preventDefault();\n            this.dragging = true;\n            document.addEventListener('mousemove', this.onDragging);\n            document.addEventListener('mouseup', this.stopDrag);\n        },\n        onDragging(e) {\n            if (this.dragging) {\n                const home = document.querySelector('.home_container');\n                if (!home) {\n                    console.error('.home_container not found!');\n                    return;\n                }\n                const rect = home.getBoundingClientRect();\n                const offsetX = e.clientX - rect.left;\n                const minWidth = 200;\n                const maxWidth = 300;\n                const newWidth = Math.min(Math.max(offsetX, minWidth), maxWidth);\n                this.userListWidth = newWidth;\n            }\n        },\n        stopDrag() {\n            this.dragging = false;\n            document.removeEventListener('mousemove', this.onDragging);\n            document.removeEventListener('mouseup', this.stopDrag);\n            localStorage.setItem('userListWidth', this.userListWidth);\n        }\n    },\n    mounted() {\n        const savedWidth = localStorage.getItem('userListWidth');\n        if (savedWidth) {\n            this.userListWidth = parseInt(savedWidth);\n        }\n\n        // ✅ 重要的逻辑调整：在 mounted 时优先从 Vuex 获取聊天目标用户\n        if (this.currentChatTargetUser) {\n            this.currentChatUser = this.currentChatTargetUser;\n            // console.log('Home: Mounted, setting currentChatUser from Vuex target:', this.currentChatUser); // Debugging\n        } else {\n            // 如果 Vuex 中没有，尝试从 localStorage 恢复\n            const lastSelectedUserId = localStorage.getItem('lastSelectedChatUser');\n            if (lastSelectedUserId) {\n                // 需要在 UserList 加载完成其好友列表后，Home 才能知道如何根据 ID 找到对应的好友对象\n                // 因此，这里不直接设置 this.currentChatUser，而是等待 UserList 通过其 internal logic 来触发 select-user\n                // 或者，Home 可以先获取好友列表，然后根据 lastSelectedUserId 查找并设置 currentChatUser\n                // 为了简化，我们让 UserList 优先处理 localStorage，并最终通过 emit 确保 Home 和 Vuex 同步\n            }\n        }\n    }\n};\n</script>\n\n<style scoped lang=\"less\">\n.home_container {\n    display: flex; /* 确保 Home 容器是 Flexbox */\n    height: 100%; /* 确保容器有高度 */\n    width: 100%; /* 确保容器有宽度 */\n    overflow: hidden; /* 防止溢出 */\n}\n\n.user-list {\n    /* 你的 :style=\"{ width: userListWidth + 'px' }\" 已经设置了宽度 */\n    /* 关键：确保它不会因为 flex 布局而伸缩 */\n    flex-shrink: 0; /* 默认值为 1，表示空间不足时会收缩。设为 0 表示不收缩 */\n    flex-grow: 0;   /* 默认值为 0，表示不增长。确保它不是 1 */\n    /* overflow-y: auto;  如果内容可能超出高度，需要滚动 */\n    background-color: @255_255_255;\n}\n\n.divider {\n    width: 4px; /* 给它一个可见的宽度，方便拖动 */\n    cursor: ew-resize; /* 鼠标样式表示可水平拖动 */\n    background-color: transparent; /* 调试时可见 */\n    flex-shrink: 0; /* 确保分割线不会收缩 */\n}\n\n.chat-area {\n    flex-grow: 1; /* 让聊天区域填充剩余所有空间 */\n    overflow: hidden; /* 防止聊天内容溢出 */\n    display: flex; /* 如果 ChatArea 内部有更复杂的布局，可能也需要 Flexbox */\n    flex-direction: column; /* 根据 ChatArea 内部布局决定 */\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./home.vue?vue&type=template&id=615ee06c&scoped=true\"\nimport script from \"./home.vue?vue&type=script&lang=js\"\nexport * from \"./home.vue?vue&type=script&lang=js\"\nimport style0 from \"./home.vue?vue&type=style&index=0&id=615ee06c&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"615ee06c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"user-wrapper\"},[_c('div',{staticClass:\"user-info\",on:{\"click\":function($event){return _vm.$router.push('/PersonalInformation')}}},[_c('div',{staticClass:\"user-image\"},[_c('img',{attrs:{\"src\":_vm.displayAvatar,\"alt\":\"用户头像\"}})]),_c('div',{staticClass:\"user-identity\"},[_c('div',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.currentUser.name))]),_c('div',{staticClass:\"user-number\"},[_c('span',[_vm._v(\"h5-APP号\")]),_c('span',{staticClass:\"user_m_left\"},[_vm._v(\":\")]),_c('span',{staticClass:\"user_m_left\",attrs:{\"id\":\"user_id\"}},[_vm._v(_vm._s(_vm.currentUser.email))])]),_c('div',{staticClass:\"user-region\"},[_c('span',[_vm._v(\"地区\")]),_c('span',{staticClass:\"user_m_left\"},[_vm._v(\":\")]),_c('span',{staticClass:\"user_m_left\",attrs:{\"id\":\"user_id\"}},[_vm._v(_vm._s(_vm.currentUser.region))])])]),_c('div',{staticClass:\"personal-data-btn\"},[_c('div',{staticClass:\"forward_box\"},[_c('Forward')],1)])])]),_c('div',{staticClass:\"Options\",on:{\"click\":function($event){return _vm.$router.push('/PersonalInformation')}}},[_c('div',{staticClass:\"Options-svg\"},[_c('svg',{staticClass:\"personal-information-svg\",staticStyle:{\"width\":\"25px\",\"height\":\"25px\",\"margin-top\":\"-1px\"},attrs:{\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":_vm.personal_info_d11}}),_c('path',{attrs:{\"d\":_vm.personal_info_d22}}),_c('path',{attrs:{\"d\":_vm.personal_info_d33}}),_c('path',{attrs:{\"d\":_vm.personal_info_d44}}),_c('path',{attrs:{\"d\":_vm.personal_info_d55}})])]),_c('div',{staticClass:\"Options-text\"},[_vm._v(\"个人资料\")]),_c('div',{staticClass:\"forward_box\"},[_c('Forward')],1)]),_c('div',{staticClass:\"Options\",on:{\"click\":function($event){return _vm.$router.push('/ChangePassword')}}},[_c('div',{staticClass:\"Options-svg\"},[_c('svg',{staticClass:\"change-password-svg\",staticStyle:{\"width\":\"23px\",\"height\":\"23px\"},attrs:{\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":_vm.change_password_d11}})])]),_c('div',{staticClass:\"Options-text\"},[_vm._v(\"修改密码\")]),_c('div',{staticClass:\"forward_box\"},[_c('Forward')],1)]),_c('div',{staticClass:\"Options\",on:{\"click\":function($event){return _vm.$router.push('/SetUp')}}},[_c('div',{staticClass:\"Options-svg\"},[_c('svg',{staticClass:\"log-out-svg\",staticStyle:{\"width\":\"30px\",\"height\":\"30px\",\"margin-top\":\"-4px\",\"margin-left\":\"-4px\"},attrs:{\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":_vm.log_out_d11}}),_c('path',{attrs:{\"d\":_vm.log_out_d22}})])]),_c('div',{staticClass:\"Options-text\"},[_vm._v(\"设置\")]),_c('div',{staticClass:\"forward_box\"},[_c('Forward')],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div class=\"user-wrapper\">\n            <div class=\"user-info\" @click=\"$router.push('/PersonalInformation')\">\n                <div class=\"user-image\">\n                    <img :src=\"displayAvatar\" alt=\"用户头像\" />\n                </div>\n                <div class=\"user-identity\">\n                    <div class=\"user-name\">{{ currentUser.name }}</div>\n                    <!-- <div class=\"user-nickname\">\n                        <span>昵称</span>\n                        <span class=\"user_m_left\">:</span>\n                        <span class=\"user_m_left\" id=\"user_id\">{{ currentUser.nickname }}</span>\n                    </div> -->\n                    <div class=\"user-number\">\n                        <span>h5-APP号</span>\n                        <span class=\"user_m_left\">:</span>\n                        <span class=\"user_m_left\" id=\"user_id\">{{ currentUser.email }}</span>\n                    </div>\n                    <div class=\"user-region\">\n                        <span>地区</span>\n                        <span class=\"user_m_left\">:</span>\n                        <span class=\"user_m_left\" id=\"user_id\">{{ currentUser.region }}</span>\n                    </div>\n                </div>\n                <div class=\"personal-data-btn\">\n                    <div class=\"forward_box\">\n                        <Forward></Forward>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"Options\" @click=\"$router.push('/PersonalInformation')\">\n            <div class=\"Options-svg\">\n                <svg style=\"width: 25px; height: 25px; margin-top: -1px;\" class=\"personal-information-svg\"\n                    viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path :d=\"personal_info_d11\"></path>\n                    <path :d=\"personal_info_d22\"></path>\n                    <path :d=\"personal_info_d33\"></path>\n                    <path :d=\"personal_info_d44\"></path>\n                    <path :d=\"personal_info_d55\"></path>\n                </svg>\n            </div>\n            <div class=\"Options-text\">个人资料</div>\n            <div class=\"forward_box\">\n                <Forward></Forward>\n            </div>\n        </div>\n\n        <div class=\"Options\" @click=\"$router.push('/ChangePassword')\">\n            <div class=\"Options-svg\">\n                <svg style=\"width: 23px; height: 23px;\" class=\"change-password-svg\" viewBox=\"0 0 1024 1024\"\n                    version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path :d=\"change_password_d11\"></path>\n                </svg>\n            </div>\n            <div class=\"Options-text\">修改密码</div>\n            <div class=\"forward_box\">\n                <Forward></Forward>\n            </div>\n        </div>\n\n        <div class=\"Options\" @click=\"$router.push('/SetUp')\">\n            <div class=\"Options-svg\">\n                <svg class=\"log-out-svg\" style=\"width: 30px; height: 30px; margin-top: -4px; margin-left: -4px;\"\n                    viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path :d=\"log_out_d11\"></path>\n                    <path :d=\"log_out_d22\"></path>\n                </svg>\n            </div>\n            <div class=\"Options-text\">设置</div>\n            <div class=\"forward_box\">\n                <Forward></Forward>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport svg from '@/assets/svg/svg.js';\nimport { mapGetters } from 'vuex';\n\nexport default {\n    name: 'setting',\n    data() {\n        return {\n            personal_info_d11: svg.personal_info_d11,\n            personal_info_d22: svg.personal_info_d22,\n            personal_info_d33: svg.personal_info_d33,\n            personal_info_d44: svg.personal_info_d44,\n            personal_info_d55: svg.personal_info_d55,\n\n            change_password_d11: svg.change_password_d11,\n\n            log_out_d11: svg.log_out_d11,\n            log_out_d22: svg.log_out_d22,\n        };\n    },\n    computed: {\n        ...mapGetters(['currentUser']),\n\n        displayAvatar() {\n            let finalImageUrl = '';\n\n            // 2. 如果 Vuex 中有用户的头像路径\n            if (this.currentUser && this.currentUser.avatar) {\n                const avatarPath = this.currentUser.avatar;\n\n                // **关键修改在这里：判断是否是默认头像的相对路径**\n                if (avatarPath === 'default_user-avator/default.webp') {\n                    // 如果是默认头像的相对路径，直接使用硬编码的完整默认头像 URL，不再拼接\n                    finalImageUrl = 'default_user-avator/default.webp';\n                }\n                // 否则，认为是用户上传的头像（可能是完整的URL，也可能是其他相对路径），需要拼接\n                else if (avatarPath.startsWith('http://') || avatarPath.startsWith('https://')) {\n                    finalImageUrl = avatarPath; // 如果已经是完整 URL，直接用\n                } else {\n                    // 否则，认为是相对路径（用户上传的），需要拼接后端 URL\n                    const cleanPath = avatarPath.startsWith('/') ? avatarPath.substring(1) : avatarPath;\n                    finalImageUrl = `http://localhost:3081/${cleanPath}`;\n                }\n            }\n            // 3. 如果 Vuex 中没有用户头像（不应该发生，但作为兜底），显示默认头像\n            else {\n                finalImageUrl = 'default_user-avator/default.webp';\n            }\n\n            // 4. 为非 Base64 图片添加时间戳，防止缓存\n            if (finalImageUrl && !finalImageUrl.startsWith('data:')) {\n                return `${finalImageUrl}?t=${Date.now()}`;\n            }\n\n            return finalImageUrl; // 返回 Base64 或最终的图片 URL\n        },\n    },\n    // ... methods\n    created() {\n        // 在组件创建时，如果 currentUser 为空，或者你希望在进入此页面时强制获取最新资料\n        // 最好是判断 currentUser 对象是否存在，因为 avatar 字段可能在 checkLogin 之后才被填充\n        if (!this.currentUser) {\n            this.refreshUserProfile();\n        }\n    },\n    methods: {\n        async refreshUserProfile() {\n            try {\n                const response = await this.$axios.get('/user/profile');\n                if (response.data.success) {\n                    this.$store.dispatch('loginSuccess', response.data.user);\n                    // console.log(\"Setting 页面刷新用户资料成功\");\n                } else {\n                    console.warn(\"Setting 页面刷新用户资料失败:\", response.data.message);\n                }\n            } catch (error) {\n                console.error(\"Setting 页面刷新用户资料请求出错:\", error);\n                // 即使获取失败，也使用 Vuex 中已有的数据\n            }\n        }\n    },\n};\n</script>\n\n<style scoped lang='less'>\n.user-wrapper {\n    width: 100%;\n    height: fit-content;\n    background-color: white;\n    padding: 20px 10px 30px 20px;\n    display: flex;\n}\n\n.user-info {\n    display: flex;\n    height: fit-content;\n    width: 100%;\n    // justify-content: space-between;\n}\n\n.user-image {\n    width: 60px;\n    height: 60px;\n    border-radius: 8px;\n    overflow: hidden;\n}\n\n.user-image img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    /* background-color: rgb(255, 255, 255); */\n    /* border-radius: 8px; */\n}\n\n/* 用户身份（名字、用户号） */\n.user-identity {\n    width: calc(100% - 60px - 40px);\n    height: fit-content;\n    /* background-color: papayawhip; */\n    padding: 0px 0px 6px 8px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex-direction: column;\n    gap: 6px;\n}\n\n/* 用户名字 */\n.user-name,\n.user-number,\n.user-nickname,\n.user-region {\n    font-size: @fontSize14;\n    width: 100%;\n    line-height: 20px;\n    background-color: rgb(255, 255, 255);\n    color: rgb(140, 140, 140);\n}\n\n.user-name {\n    font-size: @fontSize20;\n    color: black;\n}\n\n.user_m_left {\n    margin-left: 6px;\n}\n\n/* 用户资料按钮 */\n.personal-data-btn {\n    width: 40px;\n    height: 60px;\n    // background-color: peru;\n    position: relative;\n    display: flex;\n    align-items: end;\n    justify-content: flex-end;\n}\n\n/* 进入用户资料按钮 svg 按钮 */\n.svg-forward {\n    /* position: absolute; */\n    width: 28px;\n    height: 28px;\n    /* bottom: 0px; */\n    padding: 6px;\n    /* right: 0; */\n    fill: rgb(140, 140, 140);\n    /* background-color: ivory; */\n}\n\n/* 设置 */\n.Options {\n    margin-top: 10px;\n    width: 100%;\n    padding: 10px 10px 10px 20px;\n    background-color: rgb(255, 255, 255);\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n}\n\n/* 设置 svg */\n.Options-svg {\n    width: 22px;\n    height: 22px;\n    margin-right: 14px;\n    // background-color: rgb(200, 205, 50);\n    fill: rgb(30, 144, 255);\n    // display: flex;\n    // align-items: center;\n    // justify-content: center;\n}\n\n/* 设置文字 */\n.Options-text {\n    margin-right: auto;\n    // display: flex;\n    // align-items: center;\n    // justify-content: center;\n    // width: 56px;\n    // height: 20px;\n}\n</style>\n\n<style scoped lang=\"less\" data->\n.forward_box {\n    height: 22px;\n    width: 22px;\n    padding: 2px;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./setting.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./setting.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./setting.vue?vue&type=template&id=370c98d0&scoped=true\"\nimport script from \"./setting.vue?vue&type=script&lang=js\"\nexport * from \"./setting.vue?vue&type=script&lang=js\"\nimport style0 from \"./setting.vue?vue&type=style&index=0&id=370c98d0&prod&scoped=true&lang=less\"\nimport style1 from \"./setting.vue?vue&type=style&index=1&id=370c98d0&prod&scoped=true&lang=less&data-=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"370c98d0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"index-container\"},[_c('div',{staticClass:\"index-content\"},[_c('div',{staticClass:\"text-animate\"},_vm._l((_vm.text),function(letter,index){return _c('span',{key:index,ref:'letter' + index,refInFor:true},[_vm._v(_vm._s(letter))])}),0),_c('div',{staticClass:\"progress-bar\"},[_c('div',{staticClass:\"progress\",style:({ width: _vm.progress + '%' })})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <!-- index.vue -->\n    <div class=\"index-container\">\n        <div class=\"index-content\">\n            <!-- 动画 -->\n            <div class=\"text-animate\">\n                <span v-for=\"(letter, index) in text\" :key=\"index\" :ref=\"'letter' + index\">{{ letter }}</span>\n            </div>\n            <!-- 进度条 -->\n            <div class=\"progress-bar\">\n                <div class=\"progress\" :style=\"{ width: progress + '%' }\"></div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<!-- 使用 set 去重 ，把相同的页面后新增的去掉 -->\n\n<script>\nimport { gsap } from \"gsap\";\n\nexport default {\n    name: \"Index\",\n    data() {\n        return {\n            text: \"liuhu\".split(\"\"), // 要显示的文字\n            progress: 0 // 初始化进度条为 0\n        };\n    },\n    mounted() {\n        // 字母动画\n        this.text.forEach((_, i) => {\n            gsap.from(this.$refs[\"letter\" + i], {\n                opacity: 0, // 初始透明度为 0\n                y: 50, // 初始位置向下偏移 50px\n                delay: i * 0.1, // 每个字母延迟 0.1 秒\n                duration: 1, // 动画持续 1 秒\n                ease: \"back.out(1.7)\"\n            });\n        });\n\n        // ✅ 进度条动画：进度走到 100 时，执行跳转\n        gsap.to(this.$data, {\n            duration: 3,\n            progress: 100,\n            ease: \"power1.out\",\n            onComplete: () => {\n                this.fadeOutAndRedirect(); // 动画完成后跳转\n            }\n        });\n    },\n    methods: {\n        updateProgress(progress) {\n            this.progress = progress; // 更新进度条的宽度\n        },\n        fadeOutAndRedirect() {\n            // 给所有文字添加淡出动画\n            gsap.to(this.$refs, {\n                opacity: 0,\n                duration: 1, // 淡出动画持续时间\n                onComplete: () => {\n                    // 动画结束后，跳转到 login 页面\n                    this.$router.replace(\"/Login\");\n                }\n            });\n        }\n    }\n};\n</script>\n\n<style scoped lang=\"less\" data-index-container>\n.index-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100vw;\n    height: 100vh;\n    flex-direction: column;\n    background: linear-gradient(-45deg,\n            white,\n            dodgerblue,\n            deepskyblue,\n            skyblue,\n            dodgerblue);\n    background-size: 400% 400%;\n    animation: gradientBG 3s ease infinite;\n}\n\n@keyframes gradientBG {\n    0% {\n        background-position: 0% 50%;\n    }\n\n    50% {\n        background-position: 100% 50%;\n    }\n\n    100% {\n        background-position: 0% 50%;\n    }\n}\n\n.index-content {\n    position: relative;\n    width: fit-content;\n    height: fit-content;\n    // background-color: red;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n}\n\n.text-animate {\n    font-size: 58px;\n    font-weight: bold;\n    color: white;\n    letter-spacing: 8px;\n    display: flex;\n    gap: 8px;\n}\n\n.progress-bar {\n    width: 100%;\n    margin-top: 10px;\n    height: 6px;\n    background-color: rgba(255, 255, 255, 0.4);\n    border-radius: 10px;\n}\n\n.progress {\n    height: 100%;\n    background-color: @white;\n    /* 白色进度条背景 */\n    /* 绿色进度 */\n    border-radius: 10px;\n    transition: width 0.3s ease-out;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f2b218a6&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=f2b218a6&prod&scoped=true&lang=less&data-index-container=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f2b218a6\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-container\"},[_c('div',{staticClass:\"copy_nav_status\"}),_c('form',{attrs:{\"id\":\"form\",\"autocapitalize\":\"off\",\"autocomplete\":\"off\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.login.apply(null, arguments)}}},[_c('div',{staticClass:\"dl-zc-title\"},[_vm._v(\"登录账号\")]),_c('div',{staticClass:\"dl-zc-field\",attrs:{\"data-dl-zc\":\"1\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],staticClass:\"dl-zc-input\",attrs:{\"type\":\"email\",\"name\":\"email\",\"maxlength\":\"100\",\"placeholder\":\"请输入邮箱地址\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing)return;_vm.email=$event.target.value}}}),_c('Clear',{on:{\"click\":_vm.clear_email}})],1),_c('div',{staticClass:\"dl-zc-field\",attrs:{\"data-dl-zc\":\"2\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],staticClass:\"dl-zc-input\",attrs:{\"type\":\"password\",\"name\":\"password\",\"maxlength\":\"100\",\"placeholder\":\"请输入密码\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.password=$event.target.value}}}),_c('Clear',{on:{\"click\":_vm.clear_password}})],1),_c('div',{staticClass:\"dl-zc-field\",attrs:{\"data-dl-zc\":\"3\"}},[_c('div',{staticClass:\"dl-btn\",attrs:{\"id\":\"login-btn\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")])]),_c('div',{staticClass:\"dl-zc-field\",attrs:{\"data-dl-zc\":\"4\"}},[_c('div',{staticClass:\"dl-account-nformation\"},[_c('span',{on:{\"click\":_vm.free_register}},[_vm._v(\"免费注册\")]),_c('span',{on:{\"click\":_vm.forgotPassword}},[_vm._v(\"忘记密码\")])])])]),(_vm.showVerificationModal)?_c('div',{staticClass:\"verification-modal-overlay\"},[_c('div',{staticClass:\"verification-modal-content\"},[_c('h3',[_vm._v(\"请输入验证码\")]),_c('p',[_vm._v(\"我们已向您的邮箱 **\"+_vm._s(_vm.email)+\"** 发送了6位验证码，请查收。\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userVerificationCode),expression:\"userVerificationCode\"}],attrs:{\"type\":\"text\",\"maxlength\":\"6\",\"placeholder\":\"请输入6位验证码\"},domProps:{\"value\":(_vm.userVerificationCode)},on:{\"input\":function($event){if($event.target.composing)return;_vm.userVerificationCode=$event.target.value}}}),_c('div',{staticClass:\"modal-buttons\"},[_c('button',{on:{\"click\":_vm.verifyCodeFromModal}},[_vm._v(\"确定\")]),_c('button',{on:{\"click\":_vm.cancelVerification}},[_vm._v(\"取消\")])])])]):_vm._e(),_c('div',[_vm._v(_vm._s(_vm.err))])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"login-container\">\n        <!-- 状态栏 -->\n        <div class=\"copy_nav_status\"></div>\n\n        <!-- 登陆表单 -->\n        <form id=\"form\" autocapitalize=\"off\" autocomplete=\"off\" @submit.prevent=\"login\">\n            <div class=\"dl-zc-title\">登录账号</div>\n            <!-- 邮箱输入 -->\n            <div class=\"dl-zc-field\" data-dl-zc=\"1\">\n                <input v-model=\"email\" type=\"email\" name=\"email\" class=\"dl-zc-input\" maxlength=\"100\"\n                    placeholder=\"请输入邮箱地址\" />\n                <Clear @click=\"clear_email\"></Clear>\n            </div>\n            <!-- 密码输入 -->\n            <div class=\"dl-zc-field\" data-dl-zc=\"2\">\n                <input v-model=\"password\" type=\"password\" name=\"password\" class=\"dl-zc-input\" maxlength=\"100\"\n                    placeholder=\"请输入密码\" />\n                <Clear @click=\"clear_password\"></Clear>\n            </div>\n            <!-- 注册按钮 -->\n            <div class=\"dl-zc-field\" data-dl-zc=\"3\">\n                <div class=\"dl-btn\" id=\"login-btn\" @click=\"login\">登录</div>\n            </div>\n            <!-- 忘记密码 -->\n            <div class=\"dl-zc-field\" data-dl-zc=\"4\">\n                <div class=\"dl-account-nformation\">\n                    <span @click=\"free_register\">免费注册</span>\n                    <span @click=\"forgotPassword\">忘记密码</span>\n                </div>\n            </div>\n        </form>\n\n        <div class=\"verification-modal-overlay\" v-if=\"showVerificationModal\">\n            <div class=\"verification-modal-content\">\n                <h3>请输入验证码</h3>\n                <p>我们已向您的邮箱 **{{ email }}** 发送了6位验证码，请查收。</p>\n                <input type=\"text\" v-model=\"userVerificationCode\" maxlength=\"6\" placeholder=\"请输入6位验证码\" />\n                <div class=\"modal-buttons\">\n                    <button @click=\"verifyCodeFromModal\">确定</button>\n                    <button @click=\"cancelVerification\">取消</button>\n                </div>\n            </div>\n        </div>\n\n        <div>{{ err }}</div>\n    </div>\n</template>\n\n<script>\n// login.vue\n\nexport default {\n    name: \"Login\",\n    data() {\n        return {\n            err: '',\n            email: \"test1@test1.com\", // 存储邮箱\n            password: \"111111\", // 用于绑定密码输入框的值\n            showVerificationModal: false, // 控制验证码模态框的显示与隐藏\n            userVerificationCode: \"\" // 存储用户输入的验证码\n        };\n    },\n    methods: {\n        // 清除邮箱输入框的内容\n        clear_email() {\n            this.email = \"\";\n        },\n        // 清除密码输入框的内容\n        clear_password() {\n            this.password = \"\";\n        },\n        // 跳转到注册页面\n        free_register() {\n            this.$router.push(\"/Register\");\n        },\n        // 登陆\n        async login() {\n            try {\n                // 使用 this.$axios 发送 POST 请求\n                const response = await this.$axios.post(\n                    \"/login\", // 相对路径，会自动拼接 baseURL\n                    { email: this.email, password: this.password },\n                    { headers: { 'Content-Type': 'application/json' } }\n                );\n\n                if (response.data.success) {\n                    // ✅ 关键修改：直接使用 login 接口返回的完整用户数据\n                    // 并且 dispatch 到 Vuex store\n\n                    // console.log('login======', response.data.user)\n                    this.$store.dispatch('loginSuccess', response.data.user);\n\n                    this.$store.dispatch('error/addError', {\n                        msg: '登录成功',\n                        type: 'success'\n                    });\n\n                    // 登录成功后，直接跳转到 /Home\n                    // 导航守卫会处理任何进一步的重定向逻辑（例如，如果用户已登录仍尝试访问登录页）\n                    this.$router.push(\"/Home\");\n\n                } else {\n                    // 根据后端返回的错误码或消息进行处理\n                    let errorMessage = '登录失败';\n                    if (response.data.message) {\n                        errorMessage = response.data.message;\n                    } else if (response.status === 410) {\n                        errorMessage = '邮箱未注册或账号被禁用';\n                    } else if (response.status === 411) {\n                        errorMessage = '密码错误';\n                    }\n                    this.$store.dispatch('error/addError', {\n                        msg: errorMessage,\n                        type: 'error'\n                    });\n                    console.log(errorMessage);\n                }\n            } catch (error) {\n                // 处理网络错误或服务器异常\n                const errorMessage = error.response?.data?.message || '网络错误，请稍后重试';\n                this.$store.dispatch('error/addError', {\n                    msg: errorMessage,\n                    type: 'error'\n                });\n                this.err = error\n                console.error(errorMessage);\n            }\n        },\n        // 忘记密码功能\n        async forgotPassword() {\n            if (!this.email) {\n                this.$store.dispatch('error/addError', {\n                    msg: '请输入您的邮箱地址',\n                    type: 'error'\n                });\n                return;\n            }\n\n            try {\n                // 1. 发送验证码请求\n                const sendCodeResponse = await this.$axios.post(\"/send-code-for-forgot-password\",\n                    { email: this.email },\n                    { withCredentials: true }\n                );\n\n                if (!sendCodeResponse.data.success) {\n                    this.$store.dispatch('error/addError', {\n                        msg: sendCodeResponse.data.message || '发送验证码失败',\n                        type: 'error'\n                    });\n                    return;\n                }\n\n                this.$store.dispatch('error/addError', {\n                    msg: '验证码已发送',\n                    type: 'success'\n                });\n\n                // 2. 显示模态框，让用户输入验证码\n                this.showVerificationModal = true;\n\n            } catch (error) {\n                console.error('忘记密码流程出错:', error);\n                this.$store.dispatch('error/addError', {\n                    msg: error.response?.data?.message || '处理忘记密码请求出错，请稍后重试',\n                    type: 'error'\n                });\n            }\n        },\n        // 在模态框中点击确定按钮后验证验证码\n        async verifyCodeFromModal() {\n            if (!this.userVerificationCode) {\n                this.$store.dispatch('error/addError', {\n                    msg: '请输入验证码',\n                    type: 'error'\n                });\n                return;\n            }\n\n            try {\n                // 3. 验证验证码\n                const verifyCodeResponse = await axios.post(\n                    \"/verify-code-for-forgot-password\",\n                    { email: this.email, code: this.userVerificationCode },\n                    { withCredentials: true }\n                );\n\n                if (verifyCodeResponse.data.success) {\n                    // this.$store.dispatch('error/addError', {\n                    //     msg: '验证码验证成功，正在跳转...',\n                    //     type: 'success'\n                    // });\n                    this.showVerificationModal = false; // 关闭模态框\n                    this.userVerificationCode = ''; // 清空输入的验证码\n                    // 4. 如果验证成功，导航到 ForgetPassword 页面\n                    this.$router.push({\n                        path: \"/ForgetPassword\",\n                        query: { email: this.email }\n                    });\n                } else {\n                    this.$store.dispatch('error/addError', {\n                        msg: verifyCodeResponse.data.message || '验证码验证失败',\n                        type: 'error'\n                    });\n                }\n            } catch (error) {\n                console.error('验证码验证出错:', error);\n                this.$store.dispatch('error/addError', {\n                    msg: error.response?.data?.message || '验证码验证时出错，请稍后重试',\n                    type: 'error'\n                });\n            }\n        },\n        // 取消验证码输入\n        cancelVerification() {\n            this.showVerificationModal = false; // 关闭模态框\n            this.userVerificationCode = ''; // 清空输入的验证码\n            this.$store.dispatch('error/addError', {\n                msg: '您已取消验证码输入',\n                type: 'info'\n            });\n        }\n    }\n};\n</script>\n\n<style scoped lang=\"less\">\n/* --- 验证码模态框样式 --- */\n.verification-modal-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.5);\n    /* 半透明遮罩 */\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 1000;\n    /* 确保在最上层 */\n}\n\n.verification-modal-content {\n    background: white;\n    padding: 30px;\n    border-radius: 10px;\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\n    width: 90%;\n    max-width: 400px;\n    text-align: center;\n}\n\n.verification-modal-content h3 {\n    margin-top: 0;\n    font-size: 22px;\n    color: #333;\n    margin-bottom: 15px;\n}\n\n.verification-modal-content p {\n    font-size: 16px;\n    color: #555;\n    margin-bottom: 20px;\n    line-height: 1.5;\n}\n\n.verification-modal-content input {\n    width: calc(100% - 20px);\n    /* 减去内边距 */\n    padding: 10px;\n    margin-bottom: 20px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    font-size: 18px;\n    text-align: center;\n    /* 验证码居中显示 */\n    letter-spacing: 5px;\n    /* 增加字符间距 */\n    box-sizing: border-box;\n}\n\n.verification-modal-content input:focus {\n    border-color: #007bff;\n    outline: none;\n    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);\n}\n\n.modal-buttons button {\n    padding: 10px 20px;\n    margin: 0 10px;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    font-size: 16px;\n    transition: background-color 0.3s ease;\n}\n\n.modal-buttons button:first-child {\n    background-color: #007bff;\n    color: white;\n}\n\n.modal-buttons button:first-child:hover {\n    background-color: #0056b3;\n}\n\n.modal-buttons button:last-child {\n    background-color: #e0e0e0;\n    color: #333;\n}\n\n.modal-buttons button:last-child:hover {\n    background-color: #c7c7c7;\n}\n</style>\n\n<style scoped lang=\"less\" data-login-container>\n.login-container {\n    position: fixed;\n    // top: @nav;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    padding: 20px;\n    height: 100%;\n    // height: calc(100vh - @nav);\n    background-color: @240_240_240;\n}\n\n.copy_nav_status {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: @nav_status;\n    background-color: transparent;\n    /* 状态栏背景色 */\n}\n</style>\n\n<style scoped lang=\"less\" data-login-from>\nform {\n    margin-top: calc(@nav_status + @margin_top_20);\n    padding: 20px;\n    width: 100%;\n    height: fit-content;\n    background-color: white;\n    border-radius: @borderRadius26;\n    box-shadow: 0px 0px 16px rgba(0, 0, 0, 0.15);\n}\n\n.dl-zc-title {\n    font-size: @fontSize24;\n    width: 100%;\n    text-align: center;\n    color: @dodgerblue;\n    font-weight: @fontWeight_bold;\n}\n\n.dl-zc-field {\n    position: relative;\n    width: 100%;\n    height: @dl_zc_field;\n    background-color: @240_240_240;\n    border-radius: @borderRadius12;\n    overflow: hidden;\n}\n\n[data-dl-zc=\"1\"],\n[data-dl-zc=\"3\"],\n[data-dl-zc=\"2\"],\n[data-dl-zc=\"4\"] {\n    margin-top: 20px;\n}\n\n.dl-zc-input {\n    outline: none;\n    border: none;\n    width: 70%;\n    height: 100%;\n    border-radius: @borderRadius12;\n    padding-left: 14px;\n    font-size: @fontSize16;\n    font-weight: @fontWeight_400;\n    background-color: @240_240_240;\n}\n\n// .dl-zc-input:focus {\n//     background-color: @230_230_230;\n// }\n\n.dl-btn {\n    font-size: @fontSize16;\n    color: @white;\n    font-weight: @fontWeight_bold;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    border-radius: @borderRadius12;\n    background-color: @dodgerblue;\n}\n\n[data-dl-zc=\"4\"] {\n    height: auto !important;\n    background-color: transparent !important;\n}\n\n.dl-account-nformation {\n    width: 100%;\n    padding: 0px 10px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    color: @dodgerblue;\n}\n</style>\n\n<style scoped lang=\"less\" data-svg>\n.eyes {\n    position: absolute;\n    right: 10px;\n    top: calc((@dl_zc_field - 24px) / 2);\n    width: 24px;\n    height: 24px;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=581af061&scoped=true\"\nimport script from \"./login.vue?vue&type=script&lang=js\"\nexport * from \"./login.vue?vue&type=script&lang=js\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=581af061&prod&scoped=true&lang=less\"\nimport style1 from \"./login.vue?vue&type=style&index=1&id=581af061&prod&scoped=true&lang=less&data-login-container=true\"\nimport style2 from \"./login.vue?vue&type=style&index=2&id=581af061&prod&scoped=true&lang=less&data-login-from=true\"\nimport style3 from \"./login.vue?vue&type=style&index=3&id=581af061&prod&scoped=true&lang=less&data-svg=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"581af061\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"register-container\",attrs:{\"autocapitalize\":\"off\",\"autocomplete\":\"off\"}},[_c('div',{staticClass:\"copy_nav_status\"}),_c('form',{attrs:{\"id\":\"form\",\"autocapitalize\":\"off\",\"autocomplete\":\"off\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.register.apply(null, arguments)}}},[_c('div',{staticClass:\"dl-zc-title\"},[_c('div',{staticClass:\"back_login\",on:{\"click\":_vm.back_login_fn}},[_c('div',{staticClass:\"back_login_inner\"},[_c('van-icon',{attrs:{\"name\":\"arrow-left\"}})],1)]),_c('div',[_vm._v(\"注册账号\")])]),_c('div',{staticClass:\"dl-zc-field\",attrs:{\"data-dl-zc\":\"1\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],staticClass:\"dl-zc-input\",attrs:{\"type\":\"email\",\"name\":\"email\",\"maxlength\":\"30\",\"placeholder\":\"请输入邮箱地址\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing)return;_vm.email=$event.target.value}}}),_c('Clear',{on:{\"click\":_vm.clear_email}})],1),_c('div',{staticClass:\"dl-zc-field\",attrs:{\"data-dl-zc\":\"2\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],staticClass:\"dl-zc-input\",attrs:{\"type\":\"password\",\"name\":\"password\",\"maxlength\":\"30\",\"placeholder\":\"请输入密码\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.password=$event.target.value}}}),_c('Clear',{on:{\"click\":_vm.clear_password}})],1),_c('div',{staticClass:\"dl-zc-field\",attrs:{\"data-dl-zc\":\"3\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.confirmPassword),expression:\"confirmPassword\"}],staticClass:\"dl-zc-input\",attrs:{\"type\":\"password\",\"name\":\"confirmPassword\",\"maxlength\":\"30\",\"placeholder\":\"请再次输入密码\"},domProps:{\"value\":(_vm.confirmPassword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.confirmPassword=$event.target.value}}}),_c('Clear',{on:{\"click\":_vm.clear_confirmPassword}})],1),_c('div',{staticClass:\"dl-zc-field\",attrs:{\"data-dl-zc\":\"4\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.verificationCode),expression:\"verificationCode\"}],staticClass:\"dl-zc-input\",attrs:{\"type\":\"text\",\"name\":\"verificationCode\",\"maxlength\":\"6\",\"placeholder\":\"请输入验证码\"},domProps:{\"value\":(_vm.verificationCode)},on:{\"input\":function($event){if($event.target.composing)return;_vm.verificationCode=$event.target.value}}}),_c('div',{staticClass:\"ver-code\",class:{ disabled: _vm.codeSending },attrs:{\"id\":\"getCodeBtn\"},on:{\"click\":_vm.getVerificationCode}},[_vm._v(_vm._s(_vm.codeSending ? _vm.countdown + \"秒后重发\" : \"获取验证码\"))])]),_c('div',{staticClass:\"dl-zc-field\",attrs:{\"data-dl-zc\":\"5\"}},[_c('button',{staticClass:\"zc-btn\",attrs:{\"id\":\"register-btn\",\"type\":\"submit\",\"disabled\":!_vm.canRegister},on:{\"click\":function($event){$event.preventDefault();return _vm.register.apply(null, arguments)}}},[_vm._v(\"注册\")])]),_c('div',{staticClass:\"dl-zc-field\",attrs:{\"data-dl-zc\":\"6\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.agreementChecked),expression:\"agreementChecked\"}],attrs:{\"type\":\"checkbox\",\"name\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.agreementChecked)?_vm._i(_vm.agreementChecked,null)>-1:(_vm.agreementChecked)},on:{\"change\":function($event){var $$a=_vm.agreementChecked,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.agreementChecked=$$a.concat([$$v]))}else{$$i>-1&&(_vm.agreementChecked=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.agreementChecked=$$c}}}}),_vm._m(0)])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"zc-Agreement\"},[_vm._v(\" 已阅读并同意以下协议 \"),_c('span',{staticClass:\"xy\",staticStyle:{\"margin-left\":\"4px\"}},[_vm._v(\"《注册协议》\")]),_vm._v(\"、 \"),_c('span',{staticClass:\"xy\"},[_vm._v(\"《用户协议》\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"register-container\" autocapitalize=\"off\" autocomplete=\"off\">\n        <!-- 状态栏 -->\n        <div class=\"copy_nav_status\"></div>\n\n        <!-- 注册表单 -->\n        <form id=\"form\" autocapitalize=\"off\" autocomplete=\"off\" @submit.prevent=\"register\">\n            <div class=\"dl-zc-title\">\n                <div class=\"back_login\" @click=\"back_login_fn\">\n                    <div class=\"back_login_inner\">\n                        <van-icon name=\"arrow-left\" />\n                    </div>\n                </div>\n                <div>注册账号</div>\n            </div>\n            <!-- 邮箱输入 -->\n            <div class=\"dl-zc-field\" data-dl-zc=\"1\">\n                <input v-model=\"email\" type=\"email\" name=\"email\" class=\"dl-zc-input\" maxlength=\"30\"\n                    placeholder=\"请输入邮箱地址\" />\n                <Clear @click=\"clear_email\"></Clear>\n            </div>\n            <!-- 密码输入 -->\n            <div class=\"dl-zc-field\" data-dl-zc=\"2\">\n                <input v-model=\"password\" type=\"password\" name=\"password\" class=\"dl-zc-input\" maxlength=\"30\"\n                    placeholder=\"请输入密码\" />\n                <Clear @click=\"clear_password\"></Clear>\n            </div>\n            <!-- 再次输入密码 -->\n            <div class=\"dl-zc-field\" data-dl-zc=\"3\">\n                <input v-model=\"confirmPassword\" type=\"password\" name=\"confirmPassword\" class=\"dl-zc-input\"\n                    maxlength=\"30\" placeholder=\"请再次输入密码\" />\n                <Clear @click=\"clear_confirmPassword\"></Clear>\n            </div>\n            <!-- 邮箱验证码 -->\n            <div class=\"dl-zc-field\" data-dl-zc=\"4\">\n                <input v-model=\"verificationCode\" type=\"text\" name=\"verificationCode\" class=\"dl-zc-input\" maxlength=\"6\"\n                    placeholder=\"请输入验证码\" />\n                <div class=\"ver-code\" id=\"getCodeBtn\" @click=\"getVerificationCode\" :class=\"{ disabled: codeSending }\">{{\n                    codeSending ? countdown + \"秒后重发\" : \"获取验证码\" }}</div>\n            </div>\n            <!-- 注册按钮 -->\n            <div class=\"dl-zc-field\" data-dl-zc=\"5\">\n                <button class=\"zc-btn\" id=\"register-btn\" type=\"submit\" :disabled=\"!canRegister\"\n                    @click.prevent=\"register\">注册</button>\n            </div>\n            <!-- 同意协议 -->\n            <div class=\"dl-zc-field\" data-dl-zc=\"6\">\n                <input type=\"checkbox\" v-model=\"agreementChecked\" name=\"checkbox\" />\n                <div class=\"zc-Agreement\">\n                    已阅读并同意以下协议\n                    <span class=\"xy\" style=\"margin-left: 4px;\">《注册协议》</span>、\n                    <span class=\"xy\">《用户协议》</span>\n                </div>\n            </div>\n        </form>\n    </div>\n</template>\n\n<script>\n// register.vue\nimport axios from \"axios\"; // 引入axios\n\nexport default {\n    name: \"Register\",\n    data() {\n        return {\n            email: \"\", // 存储邮箱\n            password: \"\", // 用于绑定密码输入框的值\n            confirmPassword: \"\", // 用于绑定再次输入密码输入框的值\n\n            verificationCode: \"\",\n            agreementChecked: false,\n            codeSending: false,\n            countdown: 0,\n            countdownTimer: null\n        };\n    },\n    computed: {\n        canRegister() {\n            return (\n                this.email &&\n                this.password &&\n                this.confirmPassword &&\n                this.verificationCode &&\n                this.password === this.confirmPassword &&\n                this.agreementChecked\n            );\n        }\n    },\n    methods: {\n        // 清除邮箱输入框的内容\n        clear_email() {\n            this.email = \"\";\n            // console.log(\"邮箱已清除\");\n        },\n        // 清除密码输入框的内容\n        clear_password() {\n            this.password = \"\";\n        },\n        // 清除再次输入密码输入框的内容\n        clear_confirmPassword() {\n            this.confirmPassword = \"\";\n        },\n        // 返回登录页面\n        back_login_fn() {\n            this.$router.go(-1)\n        },\n        async getVerificationCode() {\n            if (this.codeSending) return;\n            if (!this.email) {\n                console.log(\"请输入邮箱地址\");\n                return;\n            }\n            try {\n                this.codeSending = true;\n                this.countdown = 60; // 60秒倒计时\n                this.startCountdown();\n\n                const response = await axios.post(\n                    \"http://localhost:3081/api/send-code\",\n                    { email: this.email },\n                    { withCredentials: true }\n                );\n\n                console.log(response.data.message || \"验证码已发送\");\n            } catch (error) {\n                console.log(\n                    \"发送验证码失败：\" +\n                    (error.response?.data?.message || error.message)\n                );\n                this.codeSending = false;\n                clearInterval(this.countdownTimer);\n            }\n        },\n        startCountdown() {\n            this.countdownTimer = setInterval(() => {\n                if (this.countdown > 0) {\n                    this.countdown--;\n                } else {\n                    clearInterval(this.countdownTimer);\n                    this.codeSending = false;\n                }\n            }, 1000);\n        },\n        async register() {\n            if (!this.canRegister) {\n                console.log(\"请填写完整信息，且两次密码一致，勾选协议\");\n                return;\n            }\n            try {\n                // 验证验证码\n                let verifyRes = await axios.post(\n                    \"http://localhost:3081/api/verify-code\",\n                    {\n                        email: this.email,\n                        code: this.verificationCode\n                    },\n                    { withCredentials: true }\n                );\n\n                if (!verifyRes.data.success) {\n                    console.log(verifyRes.data.message || \"验证码验证失败\");\n                    return;\n                }\n\n                // 注册请求\n                let registerRes = await axios.post(\n                    \"http://localhost:3081/api/register\",\n                    {\n                        email: this.email,\n                        password: this.password\n                    },\n                    { withCredentials: true }\n                );\n\n                if (registerRes.data.success) {\n                    console.log(\"注册成功，跳转登录页\");\n                    // 注册成功跳转\n                    this.$router.push({ name: \"Login\" });\n                } else {\n                    console.log(registerRes.data.message || \"注册失败\");\n                }\n            } catch (error) {\n                console.log(\n                    \"注册异常：\" +\n                    (error.response?.data?.message || error.message)\n                );\n            }\n        }\n    },\n    beforeDestroy() {\n        clearInterval(this.countdownTimer);\n    }\n};\n</script>\n\n<style scoped lang=\"less\" data-register-container>\n.register-container {\n    position: fixed;\n    // top: @nav;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    padding: 20px;\n    // height: calc(100vh - @nav);\n    height: 100%;\n    background-color: @240_240_240;\n}\n\n.copy_nav_status {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: @nav_status;\n    // background-color: red;\n    /* 状态栏背景色 */\n}\n</style>\n\n<style scoped lang=\"less\" data-register-from>\nbutton {\n    outline: none;\n    border: none;\n}\n\nform {\n    margin-top: calc(@nav_status + @margin_top_20);\n    padding: 20px;\n    width: 100%;\n    height: fit-content;\n    background-color: white;\n    border-radius: @borderRadius26;\n        box-shadow: 0px 0px 16px rgba(0, 0, 0, 0.15);\n}\n\n@dl_zc_title: 34px;\n\n.dl-zc-title {\n    position: relative;\n    font-size: @fontSize24;\n    width: 100%;\n    height: @dl_zc_title;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: @dodgerblue;\n    font-weight: @fontWeight_bold;\n}\n\n.back_login {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: @dl_zc_title;\n    height: 100%;\n    // background-color: blue;\n}\n\n.back_login_inner {\n    height: 100%;\n    width: 100%;\n    // background-color: blue;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n}\n\n.dl-zc-field {\n    position: relative;\n    width: 100%;\n    height: @dl_zc_field;\n    background-color: @240_240_240;\n    border-radius: @borderRadius12;\n    overflow: hidden;\n}\n\n[data-dl-zc=\"1\"],\n[data-dl-zc=\"2\"],\n[data-dl-zc=\"3\"],\n[data-dl-zc=\"4\"],\n[data-dl-zc=\"5\"],\n[data-dl-zc=\"6\"] {\n    margin-top: 20px;\n}\n\n.dl-zc-input {\n    outline: none;\n    border: none;\n    width: 70%;\n    height: 100%;\n    border-radius: @borderRadius12;\n    padding-left: 14px;\n    font-size: @fontSize16;\n    font-weight: @fontWeight_400;\n    background-color: @240_240_240;\n}\n\n// .dl-zc-input:focus {\n//     background-color: @230_230_230;\n// }\n\n[data-dl-zc=\"4\"] {\n    position: relative;\n}\n\n.ver-code {\n    color: @dodgerblue;\n    position: absolute;\n    top: calc((@dl_zc_field - 20px) / 2);\n    right: 10px;\n    height: 20px;\n}\n\n.zc-btn {\n    font-size: @fontSize16;\n    color: @white;\n    font-weight: @fontWeight_bold;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    border-radius: @borderRadius12;\n    background-color: @dodgerblue;\n}\n\n[data-dl-zc=\"6\"] {\n    display: flex;\n    align-items: flex-start;\n    padding: 0px 10px;\n    background-color: transparent !important;\n}\n\ninput[name=\"checkbox\"] {\n    transform: scale(1);\n    /* 放大1倍 */\n    margin-top: 4px;\n}\n\n.zc-Agreement {\n    margin-left: 10px;\n}\n\n.xy {\n    color: @dodgerblue;\n}\n</style>\n\n<style scoped lang=\"less\" data-svg>\n.eyes {\n    position: absolute;\n    right: 10px;\n    top: calc((@dl_zc_field - 24px) / 2);\n    width: 24px;\n    height: 24px;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./register.vue?vue&type=template&id=271316cd&scoped=true\"\nimport script from \"./register.vue?vue&type=script&lang=js\"\nexport * from \"./register.vue?vue&type=script&lang=js\"\nimport style0 from \"./register.vue?vue&type=style&index=0&id=271316cd&prod&scoped=true&lang=less&data-register-container=true\"\nimport style1 from \"./register.vue?vue&type=style&index=1&id=271316cd&prod&scoped=true&lang=less&data-register-from=true\"\nimport style2 from \"./register.vue?vue&type=style&index=2&id=271316cd&prod&scoped=true&lang=less&data-svg=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"271316cd\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"Forget_Password-container\"},[_c('div',{staticClass:\"head\"},[_vm._v(\"设置新密码\")]),_c('form',{attrs:{\"autocapitalize\":\"off\",\"autocomplete\":\"off\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.submitNewPassword.apply(null, arguments)}}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"content-item\"},[_c('div',{staticClass:\"text\"},[_vm._v(\"新密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.forget_newPassword),expression:\"forget_newPassword\"}],attrs:{\"type\":\"password\",\"name\":\"forget_new_password\",\"placeholder\":\"请输入新密码\",\"required\":\"\"},domProps:{\"value\":(_vm.forget_newPassword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.forget_newPassword=$event.target.value}}})])]),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"content-item\"},[_c('div',{staticClass:\"text\"},[_vm._v(\"确认密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.forget_confirmPassword),expression:\"forget_confirmPassword\"}],attrs:{\"type\":\"password\",\"name\":\"forget_confirm_password\",\"placeholder\":\"请再次输入新密码\",\"required\":\"\"},domProps:{\"value\":(_vm.forget_confirmPassword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.forget_confirmPassword=$event.target.value}}})])]),_c('div',{staticClass:\"btn_box\"},[_c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"disabled\":!_vm.forget_newPassword || !_vm.forget_confirmPassword || _vm.forget_newPassword !== _vm.forget_confirmPassword}},[_vm._v(\"提交\")])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"Forget_Password-container\">\n        <div class=\"head\">设置新密码</div>\n        <form @submit.prevent=\"submitNewPassword\" autocapitalize=\"off\" autocomplete=\"off\">\n            <div class=\"content\">\n                <div class=\"content-item\">\n                    <div class=\"text\">新密码</div>\n                    <input type=\"password\" v-model=\"forget_newPassword\" name=\"forget_new_password\" placeholder=\"请输入新密码\" required>\n                </div>\n            </div>\n\n            <div class=\"content\">\n                <div class=\"content-item\">\n                    <div class=\"text\">确认密码</div>\n                    <input type=\"password\" v-model=\"forget_confirmPassword\" name=\"forget_confirm_password\" placeholder=\"请再次输入新密码\" required>\n                </div>\n            </div>\n            <div class=\"btn_box\">\n                <button type=\"submit\" class=\"submit\"\n                    :disabled=\"!forget_newPassword || !forget_confirmPassword || forget_newPassword !== forget_confirmPassword\">提交</button>\n            </div>\n        </form>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n    name: 'ForgetPassword',\n    data() {\n        return {\n            email: this.$route.query.email || '', // 从路由查询参数获取邮箱\n            forget_newPassword: '',\n            forget_confirmPassword: ''\n        };\n    },\n    async created() {\n        // 页面加载时检查是否已通过忘记密码验证\n        // try {\n        //     const response = await axios.get('/check-forgot-password-verification', {\n        //         withCredentials: true\n        //     });\n        //     // 如果后端没有返回已验证状态，或者验证的邮箱不匹配，则重定向\n        //     if (!response.data.verified || response.data.email !== this.email) {\n        //         this.$store.dispatch('error/addError', {\n        //             msg: '请先完成密码重置验证流程',\n        //             type: 'error'\n        //         });\n        //         this.$router.replace('/Login'); // 如果未验证，则重定向到登录页面\n        //     }\n        // } catch (error) {\n        //     console.error('检查忘记密码验证失败:', error);\n        //     this.$store.dispatch('error/addError', {\n        //         msg: error.response?.data?.message || '验证状态检查失败，请重试',\n        //         type: 'error'\n        //     });\n        //     this.$router.replace('/Login');\n        // }\n    },\n    methods: {\n        async submitNewPassword() {\n            // 改进：合并空密码检查\n            if (!this.forget_newPassword) { // 检查是否为空字符串\n                this.$store.dispatch('error/addError', {\n                    msg: '请输入新密码',\n                    type: 'error'\n                });\n                return;\n            }\n\n            if (!this.forget_confirmPassword) { // 检查是否为空字符串\n                this.$store.dispatch('error/addError', {\n                    msg: '请再次输入新密码', // 修正提示为“请再次输入新密码”\n                    type: 'error'\n                });\n                return;\n            }\n\n            if (this.forget_newPassword !== this.forget_confirmPassword) {\n                this.$store.dispatch('error/addError', {\n                    msg: '两次输入的密码不一致',\n                    type: 'error'\n                });\n                return;\n            }\n            if (this.forget_newPassword.length < 6) {\n                this.$store.dispatch('error/addError', {\n                    msg: '新密码不能少于6位',\n                    type: 'error'\n                });\n                return;\n            }\n\n            try {\n                const response = await axios.post('http://localhost:3081/api/set-new-password-forgotten', {\n                    email: this.email,\n                    newPassword: this.forget_newPassword\n                }, {\n                    withCredentials: true\n                });\n\n                if (response.data.success) {\n                    this.$store.dispatch('error/addError', {\n                        msg: '密码重置成功，请重新登录',\n                        type: 'success'\n                    });\n                    // 密码重置成功后，跳转到登录页面\n                    this.$router.push('/Login');\n                } else {\n                    this.$store.dispatch('error/addError', {\n                        msg: response.data.message || '密码重置失败',\n                        type: 'error'\n                    });\n                }\n            } catch (error) {\n                console.error('重置密码请求出错:', error);\n                this.$store.dispatch('error/addError', {\n                    msg: error.response?.data?.message || '网络错误，重置密码失败',\n                    type: 'error'\n                });\n            }\n        }\n    }\n};\n</script>\n\n<style scoped lang='less'>\n.Forget_Password-container {\n    width: 100%;\n    height: 100%;\n    background-color: transparent;\n    display: flex;\n    flex-direction: column;\n}\n\n.head {\n    width: 100%;\n    padding: 40px 20px 0px 20px;\n    background-color: transparent;\n    font-size: @fontSize24;\n}\n\n.content {\n    width: 100%;\n    padding: 0px 20px;\n    background-color: transparent;\n    margin: 20px 0px;\n}\n\n.content-item {\n    height: 40px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    // background-color: blue;\n    border-bottom: 1px solid @140_140_140;\n}\n\n.text {\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    height: 100%;\n    width: 80px;\n    font-size: @fontSize16;\n    // background-color: white;\n}\n\n.content input {\n    flex: 1;\n    height: 100%;\n    padding: 0 10px;\n    font-size: @fontSize16;\n    background-color: transparent;\n}\n\n.btn_box {\n    width: 100%;\n    padding: 0px 20px;\n    display: flex;\n    justify-content: center;\n    margin-top: 20px;\n}\n\n.submit {\n    width: 100%;\n    height: 40px;\n    background-color: rgb(30, 144, 255);\n    color: white;\n    font-size: 16px;\n    border: none;\n    border-radius: 5px;\n}\n\n.submit:disabled {\n    background-color: #cccccc; /* 禁用状态的背景色 */\n    cursor: not-allowed; /* 禁用状态的光标 */\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ForgetPassword.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ForgetPassword.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ForgetPassword.vue?vue&type=template&id=55615f11&scoped=true\"\nimport script from \"./ForgetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ForgetPassword.vue?vue&type=script&lang=js\"\nimport style0 from \"./ForgetPassword.vue?vue&type=style&index=0&id=55615f11&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55615f11\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"personalInformation-container\"},[_c('Header',{attrs:{\"header_name\":_vm.header_name}}),_c('ul',[_c('li',{on:{\"click\":function($event){return _vm.handleAvatarClick('select')}}},[_c('div',{staticClass:\"text\"},[_vm._v(\"头像\")]),_c('div',{staticClass:\"user-image\"},[_c('img',{attrs:{\"src\":_vm.displayAvatar,\"alt\":\"用户头像\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleAvatarClick('view')}}})]),_c('div',{staticClass:\"forward_box\"},[_c('Forward')],1),_c('input',{ref:\"avatarInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.onAvatarSelected}})]),_c('li',{on:{\"click\":function($event){return _vm.$router.push('/UserName')}}},[_c('div',{staticClass:\"text\"},[_vm._v(\"名字\")]),_c('div',{staticClass:\"item\"},[_vm._v(_vm._s(_vm.currentUser ? _vm.currentUser.name : ''))]),_c('div',{staticClass:\"forward_box\"},[_c('Forward')],1)]),_c('li',{on:{\"click\":function($event){return _vm.$router.push('/UserGender')}}},[_c('div',{staticClass:\"text\"},[_vm._v(\"性别\")]),_c('div',{staticClass:\"item\"},[_vm._v(_vm._s(_vm.currentUser ? _vm.currentUser.gender : ''))]),_c('div',{staticClass:\"forward_box\"},[_c('Forward')],1)]),_c('li',{on:{\"click\":function($event){return _vm.$router.push('/UserArea')}}},[_c('div',{staticClass:\"text\"},[_vm._v(\"地区\")]),_c('div',{staticClass:\"item\"},[_vm._v(_vm._s(_vm.currentUser ? _vm.currentUser.region : ''))]),_c('div',{staticClass:\"forward_box\"},[_c('Forward')],1)]),_c('li',{on:{\"click\":function($event){return _vm.$router.push('/UserNickName')}}},[_c('div',{staticClass:\"text\"},[_vm._v(\"h5-APP号\")]),_c('div',{staticClass:\"item\"},[_vm._v(_vm._s(_vm.currentUser ? _vm.currentUser.nickname : ''))]),_c('div',{staticClass:\"forward_box\"},[_c('Forward')],1)])]),(_vm.showCropper)?_c('div',{staticClass:\"cropper-modal\"},[_c('div',{staticClass:\"cropper-content\"},[_c('cropper',{ref:\"cropper\",staticClass:\"cropper\",attrs:{\"src\":_vm.imageToCrop,\"stencil-props\":{ aspectRatio: 1 / 1 }}}),_c('div',{staticClass:\"cropper-actions\"},[_c('button',{on:{\"click\":_vm.cancelCrop}},[_vm._v(\"取消\")]),_c('button',{on:{\"click\":_vm.confirmCrop}},[_vm._v(\"确认裁剪\")])])],1)]):_vm._e(),(_vm.showImageViewer)?_c('div',{staticClass:\"image-viewer-modal\",on:{\"click\":_vm.closeImageViewer}},[_c('img',{staticClass:\"full-size-image\",attrs:{\"src\":_vm.currentImageForViewer,\"alt\":\"User Avatar\"}})]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"personalInformation-container\">\n        <Header :header_name=\"header_name\"></Header>\n\n        <ul>\n            <li @click=\"handleAvatarClick('select')\">\n                <div class=\"text\">头像</div>\n                <div class=\"user-image\">\n                    <img :src=\"displayAvatar\" alt=\"用户头像\" @click.stop=\"handleAvatarClick('view')\">\n                </div>\n                <div class=\"forward_box\">\n                    <Forward></Forward>\n                </div>\n                <input ref=\"avatarInput\" type=\"file\" accept=\"image/*\" style=\"display: none\"\n                    @change=\"onAvatarSelected\" />\n            </li>\n            <li @click=\"$router.push('/UserName')\">\n                <div class=\"text\">名字</div>\n                <div class=\"item\">{{ currentUser ? currentUser.name : '' }}</div>\n                <div class=\"forward_box\">\n                    <Forward></Forward>\n                </div>\n            </li>\n            <li @click=\"$router.push('/UserGender')\">\n                <div class=\"text\">性别</div>\n                <div class=\"item\">{{ currentUser ? currentUser.gender : '' }}</div>\n                <div class=\"forward_box\">\n                    <Forward></Forward>\n                </div>\n            </li>\n            <li @click=\"$router.push('/UserArea')\">\n                <div class=\"text\">地区</div>\n                <div class=\"item\">{{ currentUser ? currentUser.region : '' }}</div>\n                <div class=\"forward_box\">\n                    <Forward></Forward>\n                </div>\n            </li>\n            <li @click=\"$router.push('/UserNickName')\">\n                <div class=\"text\">h5-APP号</div>\n                <!-- 这里的 inckname 会作为 h5-APP号 和用户的名字，在Friends.vue 里面排列好友 -->\n                <div class=\"item\">{{ currentUser ? currentUser.nickname : '' }}</div>\n                <div class=\"forward_box\">\n                    <Forward></Forward>\n                </div>\n            </li>\n        </ul>\n\n        <div v-if=\"showCropper\" class=\"cropper-modal\">\n            <div class=\"cropper-content\">\n                <cropper ref=\"cropper\" :src=\"imageToCrop\" :stencil-props=\"{ aspectRatio: 1 / 1 }\" class=\"cropper\" />\n                <div class=\"cropper-actions\">\n                    <button @click=\"cancelCrop\">取消</button>\n                    <button @click=\"confirmCrop\">确认裁剪</button>\n                </div>\n            </div>\n        </div>\n\n        <div v-if=\"showImageViewer\" class=\"image-viewer-modal\" @click=\"closeImageViewer\">\n            <img :src=\"currentImageForViewer\" alt=\"User Avatar\" class=\"full-size-image\">\n        </div>\n    </div>\n</template>\n\n<script>\nimport { Cropper } from 'vue-advanced-cropper';\nimport 'vue-advanced-cropper/dist/style.css';\n\nimport { mapGetters } from 'vuex';\n\nexport default {\n    name: 'PersonalInformation',\n    components: {\n        Cropper,\n    },\n    data() {\n        return {\n            header_name: '个人资料',\n            selectedFile: null,\n            imageToCrop: null, // 用于裁剪的图片 Data URL\n            showCropper: false, // 控制裁剪弹窗的显示\n            showImageViewer: false, // 控制图片查看弹窗的显示\n        };\n    },\n    computed: {\n        ...mapGetters(['currentUser']),\n\n        displayAvatar() {\n            // 1. 如果正在裁剪中，优先显示裁剪器生成的 Base64 数据 URL\n            if (this.imageToCrop && this.showCropper) {\n                return this.imageToCrop;\n            }\n\n            let finalImageUrl = '';\n\n            // 2. 如果 Vuex 中有用户的头像路径\n            if (this.currentUser && this.currentUser.avatar) {\n                const avatarPath = this.currentUser.avatar;\n\n                // **关键修改在这里：判断是否是默认头像的相对路径**\n                if (avatarPath === 'default_user-avator/default.webp') {\n                    // 如果是默认头像的相对路径，直接使用硬编码的完整默认头像 URL，不再拼接\n                    finalImageUrl = 'default_user-avator/default.webp';\n                }\n                // 否则，认为是用户上传的头像（可能是完整的URL，也可能是其他相对路径），需要拼接\n                else if (avatarPath.startsWith('http://') || avatarPath.startsWith('https://')) {\n                    finalImageUrl = avatarPath; // 如果已经是完整 URL，直接用\n                } else {\n                    // 否则，认为是相对路径（用户上传的），需要拼接后端 URL\n                    const cleanPath = avatarPath.startsWith('/') ? avatarPath.substring(1) : avatarPath;\n                    finalImageUrl = `http://localhost:3081/${cleanPath}`;\n                }\n            }\n            // 3. 如果 Vuex 中没有用户头像（不应该发生，但作为兜底），显示默认头像\n            else {\n                finalImageUrl = 'default_user-avator/default.webp';\n            }\n\n            // 4. 为非 Base64 图片添加时间戳，防止缓存\n            if (finalImageUrl && !finalImageUrl.startsWith('data:')) {\n                return `${finalImageUrl}?t=${Date.now()}`;\n            }\n\n            return finalImageUrl; // 返回 Base64 或最终的图片 URL\n        },\n\n        currentImageForViewer() {\n            // 逻辑与 displayAvatar 类似，但通常不需要时间戳\n            if (this.imageToCrop && this.showCropper) {\n                return this.imageToCrop;\n            }\n\n            let finalImageUrl = '';\n            if (this.currentUser && this.currentUser.avatar) {\n                const avatarPath = this.currentUser.avatar;\n                if (avatarPath === 'default_user-avator/default.webp') {\n                    finalImageUrl = 'default_user-avator/default.webp';\n                } else if (avatarPath.startsWith('http://') || avatarPath.startsWith('https://')) {\n                    finalImageUrl = avatarPath;\n                } else {\n                    const cleanPath = avatarPath.startsWith('/') ? avatarPath.substring(1) : avatarPath;\n                    finalImageUrl = `http://localhost:3081/${cleanPath}`;\n                }\n            } else {\n                finalImageUrl = 'default_user-avator/default.webp';\n            }\n            return finalImageUrl;\n        }\n    },\n    methods: {\n        // 处理头像区域的点击事件\n        handleAvatarClick(action) {\n            if (action === 'select') {\n                this.$refs.avatarInput.click();\n            } else if (action === 'view') {\n                if (this.currentUser && this.currentUser.avatar) {\n                    this.showImageViewer = true;\n                }\n            }\n        },\n\n        // 文件选择后的处理\n        onAvatarSelected(event) {\n            const file = event.target.files[0];\n            if (file) {\n                this.selectedFile = file;\n                const reader = new FileReader();\n                reader.onload = (e) => {\n                    this.imageToCrop = e.target.result;\n                    this.showCropper = true;\n                };\n                reader.readAsDataURL(file);\n            }\n            event.target.value = '';\n        },\n\n        // 确认裁剪\n        confirmCrop() {\n            const { canvas } = this.$refs.cropper.getResult();\n            if (canvas) {\n                canvas.toBlob(blob => {\n                    this.uploadAvatar(blob);\n                }, 'image/png');\n                this.showCropper = false;\n                this.imageToCrop = null;\n                this.selectedFile = null;\n            }\n        },\n\n        // 取消裁剪\n        cancelCrop() {\n            this.showCropper = false;\n            this.imageToCrop = null;\n            this.selectedFile = null;\n        },\n\n        // 关闭图片查看器\n        closeImageViewer() {\n            this.showImageViewer = false;\n        },\n\n        // 上传头像（现在接受 Blob 对象）\n        async uploadAvatar(fileBlob) {\n            const formData = new FormData();\n            formData.append('avatar', fileBlob, 'avatar.png');\n\n            try {\n                const res = await this.$axios.post('/user/upload/avatar', formData,\n                    { headers: { 'Content-Type': 'multipart/form-data' } }\n                );\n\n                // ✅ 关键修复：后端返回的字段是 `avatarUrl`，不是 `avatar`\n                if (res.data.success && res.data.avatarUrl) {\n                    this.$store.commit('setCurrentUserAvatar', res.data.avatarUrl); // <-- 使用 avatarUrl\n                    this.selectedFile = null;\n\n                    if (this.$toast) {\n                        console.log('头像上传成功==========', res.data.avatarUrl); // <-- 调试日志\n                        this.$toast.success('头像上传成功');\n                    } else {\n                        alert('头像上传成功！');\n                    }\n                } else {\n                    // 只有当 success 为 false 时，才认为是失败并显示错误信息\n                    if (!res.data.success) {\n                        console.error('头像上传失败:', res.data.message);\n                        this.$toast.fail(res.data.message || '头像上传失败');\n                    } else {\n                        // 这种情况是 success 为 true 但 avatarUrl 不存在，可能是后端逻辑问题\n                        console.warn('头像上传成功但未返回头像URL:', res.data.message);\n                        this.$toast.fail('头像上传成功但图片未更新');\n                    }\n                }\n            } catch (error) {\n                console.error('上传失败', error);\n                if (this.$toast) {\n                    this.$toast.fail('头像上传失败');\n                } else {\n                    alert('头像上传失败！');\n                }\n                this.selectedFile = null;\n            }\n        },\n    },\n};\n</script>\n\n<style scoped lang='less'>\n/* Styles for the cropping modal */\n.cropper-modal {\n    position: fixed;\n    top: @nav_status;\n    left: 0;\n    width: 100%;\n    height: calc(100% - @nav_status);\n    ;\n    background: rgb(100, 100, 100);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 99999;\n    /* Ensure it's on top of other content */\n}\n\n.cropper-content {\n    background: white;\n    border-radius: 8px;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.cropper {\n    width: 100%;\n    /* Adjust cropper size as needed */\n    flex: 1;\n    /* Adjust cropper size as needed */\n    background: #DDD;\n    /* Placeholder background */\n\n    /deep/ .vue-advanced-cropper__image-wrapper {\n        background-color: rgb(50, 50, 50) !important;\n    }\n\n    /deep/ .vue-advanced-cropper__foreground {\n        background: rgba(0, 0, 0, 1);\n    }\n}\n\n.cropper-actions {\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    background-color: rgb(26, 26, 26);\n    padding: 10px 18px 20px 18px;\n    /* Space between buttons */\n}\n\n.cropper-actions button {\n    padding: 8px 15px;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 14px;\n}\n\n.cropper-actions button:first-child {\n    /* Cancel button */\n    background-color: #f0f0f0;\n    color: #333;\n}\n\n.cropper-actions button:last-child {\n    /* Confirm button */\n    background-color: #007bff;\n    color: white;\n}\n\n/* Styles for the image viewer modal */\n.image-viewer-modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgb(100, 100, 100);\n    /* 更深的背景，突出图片 */\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 1001;\n    /* 确保在裁剪弹窗之上，如果同时出现的话 */\n}\n\n.image-viewer-modal .full-size-image {\n    max-width: 95%;\n    max-height: 95%;\n    object-fit: contain;\n    /* 确保图片完整显示 */\n    cursor: pointer;\n    /* 提示可点击关闭 */\n}\n\n/* Existing styles for personal information container */\nul {\n    width: 100%;\n    background-color: white;\n    padding-left: 10px;\n}\n\nli {\n    width: 100%;\n    padding: 12px 10px;\n    background-color: rgb(255, 255, 255);\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n}\n\nli:not(:last-child) {\n    border-bottom: 1px solid rgb(235, 235, 235);\n}\n\n.text {\n    margin-right: auto;\n    font-size: @fontSize14;\n}\n\n.user-image {\n    width: 28px;\n    height: 28px;\n    margin-right: 6px;\n    border-radius: 2px;\n    overflow: hidden;\n}\n\n/* 确保 img 占满 user-image 容器 */\n.user-image img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    /* 裁剪以适应容器 */\n}\n\n.item {\n    height: 24px;\n    margin-right: 10px;\n    border-radius: 2px;\n    overflow: hidden;\n    color: rgb(140, 140, 140);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: @fontSize14;\n}\n\n.forward_box {\n    width: 14px;\n    height: 14px;\n    fill: rgb(140, 140, 140);\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PersonalInformation.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PersonalInformation.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PersonalInformation.vue?vue&type=template&id=698eee92&scoped=true\"\nimport script from \"./PersonalInformation.vue?vue&type=script&lang=js\"\nexport * from \"./PersonalInformation.vue?vue&type=script&lang=js\"\nimport style0 from \"./PersonalInformation.vue?vue&type=style&index=0&id=698eee92&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"698eee92\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"ChangePassword-container\"},[_c('Header',{attrs:{\"header_name\":_vm.header_name}}),_vm._m(0),_c('form',{attrs:{\"autocapitalize\":\"off\",\"autocomplete\":\"off\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.submitCode.apply(null, arguments)}}},[_c('div',{staticClass:\"code-box\"},[_c('div',{staticClass:\"text\"},[_vm._v(\"验证码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.codeInput),expression:\"codeInput\"}],attrs:{\"type\":\"text\",\"maxlength\":\"6\",\"name\":\"ver_code\",\"placeholder\":\"请输入验证码\"},domProps:{\"value\":(_vm.codeInput)},on:{\"input\":function($event){if($event.target.composing)return;_vm.codeInput=$event.target.value}}}),_c('div',{staticClass:\"Re-obtain\",class:{ disabled: _vm.countdown > 0 },on:{\"click\":function($event){_vm.countdown === 0 && _vm.sendCode()}}},[_vm._v(\" \"+_vm._s(_vm.countdown > 0 ? `${_vm.countdown}s后重新获取` : '获取验证码')+\" \")])]),_c('div',{staticClass:\"btn_box\"},[_c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"disabled\":!_vm.codeInput || _vm.codeInput.length !== 6}},[_vm._v(\"提交\")])])])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"head\"},[_vm._v(\"输入邮箱验证码\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"ChangePassword-container\">\n        <Header :header_name=\"header_name\"></Header>\n\n        <div class=\"content\">\n            <div class=\"head\">输入邮箱验证码</div>\n        </div>\n\n        <!-- 先验证验证码，验证码正确 进入 SetNewPassword.vue 否则不显示 SetNewPassword.vue -->\n        <form @submit.prevent=\"submitCode\" autocapitalize=\"off\" autocomplete=\"off\">\n            <div class=\"code-box\">\n                <div class=\"text\">验证码</div>\n                <input type=\"text\" v-model=\"codeInput\" maxlength=\"6\" name=\"ver_code\" placeholder=\"请输入验证码\" />\n                <div class=\"Re-obtain\" @click=\"countdown === 0 && sendCode()\" :class=\"{ disabled: countdown > 0 }\">\n                    {{ countdown > 0 ? `${countdown}s后重新获取` : '获取验证码' }}\n                </div>\n            </div>\n\n            <div class=\"btn_box\">\n                <button type=\"submit\" class=\"submit\" :disabled=\"!codeInput || codeInput.length !== 6\">提交</button>\n            </div>\n        </form>\n\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'ChangePassword',\n    data() {\n        return {\n            header_name: '修改密码',\n            countdown: 0,\n            timer: null,\n            codeInput: ''\n        };\n    },\n    computed: {\n        userEmail() {\n            return this.$store.getters.getUserEmail;\n        }\n    },\n    mounted() {\n        console.log('当前用户邮箱:', this.userEmail);\n    },\n    methods: {\n        // 返回上一页\n        toBack() {\n            this.$router.go(-1);\n        },\n        // 发送验证码\n        async sendCode() {\n            if (!this.userEmail) {\n                alert('无法获取用户邮箱，请重新登录');\n                return;\n            }\n\n            try {\n                const res = await fetch('http://localhost:3081/api/send-code', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    credentials: 'include',\n                    body: JSON.stringify({ email: this.userEmail })\n                });\n                const data = await res.json();\n                if (data.success) {\n                    console.log('验证码已发送至您的邮箱');\n                } else {\n                    alert(data.message);\n                }\n\n                // 开始60秒倒计时\n                this.countdown = 60;\n                this.timer = setInterval(() => {\n                    this.countdown--;\n                    if (this.countdown <= 0) {\n                        clearInterval(this.timer);\n                    }\n                }, 1000);\n            } catch (err) {\n                console.error('发送验证码失败', err);\n                console.log('发送验证码失败，请重试');\n            }\n        },\n        // 提交验证码\n        async submitCode() {\n            const code = this.codeInput;\n\n            if (!this.userEmail) {\n                console.log('无法获取用户邮箱，请重新登录');\n                return;\n            }\n\n            try {\n                const res = await fetch('http://localhost:3081/api/verify-code', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    credentials: 'include',\n                    body: JSON.stringify({\n                        email: this.userEmail,\n                        code\n                    })\n                });\n                const data = await res.json();\n                if (data.success) {\n                    console.log('验证成功');\n                    this.$router.push('/SetNewPassword');\n                } else {\n                    console.log(data.message || '验证码错误');\n                }\n            } catch (err) {\n                console.error('验证码验证失败', err);\n                console.log('验证失败，请重试');\n            }\n        },\n    },\n    beforeDestroy() {\n        if (this.timer) {\n            clearInterval(this.timer);\n        }\n    },\n};\n</script>\n\n\n<style scoped lang=\"less\" data-header>\n.header {\n    width: 100%;\n    height: 36px;\n    background-color: rgb(235, 235, 235);\n    padding: 0px 0.5rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.header-back,\n.header-name,\n.header-more {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: @fontSize16;\n}\n\n.header-back {\n    padding: 8px 8px 8px 0px;\n}\n\n.header-back svg {\n    width: 100%;\n    height: 100%;\n}\n\n.btn_box {\n    width: 100%;\n    padding: 0px 13px;\n    display: flex;\n    justify-content: center;\n    margin-top: 20px;\n}\n\n.submit {\n    width: 100%;\n    height: 40px;\n    background-color: rgb(30, 144, 255);\n    color: white;\n    font-size: 16px;\n    border: none;\n    border-radius: 5px;\n}\n</style>\n\n<style scoped lang='less' data-form>\n.content {\n    width: 100%;\n    background-color: aqua;\n}\n\n.head {\n    width: 100%;\n    padding: 20px;\n    background-color: rgb(255, 255, 255);\n    text-align: center;\n}\n\n.code-box {\n    margin-top: 10px;\n    width: 100%;\n    padding: 10px 16px 10px 14px;\n    font-size: 14px;\n    background-color: rgb(255, 255, 255);\n    display: flex;\n}\n\n.text {\n    margin-right: 20px;\n}\n\ninput {\n    height: 20px;\n    flex: 1;\n    margin-right: auto;\n}\n\ninput::placeholder {\n    color: rgb(200, 200, 200);\n}\n\n.Re-obtain {\n    cursor: pointer;\n    width: auto;\n    color: rgb(30, 144, 255);\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChangePassword.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChangePassword.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChangePassword.vue?vue&type=template&id=5695b427&scoped=true\"\nimport script from \"./ChangePassword.vue?vue&type=script&lang=js\"\nexport * from \"./ChangePassword.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChangePassword.vue?vue&type=style&index=0&id=5695b427&prod&scoped=true&lang=less&data-header=true\"\nimport style1 from \"./ChangePassword.vue?vue&type=style&index=1&id=5695b427&prod&scoped=true&lang=less&data-form=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5695b427\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"NewPassword-container\"},[_c('Header',{attrs:{\"header_name\":_vm.header_name}}),_c('div',{staticClass:\"head\"},[_vm._v(\"设置新密码\")]),_c('form',{attrs:{\"autocapitalize\":\"off\",\"autocomplete\":\"off\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.submitNewPassword.apply(null, arguments)}}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"content-item\"},[_c('div',{staticClass:\"text\"},[_vm._v(\"新密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newPassword),expression:\"newPassword\"}],attrs:{\"type\":\"password\",\"name\":\"new_password\",\"placeholder\":\"请输入新密码\",\"required\":\"\"},domProps:{\"value\":(_vm.newPassword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.newPassword=$event.target.value}}})])]),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"content-item\"},[_c('div',{staticClass:\"text\"},[_vm._v(\"确认密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.confirmPassword),expression:\"confirmPassword\"}],attrs:{\"type\":\"password\",\"name\":\"confirm_password\",\"placeholder\":\"请再次输入新密码\",\"required\":\"\"},domProps:{\"value\":(_vm.confirmPassword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.confirmPassword=$event.target.value}}})])]),_c('div',{staticClass:\"btn_box\"},[_c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"disabled\":!_vm.newPassword || !_vm.confirmPassword || _vm.newPassword !== _vm.confirmPassword}},[_vm._v(\"提交\")])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"NewPassword-container\">\n        <Header :header_name=\"header_name\"></Header>\n        <div class=\"head\">设置新密码</div>\n        <form @submit.prevent=\"submitNewPassword\" autocapitalize=\"off\" autocomplete=\"off\">\n            <div class=\"content\">\n                <div class=\"content-item\">\n                    <div class=\"text\">新密码</div>\n                    <input type=\"password\" v-model=\"newPassword\" name=\"new_password\" placeholder=\"请输入新密码\" required>\n                </div>\n            </div>\n\n            <div class=\"content\">\n                <div class=\"content-item\">\n                    <div class=\"text\">确认密码</div>\n                    <input type=\"password\" v-model=\"confirmPassword\" name=\"confirm_password\" placeholder=\"请再次输入新密码\" required>\n                </div>\n            </div>\n            <div class=\"btn_box\">\n                <button type=\"submit\" class=\"submit\"\n                    :disabled=\"!newPassword || !confirmPassword || newPassword !== confirmPassword\">提交</button>\n            </div>\n        </form>\n    </div>\n</template>\n\n<script>\n// NewPassword.vue\nexport default {\n    name: 'NewPassword',\n    data() {\n        return {\n            header_name: '修改密码',\n            newPassword: '',\n            confirmPassword: ''\n        };\n    },\n    computed: {\n        userEmail() {\n            return this.$store.getters.getUserEmail;\n        }\n    },\n    methods: {\n        toBack() {\n            this.$router.go(-1);\n        },\n        async submitNewPassword() {\n            if (!this.userEmail) {\n                alert('用户未登录，请重新登录');\n                return;\n            }\n\n            if (this.newPassword !== this.confirmPassword) {\n                alert('两次输入的密码不一致');\n                return;\n            }\n\n            try {\n                const res = await fetch('http://localhost:3081/api/set-new-password', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    credentials: 'include',\n                    body: JSON.stringify({\n                        email: this.userEmail,\n                        newPassword: this.newPassword\n                    })\n                });\n\n                const data = await res.json();\n\n                if (data.success) {\n                    // ✅ 密码修改成功后：退出登录并跳转登录页\n                    console.log('密码修改成功，正在退出登录...');\n                    \n                    // 请求后端退出登录\n                    await fetch('http://localhost:3081/api/logout', {\n                        method: 'POST',\n                        credentials: 'include'\n                    });\n\n                    // 清除 Vuex 登录状态\n                    this.$store.commit('logout');\n\n                    // 跳转到登录页面\n                    this.$router.replace('/Login');\n                } else {\n                    alert(data.message || '修改失败，请重试');\n                }\n            } catch (err) {\n                console.error('设置密码失败', err);\n                alert('服务错误，请稍后重试');\n            }\n        }\n    }\n};\n</script>\n\n<style scoped lang='less'>\n.NewPassword-container {\n    width: 100%;\n    height: 100%;\n    background-color: transparent;\n    display: flex;\n    flex-direction: column;\n}\n\n.head {\n    width: 100%;\n    padding: 40px 20px 0px 20px;\n    background-color: transparent;\n    font-size: @fontSize24;\n}\n\n.content {\n    width: 100%;\n    padding: 0px 20px;\n    background-color: transparent;\n    margin: 20px 0px;\n}\n\n.content-item {\n    height: 40px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    // background-color: blue;\n    border-bottom: 1px solid @140_140_140;\n}\n\n.text {\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    height: 100%;\n    width: 80px;\n    font-size: @fontSize16;\n    // background-color: white;\n}\n\n.content input {\n    flex: 1;\n    height: 100%;\n    padding: 0 10px;\n    font-size: @fontSize16;\n    background-color: transparent;\n}\n\n.btn_box {\n    width: 100%;\n    padding: 0px 20px;\n    display: flex;\n    justify-content: center;\n    margin-top: 20px;\n}\n\n.submit {\n    width: 100%;\n    height: 40px;\n    background-color: rgb(30, 144, 255);\n    color: white;\n    font-size: 16px;\n    border: none;\n    border-radius: 5px;\n}\n</style>\n\n<style scoped lang=\"less\" data-header>\n.header {\n    width: 100%;\n    height: 36px;\n    background-color: rgb(235, 235, 235);\n    padding: 0px 0.5rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.header-back,\n.header-name,\n.header-more {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: @fontSize16;\n}\n\n.header-back {\n    padding: 8px 8px 8px 0px;\n}\n\n.header-back svg {\n    width: 100%;\n    height: 100%;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SetNewPassword.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SetNewPassword.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SetNewPassword.vue?vue&type=template&id=67273036&scoped=true\"\nimport script from \"./SetNewPassword.vue?vue&type=script&lang=js\"\nexport * from \"./SetNewPassword.vue?vue&type=script&lang=js\"\nimport style0 from \"./SetNewPassword.vue?vue&type=style&index=0&id=67273036&prod&scoped=true&lang=less\"\nimport style1 from \"./SetNewPassword.vue?vue&type=style&index=1&id=67273036&prod&scoped=true&lang=less&data-header=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67273036\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"friends_container\"},[_c('div',{staticClass:\"friends-list\",style:({ width: _vm.userListWidth + 'px' })},[_c('UserListHeader',{attrs:{\"friends\":_vm.allFriends},on:{\"select-user\":_vm.handleSelectUser,\"friend-added\":_vm.handleFriendAdded}}),_c('div',{staticClass:\"friend-items\"},[(Object.keys(_vm.groupedFriends).length > 0)?_vm._l((_vm.groupedFriends),function(group,letter){return _c('div',{key:letter},[_c('div',{staticClass:\"letter-header\"},[_vm._v(_vm._s(letter))]),_vm._l((group),function(friend){return _c('div',{key:friend.user_id,staticClass:\"friend-item\",class:{ 'selected': _vm.currentChatUser && _vm.currentChatUser.user_id === friend.user_id },on:{\"dblclick\":function($event){return _vm.handleFriendClick(friend)}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":friend.avatar,\"alt\":friend.name}}),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(friend.nickname || friend.name))])])})],2)}):_c('div',{staticClass:\"empty-friends-list\"},[_c('p',[_vm._v(\"您还没有好友，快去添加吧！\")])])],2)],1),_c('div',{staticClass:\"divider\",on:{\"mousedown\":_vm.startDrag}}),_c('div',{staticClass:\"blank-area\"},[(_vm.currentChatUser)?[_c('h2',[_vm._v(\"正在与 \"+_vm._s(_vm.currentChatUser.nickname || _vm.currentChatUser.name)+\" 聊天\")]),(_vm.currentChatUser.email)?_c('p',[_vm._v(\"邮箱: \"+_vm._s(_vm.currentChatUser.email))]):_vm._e(),_c('img',{staticStyle:{\"width\":\"100px\",\"height\":\"100px\",\"border-radius\":\"50%\"},attrs:{\"src\":_vm.currentChatUser.avatar,\"alt\":\"用户头像\"}})]:[_vm._v(\" LiuHu \")]],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"friends_container\">\n        <div class=\"friends-list\" :style=\"{ width: userListWidth + 'px' }\">\n            <UserListHeader :friends=\"allFriends\" @select-user=\"handleSelectUser\" @friend-added=\"handleFriendAdded\" />\n            <div class=\"friend-items\">\n                <template v-if=\"Object.keys(groupedFriends).length > 0\">\n                    <div v-for=\"(group, letter) in groupedFriends\" :key=\"letter\">\n                        <div class=\"letter-header\">{{ letter }}</div>\n                        <div v-for=\"friend in group\" :key=\"friend.user_id\" class=\"friend-item\"\n                            :class=\"{ 'selected': currentChatUser && currentChatUser.user_id === friend.user_id }\"\n                            @dblclick=\"handleFriendClick(friend)\"> <img :src=\"friend.avatar\" class=\"avatar\" :alt=\"friend.name\" />\n                            <span class=\"name\">{{ friend.nickname || friend.name }}</span>\n                        </div>\n                    </div>\n                </template>\n                <div v-else class=\"empty-friends-list\">\n                    <p>您还没有好友，快去添加吧！</p>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"divider\" @mousedown=\"startDrag\"></div>\n\n        <div class=\"blank-area\">\n            <template v-if=\"currentChatUser\">\n                <h2>正在与 {{ currentChatUser.nickname || currentChatUser.name }} 聊天</h2>\n                <p v-if=\"currentChatUser.email\">邮箱: {{ currentChatUser.email }}</p>\n                <img :src=\"currentChatUser.avatar\" alt=\"用户头像\"\n                    style=\"width: 100px; height: 100px; border-radius: 50%;\" />\n            </template>\n            <template v-else>\n                LiuHu\n            </template>\n        </div>\n    </div>\n</template>\n\n<script>\nimport UserListHeader from '@/components/UserListHeader.vue';\nimport { pinyin } from 'pinyin-pro';\nimport { mapActions } from 'vuex'; // ✅ 导入 mapActions\n\nexport default {\n    name: 'Friends',\n    components: {\n        UserListHeader\n    },\n    props: ['currentUser'],\n    data() {\n        return {\n            userListWidth: 250,\n            dragging: false,\n            currentChatUser: null, // 这个是 Friends 组件内部右侧展示的用户\n            allFriends: []\n        };\n    },\n    computed: {\n        groupedFriends() {\n            const groups = {};\n            const regAlphabetic = /^[A-Z]$/;\n\n            this.allFriends.forEach(friend => {\n                const displayName = friend.nickname || friend.name || '';\n                let firstChar = '';\n                if (displayName.length > 0) {\n                    firstChar = displayName.charAt(0).toUpperCase();\n                }\n\n                let groupKey = '';\n                if (regAlphabetic.test(firstChar)) {\n                    groupKey = firstChar;\n                } else if (/^[\\u4e00-\\u9fa5]$/.test(firstChar)) {\n                    const pinyinResult = pinyin(displayName, { toneType: 'none', type: 'array' });\n                    groupKey = pinyinResult.length > 0 ? pinyinResult[0].charAt(0).toUpperCase() : '#';\n                } else {\n                    groupKey = '#';\n                }\n\n                if (!groups[groupKey]) {\n                    groups[groupKey] = [];\n                }\n                groups[groupKey].push(friend);\n            });\n\n            for (const key in groups) {\n                groups[key].sort((a, b) => {\n                    const nameA = (a.nickname || a.name || '');\n                    const nameB = (b.nickname || b.name || '');\n                    if (/^[\\u4e00-\\u9fa5]/.test(nameA) && /^[\\u4e00-\\u9fa5]/.test(nameB)) {\n                        return pinyin(nameA, { toneType: 'none', type: 'array' }).join('').localeCompare(\n                            pinyin(nameB, { toneType: 'none', type: 'array' }).join('')\n                        );\n                    }\n                    return nameA.localeCompare(nameB);\n                });\n            }\n\n            const sortedKeys = Object.keys(groups).sort((a, b) => {\n                if (a === '#') return 1;\n                if (b === '#') return -1;\n                return a.localeCompare(b);\n            });\n\n            const sortedGroups = {};\n            sortedKeys.forEach(key => {\n                sortedGroups[key] = groups[key];\n            });\n\n            return sortedGroups;\n        }\n    },\n    methods: {\n        ...mapActions(['selectChatUser']), // ✅ 映射 Vuex action\n        handleSelectUser(user) {\n            // 这个方法用于 UserListHeader 的 @select-user，\n            // 它是为了让 UserListHeader 知道当前选中的好友是谁，如果它有类似高亮显示的功能\n            console.log('Friends 页面选中用户 (UserListHeader 触发):', user);\n            this.currentChatUser = user;\n        },\n        // ✅ 新增方法，用于处理点击好友项\n        handleFriendClick(friend) {\n            // 1. 设置 Friends 页面右侧显示的用户\n            this.currentChatUser = friend;\n            console.log('点击好友，Friends 页面右侧显示:', friend);\n\n            // 2. 通过 Vuex 设置全局的聊天目标用户\n            this.selectChatUser(friend); // ✅ 调用 Vuex action\n\n            // 3. 跳转到 Home 页面\n            // 假设你的 Home 页面路由名为 'Home' 或 '/'\n            // 如果你的路由是 /home，那么就是 this.$router.push('/home');\n            // 如果是命名路由，例如 { name: 'Home' }\n            this.$router.push('/Home'); // ✅ 根据你的实际路由路径调整\n        },\n        handleFriendAdded() {\n            console.log('Friends 页面收到 friend-added 事件，刷新好友列表...');\n            this.fetchFriends();\n        },\n        fetchFriends() {\n            this.$axios.get('/user/friends', { withCredentials: true })\n                .then(response => {\n                    if (response.data.success && Array.isArray(response.data.friends)) {\n                        this.allFriends = response.data.friends;\n                    } else {\n                        console.error('获取好友列表失败:', response.data.message || '返回数据格式不正确');\n                        this.allFriends = [];\n                    }\n                })\n                .catch(error => {\n                    console.error('获取好友列表异常:', error);\n                    this.allFriends = [];\n                    this.currentChatUser = null;\n                });\n        },\n        startDrag(e) {\n            e.preventDefault();\n            this.dragging = true;\n            document.addEventListener('mousemove', this.onDragging);\n            document.addEventListener('mouseup', this.stopDrag);\n        },\n        onDragging(e) {\n            if (this.dragging) {\n                const home = document.querySelector('.friends_container');\n                if (!home) {\n                    console.error('.friends_container not found!');\n                    return;\n                }\n                const rect = home.getBoundingClientRect();\n                const offsetX = e.clientX - rect.left;\n                const minWidth = 200;\n                const maxWidth = 300;\n                const newWidth = Math.min(Math.max(offsetX, minWidth), maxWidth);\n                this.userListWidth = newWidth;\n            }\n        },\n        stopDrag() {\n            this.dragging = false;\n            document.removeEventListener('mousemove', this.onDragging);\n            document.removeEventListener('mouseup', this.stopDrag);\n            localStorage.setItem('userListWidth', this.userListWidth);\n        }\n    },\n    mounted() {\n        const savedWidth = localStorage.getItem('userListWidth');\n        if (savedWidth) {\n            this.userListWidth = parseInt(savedWidth);\n        }\n        this.fetchFriends();\n    },\n};\n</script>\n\n<style scoped lang=\"less\">\n@255_255_255: #FFFFFF;\n@dodgerblue: #1E90FF;\n\n.friends_container {\n    display: flex;\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n}\n\n.friends-list {\n    flex-shrink: 0;\n    flex-grow: 0;\n    background-color: @255_255_255;\n    display: flex;\n    flex-direction: column;\n}\n\n.divider {\n    cursor: ew-resize;\n    width: 4px;\n    height: 100%;\n    background-color: #eee;\n    transition: background-color 0.2s ease;\n}\n\n.divider:hover {\n    background-color: @dodgerblue;\n}\n\n.blank-area {\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: 60px;\n    font-weight: bolder;\n    color: rgb(225, 225, 225);\n    user-select: none;\n    background-color: #f8f8f8;\n    padding: 20px;\n    text-align: center;\n\n    h2 {\n        font-size: 24px;\n        color: #333;\n        margin-bottom: 10px;\n    }\n\n    p {\n        font-size: 16px;\n        color: #666;\n        margin-bottom: 20px;\n    }\n}\n\n.friend-items {\n    flex-grow: 1;\n    overflow-y: auto;\n    padding-bottom: 10px;\n}\n\n.letter-header {\n    padding: 5px 15px;\n    background-color: #f0f0f0;\n    font-size: 12px;\n    color: #999;\n    font-weight: bold;\n    position: sticky;\n    top: 0;\n    z-index: 1;\n    border-bottom: 1px solid #eee;\n}\n\n.friend-item {\n    display: flex;\n    align-items: center;\n    padding: 10px 15px;\n    cursor: pointer;\n    border-bottom: 1px solid #eee;\n    transition: background-color 0.2s ease, border-left 0.2s ease;\n}\n\n.friend-item:last-child {\n    border-bottom: none;\n}\n\n.friend-item:hover {\n    background-color: #1E90FF;\n}\n\n.friend-item.selected {\n    background-color: lighten(@dodgerblue, 45%);\n    border-left: 3px solid @dodgerblue;\n}\n\n.friend-item .avatar {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    margin-right: 10px;\n    object-fit: cover;\n}\n\n.friend-item .name {\n    font-size: 16px;\n    color: #333;\n    font-weight: normal;\n}\n\n.empty-friends-list {\n    text-align: center;\n    padding: 20px;\n    color: #888;\n    font-size: 14px;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Friends.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Friends.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Friends.vue?vue&type=template&id=a1c69cca&scoped=true\"\nimport script from \"./Friends.vue?vue&type=script&lang=js\"\nexport * from \"./Friends.vue?vue&type=script&lang=js\"\nimport style0 from \"./Friends.vue?vue&type=style&index=0&id=a1c69cca&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a1c69cca\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"user_name-container\"},[_c('Header',{attrs:{\"header_name\":_vm.header_name},on:{\"save\":_vm.saveName}}),_c('div',{staticClass:\"input-area\"},[_c('div',{ref:\"inputBox\",staticClass:\"input-box\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.name),expression:\"user.name\"}],ref:\"input\",staticClass:\"input\",attrs:{\"type\":\"text\",\"name\":\"user-name\"},domProps:{\"value\":(_vm.user.name)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.user, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"text\"},[_vm._v(\"好的名字可以让你的朋友更容易记住你。\")])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <!-- user_name.vue -->\n    <div class=\"user_name-container\">\n        <!-- 将 header_name 传递给 Header 组件 -->\n        <Header :header_name=\"header_name\" @save=\"saveName\"></Header>\n\n        <div class=\"input-area\">\n            <div class=\"input-box\" ref=\"inputBox\">\n                <input type=\"text\" class=\"input\" ref=\"input\" name=\"user-name\" v-model=\"user.name\" />\n            </div>\n            <div class=\"text\">好的名字可以让你的朋友更容易记住你。</div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'UserName',\n    data() {\n        return {\n            header_name: '更改名字',\n            user: {\n                name: '',\n            }\n        }\n    },\n    methods: {\n        // 获取用户资料\n        fetchUserProfile() {\n            // http://localhost:3081/api/user/profile\n            this.$axios.get('/user/profile')\n                .then(response => {\n                    // console.log(\"获取用户资料成功:\", response.data);\n                    // 假设后端返回的数据结构是 { success: true, user: { name: '...', ... } }\n                    if (response.data.success && response.data.user) {\n                        this.user.name = response.data.user.name; // ✅ 这里很可能是你需要修改的地方\n                    } else {\n                        console.warn(\"后端返回的用户资料结构不符合预期或无数据:\", response.data);\n                    }\n                })\n                .catch(error => {\n                    console.error(\"获取用户资料失败:\", error);\n                });\n        },\n        // 保存用户名字\n        saveName() {\n            // 这个函数只在当前页面保存名字\n            // http://localhost:3081/api/user/profile/update\n            this.$axios.post('/user/profile/update', {\n                name: this.user.name\n            }, { withCredentials: true })\n                .then(data => {\n                    this.$toast.success('名字保存成功');\n                    this.$router.go(-1); // 保存后返回 settings 页面\n                })\n                .catch(err => {\n                    console.error('保存失败', err);\n                });\n        }\n    },\n    created() {\n        this.fetchUserProfile();\n    },\n}\n</script>\n\n<style scoped lang='less'>\n.input-area {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    width: 100%;\n    height: fit-content;\n    padding: 24px 10px 10px 10px;\n    // background-color: darkcyan;\n}\n\n.input-box {\n    width: 100%;\n    height: 30px;\n}\n\n.input {\n    width: 100%;\n    height: 30px;\n    outline: none;\n    font-size: @fontSize14;\n    padding: 0 10px;\n    background-color: transparent;\n    border-bottom: 1px solid @210_210_210;\n\n}\n\n.input:focus {\n    border-bottom: 1px solid @dodgerblue;\n    /* 设置输入框聚焦时的边框颜色 */\n}\n\n.text {\n    margin-left: 20px;\n    margin-top: 10px;\n    width: 100%;\n    color: @140_140_140;\n    font-size: @fontSize12;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserName.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserName.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserName.vue?vue&type=template&id=6a78d4bc&scoped=true\"\nimport script from \"./UserName.vue?vue&type=script&lang=js\"\nexport * from \"./UserName.vue?vue&type=script&lang=js\"\nimport style0 from \"./UserName.vue?vue&type=style&index=0&id=6a78d4bc&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a78d4bc\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"UserGender_container\"},[_c('Header',{attrs:{\"header_name\":_vm.header_name},on:{\"save\":_vm.saveGender}}),_c('ul',{staticClass:\"select_gender_box\"},[_c('li',{staticClass:\"gender_li\",on:{\"click\":function($event){return _vm.selectGender('男')}}},[_c('div',{staticClass:\"li_text\"},[_vm._v(\"男\")]),_c('div',{staticClass:\"li_icon\"},[(_vm.selectedGender === '男')?_c('van-icon',{attrs:{\"color\":\"dodgerblue\",\"size\":\"21\",\"name\":\"success\"}}):_vm._e()],1)]),_c('li',{staticClass:\"gender_li\",on:{\"click\":function($event){return _vm.selectGender('女')}}},[_c('div',{staticClass:\"li_text\"},[_vm._v(\"女\")]),_c('div',{staticClass:\"li_icon\"},[(_vm.selectedGender === '女')?_c('van-icon',{attrs:{\"color\":\"dodgerblue\",\"size\":\"21\",\"name\":\"success\"}}):_vm._e()],1)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"UserGender_container\">\n        <Header :header_name=\"header_name\" @save=\"saveGender\"></Header>\n\n        <ul class=\"select_gender_box\">\n            <li class=\"gender_li\" @click=\"selectGender('男')\">\n                <div class=\"li_text\">男</div>\n                <div class=\"li_icon\">\n                    <van-icon v-if=\"selectedGender === '男'\" color=\"dodgerblue\" size=\"21\" name=\"success\" />\n                </div>\n            </li>\n            <li class=\"gender_li\" @click=\"selectGender('女')\">\n                <div class=\"li_text\">女</div>\n                <div class=\"li_icon\">\n                    <van-icon v-if=\"selectedGender === '女'\" color=\"dodgerblue\" size=\"21\" name=\"success\" />\n                </div>\n            </li>\n        </ul>\n    </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'; // 导入 mapGetters\n\nexport default {\n    name: 'UserGender',\n    data() {\n        return {\n            header_name: '设置性别',\n            selectedGender: '', // 新增数据属性，用于追踪当前选中的性别\n            // 直接使用 Vuex 中的 currentUser\n        };\n    },\n    computed: {\n        ...mapGetters(['currentUser']) // 映射 Vuex 的 currentUser getter\n    },\n    methods: {\n        // 设置选中的性别\n        selectGender(gender) {\n            this.selectedGender = gender;\n            // console.log('当前选中的性别是:', this.selectedGender);\n        },\n        // 保存用户性别\n        saveGender() {\n            // 如果用户没有选择性别，则提示\n            if (!this.selectedGender) {\n                this.$toast.fail('请选择性别');\n                return;\n            }\n\n            // 调用后端接口更新用户性别信息\n            // http://localhost:3081/api/user/profile/update\n            this.$axios.post('/user/profile/update', {\n                gender: this.selectedGender // 将选中的性别发送给后端\n            }, { withCredentials: true }) // withCredentials 让浏览器带上 session cookie\n                .then(response => {\n                    if (response.data.success) { // 检查后端返回的 success 标志\n                        this.$toast.success('性别保存成功');\n\n                        // 同步更新 Vuex：mutation updateCurrentUser\n                        // ✅ 关键：更新 Vuex 中的 currentUser.gender\n                        // 假设的 Vuex store 有一个 setGenderMutation mutation\n                        this.$store.commit('setCurrentUserGender', this.selectedGender); // 有一个更通用的 updateCurrentUser mutation\n\n                        this.$router.go(-1); // 保存成功后返回上一页\n                    } else {\n                        // 处理后端返回的错误信息\n                        this.$toast.fail(response.data.message || '保存失败，请重试');\n                        console.error('保存失败:', response.data.message);\n                    }\n                })\n                .catch(error => {\n                    console.error('请求错误:', error);\n                    this.$toast.fail('服务器错误，保存失败');\n                });\n        },\n        // 获取用户资料，用于预选中性别(选中性别后再次进入页面显示之前选中的性别)\n    },\n    created() {\n        // 组件创建时，从 Vuex 中获取当前用户的性别来设置初始选中状态\n        if (this.currentUser && this.currentUser.gender) {\n            this.selectedGender = this.currentUser.gender;\n        }\n        // 如果的 Vuex store 不包含性别信息，或者需要确保数据是最新从后端获取的，\n        // 那么可以保留 fetchUserProfile，但在组件生命周期中要谨慎调用。\n        // 如果 currentUser 已经包含了性别，则无需再次调用 fetchUserProfile。\n    }\n};\n</script>\n\n<style scoped lang='less'>\n.UserGender_container {\n    width: 100%;\n    height: 100%;\n}\n\n.select_gender_box {\n    width: 100%;\n    height: fit-content;\n    background-color: @255_255_255;\n}\n\n.gender_li {\n    padding: 12px 12px 0px 12px;\n    display: flex;\n    align-self: center;\n    justify-content: space-between;\n}\n\n.li_text {\n    font-size: @fontSize14;\n    padding-bottom: 10px;\n    border-bottom: 1px solid @borderColor;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserGender.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserGender.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserGender.vue?vue&type=template&id=e98349a4&scoped=true\"\nimport script from \"./UserGender.vue?vue&type=script&lang=js\"\nexport * from \"./UserGender.vue?vue&type=script&lang=js\"\nimport style0 from \"./UserGender.vue?vue&type=style&index=0&id=e98349a4&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e98349a4\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"UserArea-container\"},[_c('Header',{attrs:{\"header_name\":_vm.header_name}}),_c('div',{staticClass:\"user_area_box\"},[_c('div',{staticClass:\"title_text\"},[_vm._v(\"当前位置\")]),_c('div',{staticClass:\"current_location_box\"},[_c('div',{staticClass:\"location_icon\"},[_c('van-icon',{attrs:{\"size\":\"20\",\"name\":\"location\"}})],1),(_vm.user && _vm.user.region)?_c('div',{staticClass:\"location_text\"},[_vm._v(_vm._s(_vm.user.region))]):_c('div',{staticClass:\"location_text\"},[_vm._v(\"正在获取地区信息...\")])])]),_c('div',{staticClass:\"select_region_box\"},[_c('div',{staticClass:\"select_region_title\"},[_vm._v(\"全部地区\")]),_c('ul',{staticClass:\"select_region_content\"},_vm._l((_vm.regionData),function(provinceItem,index){return _c('li',{key:index,staticClass:\"region_li\",on:{\"click\":function($event){return _vm.handleClick(provinceItem)}}},[_c('div',{staticClass:\"li\"},[_c('div',{staticClass:\"li_text\"},[_vm._v(_vm._s(_vm.getProvinceName(provinceItem)))]),_c('div',{staticClass:\"li_right\"},[(_vm.isSelected(provinceItem))?_c('div',{staticClass:\"current_region\"},[_vm._v(\"已选地区\")]):_vm._e(),_c('div',{staticClass:\"li_forward\"},[_c('Forward')],1)])])])}),0)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"UserArea-container\">\n        <Header :header_name=\"header_name\"></Header>\n\n        <div class=\"user_area_box\">\n            <div class=\"title_text\">当前位置</div>\n            <div class=\"current_location_box\">\n                <div class=\"location_icon\">\n                    <van-icon size=\"20\" name=\"location\" />\n                </div>\n                <div class=\"location_text\" v-if=\"user && user.region\">{{ user.region }}</div>\n                <div class=\"location_text\" v-else>正在获取地区信息...</div>\n            </div>\n        </div>\n\n        <div class=\"select_region_box\">\n            <div class=\"select_region_title\">全部地区</div>\n            <ul class=\"select_region_content\">\n                <li class=\"region_li\" v-for=\"(provinceItem, index) in regionData\" :key=\"index\"\n                    @click=\"handleClick(provinceItem)\">\n                    <div class=\"li\">\n                        <div class=\"li_text\">{{ getProvinceName(provinceItem) }}</div>\n                        <div class=\"li_right\">\n                            <div class=\"current_region\" v-if=\"isSelected(provinceItem)\">已选地区</div>\n                            <div class=\"li_forward\">\n                                <Forward></Forward>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n    </div>\n</template>\n\n<script>\nimport regionData from '../../../region.json';\n\nexport default {\n    name: 'UserArea',\n    data() {\n        return {\n            regionData,\n            header_name: '选择地区',\n            // ✅ 保持 user 初始化，但确保它是响应式的\n            user: {\n                region: '', // 确保这里是响应式属性\n            },\n            selectedRegion: '', // 当前选中的省份名称，用于即时反馈\n        };\n    },\n    computed: {\n        provinceList() {\n            return this.regionData;\n        },\n        // ✅ 也可以使用计算属性来获取显示区域，进一步确保响应式\n        currentDisplayRegion() {\n            return this.user.region || '正在获取地区信息...';\n        }\n    },\n    methods: {\n        getProvinceName(provinceItem) {\n            return Object.keys(provinceItem)[0];\n        },\n        handleClick(provinceItem) {\n            const provinceName = this.getProvinceName(provinceItem);\n            this.selectedRegion = provinceName;\n            this.$router.push({ path: '/UserAreaDetail', query: { province: provinceName } });\n            // console.log(\"UserArea--选中的省份是:\", provinceItem);\n        },\n        isSelected(provinceItem) {\n            const currentProvinceName = this.getProvinceName(provinceItem);\n\n            // 优先使用通过路由参数传回的 `selectedRegion`\n            if (this.selectedRegion) {\n                return currentProvinceName === this.selectedRegion;\n            }\n\n            // 如果没有路由参数，则从后端获取的 `user.region` 中判断\n            if (this.user.region) {\n                const userProvince = this.user.region.split(' ')[0];\n                return currentProvinceName === userProvince;\n            }\n\n            return false;\n        },\n        // 获取用户资料\n        fetchUserProfile() {\n            this.$axios.get('/user/profile')\n                .then(response => {\n                    // console.log(\"UserArea 获取用户资料成功:\", response.data);\n                    // ✅ 确保这里正确地更新了 user.region\n                    // 如果 response.data.user 是一个对象，且 region 属性存在\n                    if (response.data && response.data.user && response.data.user.region) {\n                         this.$set(this.user, 'region', response.data.user.region); // 使用 $set 确保响应式\n                        // this.user.region = response.data.user.region; // 理论上这行也应有效，但 $set 更保险\n                        \n                        // 从用户资料中解析出省份，更新 selectedRegion\n                        this.selectedRegion = response.data.user.region.split(' ')[0];\n                    } else {\n                        // 处理没有获取到地区数据的情况\n                        this.user.region = '未设置地区';\n                        this.selectedRegion = '';\n                    }\n                })\n                .catch(error => {\n                    console.error(\"获取用户资料失败:\", error);\n                    this.$toast.fail('获取地区信息失败'); // 提示用户\n                    this.user.region = '获取失败';\n                });\n        },\n    },\n    created() {\n        // 在组件创建时，无论是否有路由参数，都触发获取用户资料\n        // fetchUserProfile 会根据后端数据更新 user.region 和 selectedRegion\n        this.fetchUserProfile(); \n        \n        // 如果是从 UserAreaDetail 返回，并且带有 lastSelectedProvince 参数\n        if (this.$route.query.lastSelectedProvince) {\n            // 这里只更新 selectedRegion 的状态，fetchUserProfile 会获取最终数据\n            this.selectedRegion = this.$route.query.lastSelectedProvince;\n            // 确保移除这个参数，避免刷新后仍显示\n            this.$router.replace({ query: { ...this.$route.query, lastSelectedProvince: undefined } }).catch(()=>{}); // 添加catch避免重复导航报错\n        }\n    },\n    watch: {\n        // 监听路由参数的变化 (当从 UserAreaDetail 返回时)\n        '$route.query.lastSelectedProvince'(newVal) {\n            if (newVal) {\n                this.selectedRegion = newVal;\n                // 当路由参数变化时，重新获取用户资料，以确保数据是最新的\n                this.fetchUserProfile(); \n                this.$router.replace({ query: { ...this.$route.query, lastSelectedProvince: undefined } }).catch(()=>{});\n            }\n        },\n        // 监听 user.region 的变化，确保 selectedRegion 始终和用户资料的省份保持同步\n        // 即使没有 watch，由于 user.region 是响应式的，模板也应该自动更新\n        // 这个 watch 主要是为了确保 selectedRegion 的一致性\n        'user.region'(newVal) {\n            if (newVal) {\n                this.selectedRegion = newVal.split(' ')[0];\n            } else {\n                this.selectedRegion = '';\n            }\n        }\n    }\n};\n</script>\n\n<style scoped lang='less' data-title>\n.UserArea-container {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n\n.user_area_box {\n    width: 100%;\n    height: 70px;\n    background-color: transparent;\n}\n\n.title_text {\n    padding: 14px 10px 0px 10px;\n    color: @140_140_140;\n    font-size: @fontSize12;\n}\n\n.current_location_box {\n    padding: 10px;\n    width: 100%;\n    height: fit-content;\n    background-color: @255_255_255;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n}\n\n.location_icon {\n    width: fit-content;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: @deepskyblue;\n}\n\n.location_text {\n    width: fit-content;\n    font-size: @fontSize14;\n    height: 100%;\n    margin-left: 10px;\n    // background-color: lightseagreen;\n}\n</style>\n\n<style scoped lang=\"less\" data-select_region_box>\n.select_region_box {\n    position: relative;\n    width: 100%;\n    // 这里的 70px 是 user_area_box 的高度\n    // 这里的 36.5px 是 select_region_title 的高度\n    height: calc(100% - @header-height - 70px - 40.5px);\n    background-color: transparent;\n}\n\n// select_region_title 的高度 36.5px\n.select_region_title {\n    width: 100%;\n    height: fit-content;\n    padding: 16px 10px 8px 10px;\n    color: @140_140_140;\n    font-size: @fontSize12;\n}\n\n.select_region_content {\n    position: relative;\n    overflow: auto;\n    width: 100%;\n    height: 100%;\n    padding-bottom: 30px;\n    // background-color: lightcoral;\n}\n\n.region_li {\n    padding: 12px 12px 0px 12px;\n    background-color: white;\n}\n\n.li {\n    width: 100%;\n    height: 30px;\n    padding-bottom: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    border-bottom: 1px solid @borderColor;\n}\n\n.li:not(:last-child) {\n    border-bottom: 1px solid @borderColor;\n}\n\n.li_text {\n    font-size: @fontSize14;\n}\n\n.li_right {\n    width: fit-content;\n    height: 100%;\n    // background-color: olive;\n    display: flex;\n}\n\n.current_region {\n    width: fit-content;\n    height: 100%;\n    color: @140_140_140;\n    font-size: @fontSize14;\n    margin-right: 10px;\n    display: flex;\n    align-items: center;\n    // background-color: red;\n}\n\n.li_forward {\n    width: 14px;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    // background-color: black;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserArea.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserArea.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserArea.vue?vue&type=template&id=2bc730c0&scoped=true\"\nimport script from \"./UserArea.vue?vue&type=script&lang=js\"\nexport * from \"./UserArea.vue?vue&type=script&lang=js\"\nimport style0 from \"./UserArea.vue?vue&type=style&index=0&id=2bc730c0&prod&scoped=true&lang=less&data-title=true\"\nimport style1 from \"./UserArea.vue?vue&type=style&index=1&id=2bc730c0&prod&scoped=true&lang=less&data-select_region_box=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2bc730c0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"UserAreaDetail_container\"},[_c('Header',{attrs:{\"header_name\":_vm.header_name},on:{\"save\":_vm.handleSave}}),_c('div',{staticClass:\"user_area_box\"},[_c('div',{staticClass:\"title_text\"},[_vm._v(\"当前位置\")]),_c('div',{staticClass:\"current_location_box\"},[_c('div',{staticClass:\"location_icon\"},[_c('van-icon',{attrs:{\"size\":\"20\",\"name\":\"location\"}})],1),_c('div',{staticClass:\"location_text\"},[_vm._v(\" \"+_vm._s(_vm.provinceName)+\" \"),(_vm.selectedCity && !_vm.isSpecialCity)?_c('span',[_vm._v(\" \"+_vm._s(_vm.selectedCity))]):_vm._e(),(_vm.isSpecialCity && _vm.selectedDistrict)?_c('span',[_vm._v(\" \"+_vm._s(_vm.selectedDistrict))]):_vm._e()])])]),_c('div',{staticClass:\"select_region_box\"},[_c('div',{staticClass:\"select_region_title\"},[_vm._v(\"全部地区\")]),_c('ul',{staticClass:\"select_region_content\"},_vm._l(((_vm.isSpecialCity ? _vm.districtList : _vm.cityList)),function(item,index){return _c('li',{key:index,staticClass:\"region_li\",on:{\"click\":function($event){return _vm.handleItemClick(item)}}},[_c('div',{staticClass:\"li\"},[_c('div',{staticClass:\"li_text\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"li_right\"},[(_vm.isSpecialCity ? _vm.selectedDistrict === item.name : _vm.selectedCity === item.name)?_c('div',{staticClass:\"current_region\"},[_vm._v(\"已选地区 \")]):_vm._e(),_c('div',{staticClass:\"li_forward\"},[_c('Forward')],1)])])])}),0)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"UserAreaDetail_container\">\n        <Header :header_name=\"header_name\" @save=\"handleSave\"></Header>\n\n        <div class=\"user_area_box\">\n            <div class=\"title_text\">当前位置</div>\n            <div class=\"current_location_box\">\n                <div class=\"location_icon\">\n                    <van-icon size=\"20\" name=\"location\" />\n                </div>\n                <div class=\"location_text\">\n                    {{ provinceName }}\n                    <span v-if=\"selectedCity && !isSpecialCity\"> {{ selectedCity }}</span>\n                    <span v-if=\"isSpecialCity && selectedDistrict\"> {{ selectedDistrict }}</span>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"select_region_box\">\n            <div class=\"select_region_title\">全部地区</div>\n            <ul class=\"select_region_content\">\n                <li class=\"region_li\" v-for=\"(item, index) in (isSpecialCity ? districtList : cityList)\" :key=\"index\"\n                    @click=\"handleItemClick(item)\">\n                    <div class=\"li\">\n                        <div class=\"li_text\">{{ item.name }}</div>\n                        <div class=\"li_right\">\n                            <div class=\"current_region\"\n                                v-if=\"isSpecialCity ? selectedDistrict === item.name : selectedCity === item.name\">已选地区\n                            </div>\n                            <div class=\"li_forward\">\n                                <Forward></Forward>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport regionData from '../../../region.json'; // 地区数据\n\nexport default {\n    name: 'UserAreaDetail',\n    data() {\n        return {\n            header_name: '地区详情',\n            provinceName: '',           // 当前省份\n            cityList: [],               // 普通省份用：市列表\n            districtList: [],           // 直辖市/特殊城市用：区县列表\n            selectedCity: '',           // 用户选择的市名 (普通省份)\n            selectedDistrict: '',       // 用户选择的区县名 (直辖市/特殊城市)\n            isSpecialCity: false,       // 是否是直辖市 (北京、上海、天津、重庆)\n        };\n    },\n    methods: {\n        handleSave() {\n            let fullRegion = '';\n            if (this.isSpecialCity) {\n                if (!this.selectedDistrict) {\n                    console.warn(\"请先选择一个区县！\");\n                    this.$toast.fail('请选择区县');\n                    return;\n                }\n                fullRegion = `${this.provinceName} ${this.selectedDistrict}`;\n            } else {\n                if (!this.selectedCity) {\n                    console.warn(\"请先选择一个市！\");\n                    this.$toast.fail('请选择市');\n                    return;\n                }\n                fullRegion = `${this.provinceName} ${this.selectedCity}`;\n            }\n\n            console.log('保存地区：', fullRegion);\n\n            // http://localhost:3081/api/user/profile/update\n            this.$axios.post('/user/profile/update', {\n                region: fullRegion\n            }, { withCredentials: true })\n                .then(response => {\n                    if (response.data.success) {\n                        // console.log('地区更新成功:', response.data.message);\n                        this.$toast.success('地区保存成功');\n\n                        this.$router.go(-2); // 移除此行，因为已使用 replace\n                    } else {\n                        console.error('更新失败:', response.data.message);\n                        this.$toast.fail('保存失败，请重试');\n                    }\n                })\n                .catch(error => {\n                    console.error('请求错误:', error);\n                    this.$toast.fail('服务器错误');\n                });\n        },\n\n        handleItemClick(item) {\n            if (this.isSpecialCity) {\n                this.selectedDistrict = item.name;\n                // console.log('选中区县:', item.name);\n            } else {\n                this.selectedCity = item.name;\n                // console.log('选中市:', item.name);\n            }\n        },\n\n        getRegionDataByProvince(provinceName) {\n            const provinceItem = regionData.find(item => Object.keys(item)[0] === provinceName);\n\n            if (!provinceItem) {\n                // console.error(`未找到省份数据: ${provinceName}`);\n                return []; // 如果找不到省份，返回空数组\n            }\n\n            const provinceData = provinceItem[provinceName];\n\n            // 增强健壮性：确保 provinceData.地级市 存在且是数组\n            if (!provinceData || !Array.isArray(provinceData.地级市)) {\n                console.error(`省份 ${provinceName} 的地级市数据结构不正确或为空:`, provinceData);\n                return [];\n            }\n\n            // 精确判断是否是直辖市 (北京、上海、天津、重庆)\n            // 直辖市的特点是其 \"地级市\" 数组中只有一个元素，且该元素的 \"name\" 等于省份名\n            if (provinceData.地级市.length === 1 && provinceData.地级市[0] && provinceData.地级市[0].name === provinceName) {\n                this.isSpecialCity = true;\n                // 进一步检查区县数据\n                if (provinceData.地级市[0].区县 && Array.isArray(provinceData.地级市[0].区县)) {\n                    return provinceData.地级市[0].区县;\n                } else {\n                    console.warn(`直辖市 ${provinceName} 的区县数据结构不正确或为空:`, provinceData.地级市[0]);\n                    return [];\n                }\n            } else {\n                this.isSpecialCity = false;\n                return provinceData.地级市;\n            }\n        }\n    },\n    created() {\n        this.provinceName = this.$route.query.province;\n        if (this.provinceName) {\n            const data = this.getRegionDataByProvince(this.provinceName);\n            if (this.isSpecialCity) {\n                this.districtList = data;\n                // console.log('当前省份的区县数据 (直辖市):', this.districtList);\n                // 直辖市的默认选中为省份名本身，而非下辖区县\n                this.selectedCity = this.provinceName;\n            } else {\n                this.cityList = data;\n                // console.log('当前省份的市级数据 (普通省份):', this.cityList);\n            }\n        }\n    }\n};\n</script>\n\n<style scoped lang='less'>\n.UserAreaDetail_container {\n    width: 100%;\n    height: 100%;\n}\n\n.user_area_box {\n    width: 100%;\n    height: 70px;\n    background-color: transparent;\n}\n\n.title_text {\n    padding: 14px 10px 0px 10px;\n    color: @140_140_140;\n    font-size: @fontSize12;\n}\n\n.current_location_box {\n    padding: 10px;\n    width: 100%;\n    height: fit-content;\n    background-color: @255_255_255;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n}\n\n.location_icon {\n    width: fit-content;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: @deepskyblue;\n}\n\n.location_text {\n    width: fit-content;\n    font-size: @fontSize14;\n    height: 100%;\n    margin-left: 10px;\n    // background-color: lightseagreen;\n}\n</style>\n<style scoped lang=\"less\" data-select_region_box>\n.select_region_box {\n    position: relative;\n    width: 100%;\n    // 这里的 70px 是 user_area_box 的高度\n    // 这里的 36.5px 是 select_region_title 的高度\n    height: calc(100% - @header-height - 70px - 40.5px);\n    background-color: transparent;\n}\n\n// select_region_title 的高度 36.5px\n.select_region_title {\n    width: 100%;\n    height: fit-content;\n    padding: 16px 10px 8px 10px;\n    color: @140_140_140;\n    font-size: @fontSize12;\n}\n\n.select_region_content {\n    position: relative;\n    overflow: auto;\n    width: 100%;\n    height: 100%;\n    padding-bottom: 30px;\n    // background-color: lightcoral;\n}\n\n.region_li {\n    padding: 12px 12px 0px 12px;\n    background-color: white;\n}\n\n.li {\n    width: 100%;\n    height: 30px;\n    padding-bottom: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    border-bottom: 1px solid @borderColor;\n}\n\n.li:not(:last-child) {\n    border-bottom: 1px solid @borderColor;\n}\n\n.li_text {\n    font-size: @fontSize14;\n}\n\n.li_right {\n    width: fit-content;\n    height: 100%;\n    // background-color: olive;\n    display: flex;\n}\n\n.current_region {\n    width: fit-content;\n    height: 100%;\n    color: @140_140_140;\n    font-size: @fontSize14;\n    margin-right: 10px;\n    display: flex;\n    align-items: center;\n    // background-color: red;\n}\n\n.li_forward {\n    width: 14px;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    // background-color: black;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserAreaDetail.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserAreaDetail.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserAreaDetail.vue?vue&type=template&id=9e90727c&scoped=true\"\nimport script from \"./UserAreaDetail.vue?vue&type=script&lang=js\"\nexport * from \"./UserAreaDetail.vue?vue&type=script&lang=js\"\nimport style0 from \"./UserAreaDetail.vue?vue&type=style&index=0&id=9e90727c&prod&scoped=true&lang=less\"\nimport style1 from \"./UserAreaDetail.vue?vue&type=style&index=1&id=9e90727c&prod&scoped=true&lang=less&data-select_region_box=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9e90727c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"UserNickName_container\"},[_c('Header',{attrs:{\"header_name\":_vm.header_name},on:{\"save\":_vm.saveName}}),_c('div',{staticClass:\"input-area\"},[_c('div',{ref:\"inputBox\",staticClass:\"input-box\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.nickname),expression:\"user.nickname\"}],ref:\"input\",staticClass:\"input\",attrs:{\"type\":\"text\",\"name\":\"nickname\",\"autocapitalize\":\"off\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.user.nickname)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.user, \"nickname\", $event.target.value)}}})]),_c('div',{staticClass:\"text\"},[_vm._v(\"好的昵称可以让你的朋友更容易记住你。\")])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"UserNickName_container\">\n        <Header :header_name=\"header_name\" @save=\"saveName\"></Header>\n\n        <div class=\"input-area\">\n            <div class=\"input-box\" ref=\"inputBox\">\n                <input type=\"text\" class=\"input\" ref=\"input\" name=\"nickname\" v-model=\"user.nickname\" autocapitalize=\"off\" autocomplete=\"off\" />\n            </div>\n            <div class=\"text\">好的昵称可以让你的朋友更容易记住你。</div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'UserNickName',\n    data() {\n        return {\n            header_name: '更改昵称',\n            user: {\n                nickname: '' // 用户昵称\n            }\n        };\n    },\n    methods: {\n        // ✅ 新增：获取用户资料的方法\n        fetchUserProfile() {\n            // 请求后端接口获取用户资料\n            this.$axios.get('/user/profile', { withCredentials: true }) // 确保带上凭证\n                .then(response => {\n                    // console.log(\"获取用户资料成功:\", response.data);\n                    // 假设后端返回的数据结构是 { success: true, user: { nickname: '...', ... } }\n                    if (response.data.success && response.data.user) {\n                        this.user.nickname = response.data.user.nickname; // ✅ 从后端响应中正确获取 nickname\n                    } else {\n                        console.warn(\"后端返回的用户资料结构不符合预期或无数据:\", response.data);\n                    }\n                })\n                .catch(error => {\n                    console.error(\"获取用户资料失败:\", error);\n                    // 处理错误，例如重定向到登录页或显示错误消息\n                    this.$toast.error('获取用户资料失败');\n                });\n        },\n        // 保存用户昵称\n        saveName() {\n            // 这个函数只在当前页面保存昵称\n            // http://localhost:3081/api/user/profile/update\n            this.$axios.post('/user/profile/update', {\n                nickname: this.user.nickname\n            }, { withCredentials: true })\n                .then(data => {\n                    this.$toast.success('昵称保存成功');\n                    // 更新 Vuex/全局状态中的昵称（如果使用了）\n                    // 例如: this.$store.commit('setNickname', this.user.nickname);\n                    this.$router.go(-1); // 保存后返回 settings 页面\n                })\n                .catch(err => {\n                    console.error('保存失败', err);\n                    this.$toast.error('保存昵称失败');\n                });\n        }\n    },\n    created() {\n        // ✅ 新增：在组件创建时调用获取用户资料的方法\n        this.fetchUserProfile();\n    },\n    mounted() {\n        // 确保输入框在数据加载后获得焦点\n        // 如果 fetchUserProfile 是异步的，这里可能会过早触发\n        // 更好的做法是在数据加载并渲染完成后再 focus，但对于简单的场景通常没问题\n        this.$refs.input.focus();\n    }\n};\n</script>\n\n<style scoped lang='less'>\n.UserNickName_container {\n    width: 100%;\n    height: 100%;\n    // background-color: aqua;\n}\n</style>\n\n<style scoped lang='less'>\n.input-area {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    width: 100%;\n    height: fit-content;\n    padding: 24px 10px 10px 10px;\n    // background-color: darkcyan;\n}\n\n.input-box {\n    width: 100%;\n    height: 30px;\n    display: flex;\n}\n\n.input {\n    flex: 1;\n    height: 30px;\n    outline: none;\n    font-size: @fontSize14;\n    padding: 0 10px;\n    background-color: transparent;\n    border-bottom: 1px solid @210_210_210;\n\n}\n\n.input:focus {\n    border-bottom: 1px solid @dodgerblue;\n    /* 设置输入框聚焦时的边框颜色 */\n}\n\n.text {\n    margin-left: 20px;\n    margin-top: 10px;\n    width: 100%;\n    color: @140_140_140;\n    font-size: @fontSize12;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserNickName.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserNickName.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserNickName.vue?vue&type=template&id=2339e7d5&scoped=true\"\nimport script from \"./UserNickName.vue?vue&type=script&lang=js\"\nexport * from \"./UserNickName.vue?vue&type=script&lang=js\"\nimport style0 from \"./UserNickName.vue?vue&type=style&index=0&id=2339e7d5&prod&scoped=true&lang=less\"\nimport style1 from \"./UserNickName.vue?vue&type=style&index=1&id=2339e7d5&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2339e7d5\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"SetUp_container\"},[_c('Header',{attrs:{\"header_name\":_vm.header_name}}),_c('ul',{staticClass:\"setup_box\"},[_c('li',{staticClass:\"li-box\",on:{\"click\":_vm.exit}},[_c('div',{staticClass:\"li\"},[_c('div',{staticClass:\"li_text\"},[_vm._v(\"退出登陆\")]),_c('div',{staticClass:\"li_icon\"},[_c('Forward')],1)])]),_c('li',{staticClass:\"li-box\",on:{\"click\":_vm.deactivateAccount}},[_c('div',{staticClass:\"li\"},[_c('div',{staticClass:\"li_text\"},[_vm._v(\"注销账号\")]),_c('div',{staticClass:\"li_icon\"},[_c('Forward')],1)])])]),(_vm.showPrompt)?_c('div',{staticClass:\"prompt_box\"},[_c('div',{staticClass:\"prompt\"},[_c('div',{staticClass:\"prompt_title\"},[_vm._v(\"确认注销账号\")]),_c('div',{staticClass:\"prompt_message\"},[_vm._v(\"注销后无法恢复，您确定要注销吗？\")]),_c('div',{staticClass:\"prompt_input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码确认注销\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.password=$event.target.value}}})]),_c('div',{staticClass:\"prompt_buttons\"},[_c('button',{on:{\"click\":_vm.confirmDeactivate}},[_vm._v(\"确认注销\")]),_c('button',{on:{\"click\":_vm.cancelDeactivate}},[_vm._v(\"取消\")])])])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"SetUp_container\">\n        <Header :header_name=\"header_name\"></Header>\n\n        <ul class=\"setup_box\">\n            <li class=\"li-box\" @click=\"exit\">\n                <div class=\"li\">\n                    <div class=\"li_text\">退出登陆</div>\n                    <div class=\"li_icon\">\n                        <Forward></Forward>\n                    </div>\n                </div>\n            </li>\n            <li class=\"li-box\" @click=\"deactivateAccount\">\n                <div class=\"li\">\n                    <div class=\"li_text\">注销账号</div>\n                    <div class=\"li_icon\">\n                        <Forward></Forward>\n                    </div>\n                </div>\n            </li>\n        </ul>\n\n        <!-- 注销账号提示框 -->\n        <div v-if=\"showPrompt\" class=\"prompt_box\">\n            <div class=\"prompt\">\n                <div class=\"prompt_title\">确认注销账号</div>\n                <div class=\"prompt_message\">注销后无法恢复，您确定要注销吗？</div>\n                <div class=\"prompt_input\">\n                    <input v-model=\"password\" type=\"password\" placeholder=\"请输入密码确认注销\" />\n                </div>\n                <div class=\"prompt_buttons\">\n                    <button @click=\"confirmDeactivate\">确认注销</button>\n                    <button @click=\"cancelDeactivate\">取消</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n    name: 'SetUp',\n    data() {\n        return {\n            header_name: '设置',\n            showPrompt: false, // 控制提示框显示与否\n            password: '', // 用户输入的密码\n\n            // ✅ 新增：初始化 user 对象\n            user: {\n                name: '',\n                avatar: '',\n                nickname: '',\n                email: '' // 确保初始化邮箱字段\n            }\n        };\n    },\n    computed: {\n        // ✅ 关键：从 Vuex getters 映射所需的用户数据\n        ...mapGetters(['currentUser', 'currentUserId', 'currentUserCustomId']),\n    },\n    methods: {\n        ...mapActions([\"logout\"]), // 映射 Vuex 的 logout action\n\n        // 获取用户资料\n        // 现在可以直接从 Vuex 的 currentUser 获取，或者仍然通过 API 重新获取最新资料\n        fetchUserProfile() {\n            // 选项一：直接从 Vuex 获取（如果 Vuex 已经有完整数据）\n            if (this.currentUser) {\n                this.user.name = this.currentUser.name;\n                this.user.avatar = `http://localhost:3081/${this.currentUser.avatar}`;\n                this.user.nickname = this.currentUser.nickname;\n                this.user.email = this.currentUser.email; // 确保邮箱也显示\n                console.log(\"SetUp==从Vuex获取用户资料成功:\", this.user);\n            } else {\n                // 选项二：如果 Vuex 中没有，或者需要刷新数据，通过 API 获取\n                this.$axios.get('http://localhost:3081/api/user/profile')\n                    .then(response => {\n                        console.log(\"SetUp==通过API获取用户资料成功:\", response.data);\n                        if (response.data.success && response.data.user) {\n                            // ✅ 关键：更新组件内部的 user 对象\n                            this.user.name = response.data.user.name;\n                            this.user.avatar = `http://localhost:3081/${response.data.user.avatar}`;\n                            this.user.nickname = response.data.user.nickname;\n                            this.user.email = response.data.user.email; // 确保邮箱也更新\n\n                            // 并且更新 Vuex store，保持数据一致性\n                            this.$store.dispatch('loginSuccess', response.data.user);\n                        } else {\n                            console.warn('获取用户资料成功，但数据无效:', response.data.message);\n                            this.$toast(response.data.message || '获取用户资料失败');\n                        }\n                    })\n                    .catch(error => {\n                        console.error(\"获取用户资料失败:\", error);\n                        this.$toast(\"获取用户资料失败，请稍后重试！\");\n                    });\n            }\n        },\n\n        async exit() {\n            try {\n                await this.$axios.post(\n                    \"http://localhost:3081/api/exit\",\n                    {},\n                    { withCredentials: true }\n                );\n                this.logout(); // 调用 Vuex actions 中的 logout\n                this.$router.push(\"/Login\");\n            } catch (error) {\n                console.error(\"退出失败\", error);\n                this.$toast(\"退出失败，请稍后重试！\");\n            }\n        },\n\n        deactivateAccount() {\n            this.showPrompt = true;\n        },\n\n        // 确认注销账号\n        async confirmDeactivate() {\n            if (!this.password) {\n                this.$toast(\"密码不能为空！\");\n                return;\n            }\n\n            // ✅ 关键：使用从 Vuex 获取的自定义 user_id\n            const user_Id = this.currentUserCustomId; // 这是 liuhu_Ob70MyylIdqKOu\n            // 如果后端注销接口期望的是数据库主键 ID，则使用 this.currentUserId\n\n            if (!user_Id) {\n                this.$toast(\"无法获取用户ID，请重新登录！\");\n                console.error(\"注销失败：Vuex store 中用户自定义ID未定义。\");\n                this.showPrompt = false;\n                return;\n            }\n\n            try {\n                const response = await this.$axios.post(\n                    \"http://localhost:3081/api/deactivate-account\",\n                    { userId: user_Id, password: this.password }, // 确保参数名与后端匹配\n                    { withCredentials: true }\n                );\n\n                if (response.data.success) {\n                    this.$toast(\"账号已注销\");\n                    this.logout(); // 清除 Vuex 状态，并触发重定向\n                    this.$router.push(\"/Login\");\n                } else {\n                    this.$toast(response.data.message);\n                }\n            } catch (error) {\n                console.error(\"注销失败\", error);\n                this.$toast(error.response?.data?.message || \"注销失败，请稍后重试！\");\n            } finally {\n                this.showPrompt = false;\n                this.password = '';\n            }\n        },\n\n        cancelDeactivate() {\n            this.showPrompt = false;\n            this.password = '';\n        }\n    },\n    created() {\n        // 在组件创建时获取或更新用户资料\n        this.fetchUserProfile();\n    },\n};\n\n</script>\n\n<style scoped lang=\"less\">\n.SetUp_container {\n    width: 100%;\n    height: 100%;\n    // background-color: darkcyan;\n}\n\n.setup_box {\n    width: 100%;\n    height: fit-content;\n    background-color: @255_255_255;\n}\n\n.li-box {\n    width: 100%;\n    padding: 14px 12px 0px 12px;\n}\n\n.li {\n    padding-bottom: 10px;\n    width: 100%;\n    height: fit-content;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    border-bottom: 1px solid @borderColor;\n}\n\n.li_text {\n    font-size: @fontSize14;\n}\n\n.li_icon {\n    width: 16px;\n    height: 16px;\n}\n\n.prompt_box {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.prompt {\n    width: 90%;\n    max-width: 400px;\n    background-color: white;\n    border-radius: 14px;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);\n}\n\n.prompt_title {\n    font-size: 18px;\n    font-weight: bold;\n    margin-bottom: 10px;\n}\n\n.prompt_message {\n    font-size: 14px;\n    margin-bottom: 20px;\n    text-align: center;\n}\n\n.prompt_input {\n    width: 100%;\n    margin-bottom: 20px;\n}\n\n.prompt_input input {\n    width: 100%;\n    padding: 10px;\n    font-size: 14px;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n}\n\n.prompt_buttons {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n}\n\n.prompt_buttons button {\n    width: 45%;\n    padding: 10px;\n    font-size: 16px;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n}\n\n.prompt_buttons button:first-child {\n    background-color: #ff4d4f;\n    color: white;\n}\n\n.prompt_buttons button:last-child {\n    background-color: #cccccc;\n    color: white;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SetUp.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SetUp.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SetUp.vue?vue&type=template&id=2e9c096e&scoped=true\"\nimport script from \"./SetUp.vue?vue&type=script&lang=js\"\nexport * from \"./SetUp.vue?vue&type=script&lang=js\"\nimport style0 from \"./SetUp.vue?vue&type=style&index=0&id=2e9c096e&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2e9c096e\",\n  null\n  \n)\n\nexport default component.exports","// src/router/index.js\nimport Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport store from '@/store'; // 引入 Vuex store\nimport axios from 'axios'; // 引入 axios 用于检查 session\n\n// 内容\nimport Home from '@/view/home.vue'\nimport Setting from '@/view/setting.vue'\n// import UserList from '@/view/UserList.vue'  // 用户列表\n// import ChatArea from '@/view/ChatArea.vue'  // 聊天区域\n\n// 登录\nimport index from '@/loginPage/index.vue'\nimport Login from '@/loginPage/login.vue'\nimport Register from '@/loginPage/register.vue'\nimport ForgetPassword from '@/loginPage/ForgetPassword.vue'; // 确保引入 ForgetPassword\n\n// 个人信息\nimport PersonalInformation from '@/settingPages/PersonalInformation.vue'\n// 修改密码\nimport ChangePassword from '@/settingPages/ChangePassword.vue'\n// 设置新密码\nimport SetNewPassword from '@/settingPages/SetNewPassword.vue'\n// 好友列表\nimport Friends from '@/view/Friends.vue';\n\n// 用户信息\nimport UserName from '@/settingPages/p_i_pages/UserName.vue';\nimport UserGender from '@/settingPages/p_i_pages/UserGender.vue';\nimport UserArea from '@/settingPages/p_i_pages/UserArea.vue';\nimport UserAreaDetail from '@/settingPages/p_i_pages/UserAreaDetail.vue';\nimport UserNickName from '@/settingPages/p_i_pages/UserNickName.vue';\nimport SetUp from '@/settingPages/SetUp.vue';\n\n// 注册 VueRouter 插件\nVue.use(VueRouter)\n\nconst routes = [\n    // ✅ 登录前页面\n    { path: '/', name: '/', component: index, meta: { requiresGuest: true } },\n    { path: '/index', name: 'index', component: index, meta: { requiresGuest: true } },\n    { path: '/Login', name: 'Login', component: Login, meta: { requiresGuest: true } },\n    { path: '/Register', name: 'Register', component: Register, meta: { requiresGuest: true } },\n    { path: '/ForgetPassword', name: 'ForgetPassword', component: ForgetPassword, meta: { requiresGuest: true, requiresForgotPasswordVerification: true } }, // 添加 requiresForgotPasswordVerification\n\n    // ✅ 登录后页面\n    { path: '/Home', name: 'Home', component: Home, meta: { requiresAuth: true } },\n    { path: '/Setting', name: 'Setting', component: Setting, meta: { requiresAuth: true } },\n\n    // 个人信息页面\n    { path: '/PersonalInformation', name: 'PersonalInformation', component: PersonalInformation, meta: { requiresAuth: true } },\n    // 修改密码\n    { path: '/ChangePassword', name: 'ChangePassword', component: ChangePassword, meta: { requiresAuth: true } },\n    // 设置新密码\n    { path: '/SetNewPassword', name: 'SetNewPassword', component: SetNewPassword, meta: { requiresAuth: true } },\n    // 设置\n    { path: '/SetUp', name: 'SetUp', component: SetUp, meta: { requiresAuth: true } },\n    // 好友列表\n    { path: '/Friends', name: 'Friends', component: Friends, meta: { requiresAuth: true } },\n\n    // 用户信息\n    { path: '/UserName', name: 'UserName', component: UserName, meta: { requiresAuth: true } },\n    { path: '/UserGender', name: 'UserGender', component: UserGender, meta: { requiresAuth: true } },\n    { path: '/UserArea', name: 'UserArea', component: UserArea, meta: { requiresAuth: true } },\n    { path: '/UserAreaDetail', name: 'UserAreaDetail', component: UserAreaDetail, meta: { requiresAuth: true }, props: true },\n    { path: '/UserNickName', name: 'UserNickName', component: UserNickName, meta: { requiresAuth: true } },\n\n];\n\nconst router = new VueRouter({\n    mode: 'history',\n    routes,  // 将路由配置传递给 VueRouter\n})\n\n// session + cookie\nrouter.beforeEach(async (to, from, next) => {\n    const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n    const requiresGuest = to.matched.some(record => record.meta.requiresGuest);\n    // 检查是否需要忘记密码验证\n    const requiresForgotPasswordVerification = to.matched.some(record => record.meta.requiresForgotPasswordVerification);\n\n    // 先确保 store 有最新登录状态\n    await store.dispatch('checkLogin');\n    const loggedIn = store.getters.isLoggedIn;\n\n    // 避免在当前页面触发跳转\n    if (to.path === from.path && to.name === from.name) {\n        return next();\n    }\n\n    // 如果尝试访问 /ForgetPassword 页面，检查是否已通过验证\n    if (requiresForgotPasswordVerification) {\n        try {\n            const response = await axios.get('/check-forgot-password-verification', {\n                withCredentials: true\n            });\n            if (!response.data.verified) {\n                // 如果未验证，重定向到登录页面或提示信息页面\n                store.dispatch('error/addError', {\n                    msg: '请先完成密码重置验证流程',\n                    type: 'error'\n                });\n                return next('/Login'); // 或者其他合适的页面\n            }\n        } catch (error) {\n            console.error('检查忘记密码验证失败:', error);\n            store.dispatch('error/addError', {\n                msg: '验证状态检查失败，请重试',\n                type: 'error'\n            });\n            return next('/Login');\n        }\n    }\n\n    // 如果需要授权，但未登录，跳转到登录页面\n    if (requiresAuth && !loggedIn) {\n        return next('/Login');\n    }\n\n    // 如果是需要未登录状态的页面，且用户已登录，跳转到首页\n    if (requiresGuest && loggedIn) {\n        // 只有当目标路径不是 /Home 时才进行重定向\n        if (to.path !== '/Home') {\n            return next('/Home');\n        } else {\n            // 如果尝试访问 /Home (在 requiresGuest 为 true 的情况下通常不会发生)，\n            // 或者就在 /Home 页面，则允许导航继续进行。\n            return next();\n        }\n    }\n\n    // console.log('router/index.js 当前路由:', to.path);\n    // 动态添加路由时确保去重，避免重复添加路由\n    next();\n});\n\nexport default router;  // 导出 VueRouter 实例","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.limitedErrors.length)?_c('transition-group',{staticClass:\"global_error\",attrs:{\"name\":\"fade\",\"tag\":\"div\"}},_vm._l((_vm.limitedErrors),function(err,index){return _c('div',{key:index,staticClass:\"error_li\",class:err.type},[_c('span',{staticClass:\"close_btn\",on:{\"click\":function($event){return _vm.remove(index)}}},[_c('Clear',{staticClass:\"err-clear-area\",class:err.type})],1),_c('span',{staticClass:\"err_mas\"},[_vm._v(_vm._s(err.msg))])])}),0):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <transition-group name=\"fade\" tag=\"div\" class=\"global_error\" v-if=\"limitedErrors.length\">\n        <div class=\"error_li\" v-for=\"(err, index) in limitedErrors\" :key=\"index\" :class=\"err.type\">\n            <span class=\"close_btn\" @click=\"remove(index)\">\n                <Clear class=\"err-clear-area\" :class=\"err.type\">\n                    <!-- <div class=\"clear\"></div> -->\n                </Clear>\n            </span>\n            <span class=\"err_mas\">{{ err.msg }}</span>\n        </div>\n    </transition-group>\n</template>\n\n<script>\nimport { mapGetters, mapMutations } from 'vuex';\n\nexport default {\n    name: 'GlobalError',\n    data() {\n        return {\n             errorMaxWidth: '300px' // 默认值，将在 mounted 中根据环境更新\n        }\n    },\n    computed: {\n        ...mapGetters('error', ['allErrors']),\n        limitedErrors() {\n            return this.allErrors.slice(0, 2);\n        }\n    },\n    methods: {\n        ...mapMutations('error', ['REMOVE_ERROR']),\n        remove(index) {\n            this.REMOVE_ERROR(index);\n        },\n        checkEnvironmentAndSetWidth() {\n            const userAgent = navigator.userAgent || navigator.vendor || window.opera;\n\n            // 检查常见的移动设备或 WebView 标识符\n            const isMobile = /android|iphone|ipad|ipod|blackberry|windows phone/i.test(userAgent);\n            const isWebView = /wv|webview|ipod|iphone|ipad|android.*(wv)/i.test(userAgent) || (window.navigator.standalone === true);\n\n            // 辅助判断：屏幕宽度\n            const isSmallScreen = window.innerWidth <= 768; // 例如，768px 作为平板/手机的临界值\n\n            if (isMobile || isWebView || isSmallScreen) {\n                // 如果是H5（手机WebView或手机浏览器），设置较小的宽度\n                this.errorMaxWidth = '90%'; // 例如，占父容器90%的宽度\n            } else {\n                // 如果是电脑浏览器\n                this.errorMaxWidth = '400px'; // 例如，设置为400px，或你期望的固定宽度\n            }\n            // console.log(`全局错误处理.vue = Current environment: ${this.errorMaxWidth}`);\n        }\n    },\n    mounted() {\n        this.checkEnvironmentAndSetWidth();\n        // 监听窗口大小变化，以防用户调整浏览器窗口大小\n        window.addEventListener('resize', this.checkEnvironmentAndSetWidth);\n    },\n    beforeDestroy() {\n        // 组件销毁前移除事件监听器，防止内存泄漏\n        window.removeEventListener('resize', this.checkEnvironmentAndSetWidth);\n    }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.fade-enter-active,\n.fade-leave-active {\n    transition: all 0.5s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n    opacity: 0;\n    transform: translateY(-10px);\n}\n\n.global_error {\n    position: fixed;\n    top: calc(@nav + 20px);\n    left: 50%;\n    transform: translateX(-50%);\n    z-index: 9999;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n.error_li {\n    // max-width: 300px;\n    width: fit-content;\n    height: 40px;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    font-size: @fontSize14;\n    font-weight: bold;\n    padding: 0 12px;\n    border-radius: 10px;\n    position: relative;\n\n    &.error {\n        background-color: rgb(255, 240, 240);\n        border: 1px solid rgb(255, 160, 160);\n        color: rgb(255, 120, 120);\n    }\n\n    &.success {\n        background-color: rgb(240, 255, 240);\n        border: 1px solid rgb(100, 200, 100);\n        color: rgb(60, 180, 60);\n    }\n\n    .close_btn {\n        cursor: pointer;\n        font-weight: bold;\n        margin-left: 6px;\n    }\n\n    .err_mas {\n        margin-left: 16px;\n        margin-right: 6px;\n    }\n}\n\n.err-clear-area {\n    position: relative !important;\n    width: auto !important;\n    background-color: transparent !important;\n\n    &.success /deep/ .clear {\n        background-color: rgb(100, 200, 100);\n    }\n\n    &.error /deep/ .clear {\n        background-color: rgb(255, 120, 120);\n    }\n}\n\n/deep/ .clear {\n    width: 16px;\n    height: 16px;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./global_error.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./global_error.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./global_error.vue?vue&type=template&id=38ba46ae&scoped=true\"\nimport script from \"./global_error.vue?vue&type=script&lang=js\"\nexport * from \"./global_error.vue?vue&type=script&lang=js\"\nimport style0 from \"./global_error.vue?vue&type=style&index=0&id=38ba46ae&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38ba46ae\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"clear-area\",on:{\"click\":function($event){return _vm.$emit('click')}}},[_c('div',{staticClass:\"clear\"},[_c('svg',{staticClass:\"clear_svg\",attrs:{\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":_vm.clear_svg_d}})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <!-- \n        为什么要 $emit('click')\n        Clear 是一个组件，父组件监听 @click 是监听它发出的事件 \n    -->\n    <div class=\"clear-area\" @click=\"$emit('click')\">\n        <div class=\"clear\">\n            <svg class=\"clear_svg\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path :d=\"clear_svg_d\" />\n            </svg>\n        </div>\n    </div>\n</template>\n\n<script>\nimport svg from \"@/assets/svg/svg.js\"; // svg\n\nexport default {\n    // 清除按钮\n    name: \"clear\",\n    data() {\n        return {\n            clear_svg_d: svg.clear_svg // clear_svg\n        };\n    },\n\n};\n</script>\n\n<style lang=\"less\" data-clear-area>\n.clear-area {\n    position: absolute;\n    top: 0;\n    right: calc(-1 * @margin0);\n    width: @dl_zc_field;\n    height: 100%;\n    // background-color: turquoise;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.clear {\n    background-color: @210_210_210;\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.clear_svg {\n    width: 50%;\n    height: 50%;\n    fill: white;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./clear.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./clear.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./clear.vue?vue&type=template&id=959fcfc4\"\nimport script from \"./clear.vue?vue&type=script&lang=js\"\nexport * from \"./clear.vue?vue&type=script&lang=js\"\nimport style0 from \"./clear.vue?vue&type=style&index=0&id=959fcfc4&prod&lang=less&data-clear-area=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"forward-area\"},[_c('svg',{attrs:{\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":_vm.forward_svg_d11}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"forward-area\">\n        <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path :d=forward_svg_d11></path>\n        </svg>\n    </div>\n</template>\n\n\n\n<script>\nimport svg from \"@/assets/svg/svg.js\"\n\nexport default {\n    name: 'forward',\n    data() {\n        return {\n            forward_svg_d11: svg.forward_svg_d11,\n        };\n    },\n    methods: {\n\n    }\n};\n</script>\n\n<style scoped lang='less'>\n.forward-area {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    // background-color: aqua;\n\n    & svg {\n        fill: @forwoard-svg-color;\n    }\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./forward.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./forward.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./forward.vue?vue&type=template&id=541536cf&scoped=true\"\nimport script from \"./forward.vue?vue&type=script&lang=js\"\nexport * from \"./forward.vue?vue&type=script&lang=js\"\nimport style0 from \"./forward.vue?vue&type=style&index=0&id=541536cf&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"541536cf\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"back-area\",on:{\"click\":function($event){return _vm.$emit('click')}}},[_c('van-icon',{attrs:{\"size\":\"20\",\"name\":\"arrow-left\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"back-area\" @click=\"$emit('click')\">\n        <van-icon size=\"20\" name=\"arrow-left\" />\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'Back',\n    data() {\n        return {};\n    },\n    methods: {}\n};\n</script>\n\n<style scoped lang='less'>\n.back-area {\n    width: 100%;\n    height: 100%;\n    // background-color: mediumorchid;\n    z-index: 999;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./back.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./back.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./back.vue?vue&type=template&id=d081ba16&scoped=true\"\nimport script from \"./back.vue?vue&type=script&lang=js\"\nexport * from \"./back.vue?vue&type=script&lang=js\"\nimport style0 from \"./back.vue?vue&type=style&index=0&id=d081ba16&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d081ba16\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"header-back\",on:{\"click\":_vm.toBack}},[_c('Back')],1),_c('div',{staticClass:\"header-name\"},[_vm._v(_vm._s(_vm.header_name))]),_c('div',{staticClass:\"header-more\"},[(_vm.isPIPages)?_c('div',{staticClass:\"save\",on:{\"click\":function($event){return _vm.$emit('save')}}},[_vm._v(\"保存\")]):_vm._e()])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <!-- header.vue -->\n        <div class=\"header\">\n            <div class=\"header-back\" @click=\"toBack\">\n                <Back></Back>\n            </div>\n            <div class=\"header-name\">{{ header_name }}</div>\n            <div class=\"header-more\">\n                <div class=\"save\" v-if=\"isPIPages\" @click=\"$emit('save')\">保存</div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'Header',\n    props: {\n        header_name: {\n            type: String,\n            required: true, // 确保父组件传递了该值\n        }\n    },\n    computed: {\n        // 检查是否在 UserName、UserGender 或 UserArea 或 UserAreaDetail 页面\n        // 显示保存按钮\n        isPIPages() {\n            return this.$route.path === '/UserName' ||\n                this.$route.path === '/UserGender' ||\n                this.$route.path === '/UserAreaDetail' ||\n                this.$route.path === '/UserNickName';\n        }\n    },\n    methods: {\n        toBack() {\n            this.$router.back(); // 强制返回上一页\n        },\n    }\n};\n</script>\n\n<style scoped lang=\"less\" data-header>\n.header {\n    width: 100%;\n    height: @header-height;\n    background-color: rgb(235, 235, 235);\n    padding: 0px 0.5rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.header-back,\n.header-name,\n.header-more {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: @fontSize16;\n}\n\n.header-back {\n    padding: 8px 8px 8px 0px;\n}\n\n.header-more {\n    min-width: 32px;\n}\n\n.header-back svg {\n    width: 100%;\n    height: 100%;\n}\n\n.save {\n    background-color: @dodgerblue;\n    color: @255_255_255;\n    padding: 4px 10px;\n    border-radius: 4px;\n    font-size: @fontSize12;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./header.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./header.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./header.vue?vue&type=template&id=28ed6e71&scoped=true\"\nimport script from \"./header.vue?vue&type=script&lang=js\"\nexport * from \"./header.vue?vue&type=script&lang=js\"\nimport style0 from \"./header.vue?vue&type=style&index=0&id=28ed6e71&prod&scoped=true&lang=less&data-header=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28ed6e71\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport axios from 'axios'\nimport store from './store'; // store/index.js\n\n// console.log('Vue application starting...'); // 添加这个\n\n// 引入 vant 样式\nimport 'vant/lib/index.less'\nimport { NavBar } from 'vant'; // nav\nimport router from './router'  // 引入路由实例\nimport { Tabbar, TabbarItem } from 'vant'; // 底部导航栏\nimport { PullRefresh } from 'vant'; // 下拉刷新\nimport { Cell, CellGroup } from 'vant'; // 单元格\nimport { Button } from 'vant';  // 按钮\nimport { Icon } from 'vant'; // 图标\nimport { DropdownMenu, DropdownItem } from 'vant'; // 下拉菜单\nimport { Search } from 'vant'; // 搜索\n\n// 全局样式\nimport '@/custom/color.less'\nimport '@/custom/global.less'\nimport '@/custom/fontSize.less'\n\n// svg 样式\nimport '@/assets/svg/svg'\n\n// 搜索好友\nimport UserListHeader from '@/components/UserListHeader.vue'\n// 全局注册搜索好友组件\nVue.component('Clear', UserListHeader);\n\n// 全局注册 GlobalError 组件\nimport GlobalError from '@/components/global_error.vue'\n// 全局注册 GlobalError 按钮组件\nVue.component('GlobalError', GlobalError);\n\n// 清除按钮\nimport Clear from '@/components/clear.vue'\n// 全局注册清除按钮组件\nVue.component('Clear', Clear);\n\n// 前进组件\nimport Forward from '@/components/forward.vue';\n// 全局注册前进按钮组件\nVue.component('Forward', Forward);\n\n// 全局注册 Back 组件\nimport Back from '@/components/back.vue'\n// 全局注册 Back 组件\nVue.component('Back', Back);\n\n// 全局注册 Header 组件\nimport Header from '@/components/header.vue'\n// 全局注册 Header 组件\nVue.component('Header', Header);\n\n// 全局注册 Area 组件\nimport { Area } from 'vant';\n// 全局注册 Area 组件\nVue.use(Area);\n\n// 全局注册 Toast 组件\nimport { Toast } from 'vant';\n// 全局注册 Toast 组件\nVue.use(Toast);\n// 全局配置 Toast\nToast.setDefaultOptions({\n    duration: 1000,  // 设置默认显示时长\n    className: 'no-pointer-events', // 禁止影响点击事件\n});\n\nVue.use(NavBar);  // nav\nVue.use(Tabbar);  // 底部导航栏\nVue.use(TabbarItem); // 底部导航栏\nVue.use(PullRefresh); // 下拉刷新\nVue.use(Button);  // 按钮\nVue.use(Icon);// 图标\n\nVue.use(Cell);  // 单元格\nVue.use(CellGroup);  // 单元格\n\nVue.use(DropdownMenu);  // 下拉菜单\nVue.use(DropdownItem);  // 下拉菜单\nVue.use(Search);  // 搜索\n\n// 配置 Axios 实例\nconst axios_service = axios.create({\n    baseURL: 'http://localhost:3081/api', // 后端 API 基础 URL\n    timeout: 5000, // 请求超时时间 \n    withCredentials: true, // 允许携带 cookie\n    headers: { 'Content-Type': 'application/json' },\n});\n\n// 设置全局挂载\nVue.prototype.$axios = axios_service;\n// 强制携带 cookie\n// axios.defaults.withCredentials = true;\n\nVue.config.productionTip = false\n\nnew Vue({\n    store,\n    router,\n    render: h => h(App),\n    created() {\n        // console.log('Vue instance created!'); // 添加这个\n    },\n    mounted() {\n        // console.log('Vue instance mounted to DOM!'); // 添加这个\n    }\n}).$mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkh5_app\"] = self[\"webpackChunkh5_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(9365); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","attrs","isLoggedIn","_e","staticClass","staticStyle","_v","currentUser","avatar","getAvatarUrl","homeIcon","friendsIcon","settingIcon","staticRenderFns","name","data","mounted","computed","mapGetters","currentPath","$route","path","created","checkLogin","methods","mapActions","relativePath","startsWith","baseUrl","component","state","errors","mutations","ADD_ERROR","payload","push","REMOVE_ERROR","index","splice","actions","addError","commit","msg","type","setTimeout","getters","allErrors","namespaced","storeAxios","axios","create","baseURL","process","timeout","withCredentials","headers","Vue","use","Vuex","currentChatTargetUser","setLoginStatus","status","setCurrentUser","user","logout","setCurrentUserAvatar","avatarPath","setCurrentUserGender","gender","setChatTargetUser","res","get","loggedIn","loginSuccess","dispatch","userData","selectChatUser","currentUserId","id","currentUserCustomId","user_id","getUserEmail","email","modules","error","style","width","userListWidth","currentChatUser","on","handleSelectUserFromUserList","startDrag","users","selectUser","handleFriendAdded","loading","length","_l","key","class","active","$event","_s","nickname","focus","isFocused","searchIconPath","directives","rawName","value","searchValue","expression","modifiers","ref","domProps","handleFocus","handleBlur","$forceUpdate","indexOf","_k","keyCode","handleSearchSubmit","apply","arguments","target","composing","trim","stopPropagation","preventDefault","clearSearchInput","clearIconPath","openAddFriendOverlay","addIconPath","showSearchResultsOverlay","filteredFriends","highlightFirstFriend","selectUserFromSearch","isValidEmail","remoteSearchLoading","searchedNewUser","remoteSearchError","highlightNewUserItem","addNewFriend","showAddFriendOverlay","closeAddFriendOverlay","addFriendSearchValue","searchNewFriendsByEmail","svg_d","toggle_translate_svg","clear_svg","translate_search_svg","home_clearHistory_d11","home_clearHistory_d22","forward_svg_d11","user_personal_info_d11","user_personal_info_d22","log_out_d11","log_out_d22","personal_info_d11","personal_info_d22","personal_info_d33","personal_info_d44","personal_info_d55","change_password_d11","userList_search","userList_add","userList_clear","emits","props","friends","Array","default","svg","test","searchTerm","toLowerCase","filter","includes","$nextTick","resultsOverlay","$el","querySelector","contains","document","activeElement","resetRemoteSearchState","$refs","searchInput","console","log","$emit","emailToSearch","isFriend","some","friend","$axios","params","then","response","success","message","catch","finally","post","target_user_id","alert","watch","newValue","oldValue","handler","newVal","deep","components","UserListHeader","Object","currentSelectedUser","immediate","oldVal","newUsers","oldUsers","JSON","stringify","ensureUserSelected","fetchFriends","isArray","matched","find","u","lastSelectedUserId","localStorage","getItem","removeItem","handleDrop","handleDragLeave","handleDragEnter","isDraggingOver","messages","dbId","senderId","currentLoginUser","username","isImageMessage","text","getImageUrl","handleImageError","showFullscreen","imageLoadError","startResize","isFullscreen","closeFullscreen","fullscreenImageUrl","height","chatInputHeight","newMessage","textareaStyle","ctrlKey","shiftKey","altKey","metaKey","sendMessage","insertNewline","handlePaste","imagePreviews","preview","src","removeImagePreview","uploading","socket","isResizing","startY","startHeight","dragLeaveTimeout","lineHeight","paddingY","borderWidth","currentLines","split","minLines","maxLines","actualLines","Math","max","min","calculatedHeight","minHeight","maxHeight","overflowY","newUser","oldUser","loadMessages","disconnect","initSocket","imageUrl","body","overflow","io","emit","receiverId","existingMessageIndex","findIndex","m","$set","scrollChatToBottom","originalMsgId","isOptimistic","err","warn","targetUserCustomId","map","textContent","clientMsgIdBase","Date","now","messageCounter","textMessageToSend","timestamp","toISOString","imageUrlsToSend","p","serverUrl","forEach","imageMessageToSend","URL","revokeObjectURL","textarea","messageTextarea","start","selectionStart","end","selectionEnd","substring","fullUrl","messagesContainer","scrollTop","scrollHeight","images","querySelectorAll","imagesLoaded","totalImages","img","complete","addEventListener","once","e","clearTimeout","handleDragOver","container","relatedTarget","files","dataTransfer","i","file","uploadAndPreviewImage","event","items","clipboardData","originalEvent","item","getAsFile","localPreviewUrl","createObjectURL","previewItem","formData","FormData","append","previewToRemove","clientY","userSelect","cursor","window","doResize","stopResize","deltaY","newHeight","removeEventListener","beforeDestroy","UserList","ChatArea","dragging","setItem","onDragging","stopDrag","home","rect","getBoundingClientRect","offsetX","clientX","left","minWidth","maxWidth","newWidth","savedWidth","parseInt","$router","displayAvatar","region","finalImageUrl","cleanPath","refreshUserProfile","$store","letter","refInFor","progress","_","gsap","from","opacity","y","delay","duration","ease","to","$data","onComplete","fadeOutAndRedirect","updateProgress","replace","login","clear_email","password","clear_password","free_register","forgotPassword","showVerificationModal","userVerificationCode","verifyCodeFromModal","cancelVerification","errorMessage","sendCodeResponse","verifyCodeResponse","code","query","register","back_login_fn","confirmPassword","clear_confirmPassword","verificationCode","disabled","codeSending","getVerificationCode","countdown","canRegister","agreementChecked","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","_m","countdownTimer","go","startCountdown","clearInterval","setInterval","verifyRes","registerRes","submitNewPassword","forget_newPassword","forget_confirmPassword","newPassword","header_name","handleAvatarClick","onAvatarSelected","showCropper","imageToCrop","aspectRatio","cancelCrop","confirmCrop","showImageViewer","closeImageViewer","currentImageForViewer","Cropper","selectedFile","action","avatarInput","click","reader","FileReader","onload","result","readAsDataURL","canvas","cropper","getResult","toBlob","blob","uploadAvatar","fileBlob","avatarUrl","$toast","fail","submitCode","codeInput","sendCode","timer","userEmail","toBack","fetch","method","credentials","json","allFriends","handleSelectUser","keys","groupedFriends","group","handleFriendClick","groups","regAlphabetic","displayName","firstChar","charAt","toUpperCase","groupKey","pinyinResult","pinyin","toneType","sort","a","b","nameA","nameB","join","localeCompare","sortedKeys","sortedGroups","saveName","fetchUserProfile","saveGender","selectGender","selectedGender","regionData","provinceItem","handleClick","getProvinceName","isSelected","selectedRegion","provinceList","currentDisplayRegion","provinceName","province","currentProvinceName","userProvince","lastSelectedProvince","undefined","handleSave","selectedCity","isSpecialCity","selectedDistrict","districtList","cityList","handleItemClick","fullRegion","getRegionDataByProvince","provinceData","地级市","区县","input","exit","deactivateAccount","showPrompt","confirmDeactivate","cancelDeactivate","user_Id","userId","VueRouter","routes","meta","requiresGuest","Login","Register","ForgetPassword","requiresForgotPasswordVerification","Home","requiresAuth","Setting","PersonalInformation","ChangePassword","SetNewPassword","SetUp","Friends","UserName","UserGender","UserArea","UserAreaDetail","UserNickName","router","mode","beforeEach","async","next","record","store","verified","limitedErrors","remove","errorMaxWidth","mapMutations","checkEnvironmentAndSetWidth","userAgent","navigator","vendor","opera","isMobile","isWebView","standalone","isSmallScreen","innerWidth","clear_svg_d","isPIPages","String","required","back","GlobalError","Clear","Forward","Back","Header","Area","Toast","setDefaultOptions","className","NavBar","Tabbar","TabbarItem","PullRefresh","Button","Icon","Cell","CellGroup","DropdownMenu","DropdownItem","Search","axios_service","prototype","config","productionTip","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}